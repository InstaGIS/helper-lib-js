{"version":3,"file":"ig_helper.min.js","sources":["../node_modules/ig_markerfactory/dist/markerfactory.es6.js","../src/wicket_helper.js","../src/loadingcircle.js","../src/ig_helper.js","../src/collection_helper.js","../src/colorset.js"],"sourcesContent":["function compact(array) {\n    var index = -1,\n        length = array ? array.length : 0,\n        resIndex = 0,\n        result = [];\n\n    while (++index < length) {\n        var value = array[index];\n        if (value) {\n            result[resIndex++] = value;\n        }\n    }\n    return result;\n }\n\n function padHex(str_in) {\n    if (('' + str_in).length === 1) {\n        return '0' + String(str_in);\n    } else {\n        return String(str_in);\n    }\n }\n\n var defaults = {\n    h: 1,\n    s: 78, // constant saturation\n    l: 63, // constant luminance\n    a: 1\n };\n\n var getColor = function (val, range) {\n    defaults.h = Math.floor((360 / range) * val);\n    return \"hsla(\" + defaults.h + \",\" + defaults.s + \"%,\" + defaults.l + \"%,\" + defaults.a + \")\";\n };\n\n var getColor1 = function () {\n    return \"hsla(\" + defaults.h + \",\" + defaults.s + \"%,\" + (defaults.l - 30) + \"%,\" + defaults.a + \")\";\n };\n\n var parseHalf = function (foo) {\n    return parseInt(foo / 2, 10);\n };\n\n var darken = function (stringcolor, factor) {\n    var darkercolor = {};\n    if (!factor) {\n        factor = 1;\n    }\n    if (stringcolor.fillColor.indexOf('rgb') !== -1) {\n        darkercolor.r = factor * parseHalf(stringcolor.r);\n        darkercolor.g = factor * parseHalf(stringcolor.g);\n        darkercolor.b = factor * parseHalf(stringcolor.b);\n        darkercolor.fillColor = 'rgba(' + darkercolor.r + ',' + darkercolor.g + ',' + darkercolor.b + ',0.99)';\n    } else if (stringcolor.fillColor.indexOf('hsl') !== -1) {\n        darkercolor.h = stringcolor.h;\n        darkercolor.s = stringcolor.s;\n        darkercolor.l = factor * stringcolor.l - 30;\n        darkercolor.fillColor = 'hsl(' + darkercolor.h + ',' + darkercolor.s + '%,' + darkercolor.l + '%)';\n    }\n\n    return darkercolor;\n };\n\n var parseHex = function (hexstring, opacity, darkenfactor) {\n    var hexcolor = {\n        hex: hexstring\n    };\n    darkenfactor = darkenfactor || 1;\n\n    hexstring = hexstring.replace('#', '');\n    if (hexstring.length === 3) {\n        hexstring = hexstring[0] + hexstring[0] + hexstring[1] + hexstring[1] + hexstring[2] + hexstring[2];\n    }\n    if (isNaN(parseFloat(opacity, 10))) {\n        opacity = 1;\n    }\n\n    hexcolor.r = parseInt(darkenfactor * (parseInt(hexstring.substring(0, 2), 16)), 10);\n    hexcolor.g = parseInt(darkenfactor * (parseInt(hexstring.substring(2, 4), 16)), 10);\n    hexcolor.b = parseInt(darkenfactor * (parseInt(hexstring.substring(4, 6), 16)), 10);\n    hexcolor.a = opacity;\n    hexcolor.fillColor = 'rgba(' + hexcolor.r + ',' + hexcolor.g + ',' + hexcolor.b + ',' + hexcolor.a + ')';\n    hexcolor.strokeColor = ['rgba(' + parseHalf(hexcolor.r), parseHalf(hexcolor.g), parseHalf(hexcolor.b), hexcolor.a + ')'].join(',');\n    hexcolor.rgb = hexcolor.fillColor;\n    return hexcolor;\n };\n\n var parseHSL = function (hslstring, opacity) {\n    var hslcolor = {},\n        hslparts = compact(hslstring.split(/hsla?\\(|\\,|\\)|\\%/));\n\n    if (hslparts[3] === undefined) {\n        hslparts[3] = 1;\n    }\n    if (isNaN(parseFloat(opacity, 10))) {\n        opacity = 1;\n    }\n\n    hslcolor.h = parseFloat(hslparts[0], 10);\n    hslcolor.s = parseFloat(hslparts[1], 10);\n    hslcolor.l = parseFloat(hslparts[2], 10);\n    hslcolor.a = parseFloat(opacity * hslparts[3], 10);\n\n    hslcolor.fillColor = 'hsla(' + hslcolor.h + ',' + hslcolor.s + '%,' + hslcolor.l + '%,' + hslcolor.a + ')';\n    hslcolor.strokeColor = 'hsla(' + hslcolor.h + ',' + hslcolor.s + '%,' + parseInt(hslcolor.l / 2, 10) + '%,' + hslcolor.a + ')';\n    hslcolor.hsl = hslcolor.fillColor;\n    return hslcolor;\n };\n\n var parseRGB = function (rgbstring, opacity, darkenfactor) {\n    var rgbcolor = {},\n        rgbparts = compact(rgbstring.split(/rgba?\\(|\\,|\\)/));\n\n    darkenfactor = darkenfactor || 1;\n\n    if (rgbparts[3] === undefined) {\n        rgbparts[3] = 1;\n    }\n\n    if (isNaN(parseFloat(opacity, 10))) {\n        opacity = 1;\n    }\n\n    rgbcolor.r = parseInt(darkenfactor * (parseInt(rgbparts[0], 10) % 256), 10);\n    rgbcolor.g = parseInt(darkenfactor * (parseInt(rgbparts[1], 10) % 256), 10);\n    rgbcolor.b = parseInt(darkenfactor * (parseInt(rgbparts[2], 10) % 256), 10);\n    rgbcolor.a = parseFloat(opacity * rgbparts[3], 10);\n    rgbcolor.fillColor = 'rgba(' + rgbcolor.r + ',' + rgbcolor.g + ',' + rgbcolor.b + ',' + rgbcolor.a + ')';\n    rgbcolor.strokeColor = 'rgba(' + rgbcolor.r / 2 + ',' + rgbcolor.g / 2 + ',' + rgbcolor.b / 2 + ',' + rgbcolor.a + ')';\n    rgbcolor.rgb = rgbcolor.fillColor;\n    return rgbcolor;\n };\n\n var rgbToHSL = function (r, g, b, a) {\n    r = (r % 256) / 255;\n    g = (g % 256) / 255;\n    b = (b % 256) / 255;\n    if (a === undefined) {\n        a = 1;\n    }\n    var max = Math.max(r, g, b),\n        min = Math.min(r, g, b);\n    var h, s, l = (max + min) / 2;\n\n    if (max === min) {\n        h = s = 0; // achromatic\n    } else {\n        var d = max - min;\n        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n        switch (max) {\n        case r:\n            h = (g - b) / d + (g < b ? 6 : 0);\n            break;\n        case g:\n            h = (b - r) / d + 2;\n            break;\n        case b:\n            h = (r - g) / d + 4;\n            break;\n        default:\n            h = 0;\n            break;\n        }\n\n        h /= 6;\n    }\n    var hsl = {\n        h: Math.round(360 * h),\n        s: Math.round(100 * s),\n        l: Math.round(100 * l),\n        a: Math.round(100 * a) / 100\n    };\n\n    hsl.fillColor = 'hsla(' + hsl.h + ',' + hsl.s + '%,' + hsl.l + '%,' + hsl.a + ')';\n\n    return hsl;\n };\n\n var hslToRGB = function (h, s, l, a, darkenfactor) {\n    var r, g, b;\n\n    darkenfactor = darkenfactor || 1;\n    h = parseFloat(h, 10) / 360;\n    s = parseFloat(s, 10) / 100;\n    l = parseFloat(l, 10) / 100;\n    if (a === undefined) {\n        a = 1;\n    }\n    if (s === 0) {\n        r = g = b = l; // achromatic\n    } else {\n        var hue2rgb = function (p, q, t) {\n            if (t < 0) {\n                t += 1;\n            }\n            if (t > 1) {\n                t -= 1;\n            }\n            if (t < 1 / 6) {\n                return p + (q - p) * 6 * t;\n            }\n            if (t < 1 / 2) {\n                return q;\n            }\n            if (t < 2 / 3) {\n                return p + (q - p) * (2 / 3 - t) * 6;\n            }\n            return p;\n        };\n\n        var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n        var p = 2 * l - q;\n        r = hue2rgb(p, q, h + 1 / 3);\n        g = hue2rgb(p, q, h);\n        b = hue2rgb(p, q, h - 1 / 3);\n    }\n\n    if (a === undefined) {\n        a = 1;\n    }\n\n    var rgb = {\n        r: Math.round(r * 255 * darkenfactor),\n        g: Math.round(g * 255 * darkenfactor),\n        b: Math.round(b * 255 * darkenfactor),\n        a: parseFloat(a, 10)\n    };\n\n    rgb.fillColor = 'rgba(' + rgb.r + ',' + rgb.g + ',' + rgb.b + ',' + rgb.a + ')';\n\n    return rgb;\n\n };\n\n var toDecColor = function (stringcolor) {\n    var parsedcolor = {};\n    if (!stringcolor) {\n        parsedcolor.fillColor = 'rgba(100,250,50,0.99)';\n    } else if (stringcolor.indexOf('rgb') !== -1) {\n        parsedcolor = parseRGB(stringcolor);\n    } else if (stringcolor.indexOf('hsl') !== -1) {\n        parsedcolor = parseHSL(stringcolor);\n    } else {\n        parsedcolor = parseHex(stringcolor);\n    }\n\n    return parsedcolor;\n };\n\n var IconObject = function (canvas, markerOpts) {\n    this.url = canvas.toDataURL();\n    this.fillColor = canvas.fillColor;\n    this.markerOpts = markerOpts;\n    Object.assign(this, markerOpts);\n    return this;\n };\n IconObject.prototype.toJSON = function () {\n    return {\n        url: null,\n        markerOpts: this.markerOpts\n    };\n };\n\n var createTextMarker = function (theoptions) {\n\n    var generateCanvas = function (options) {\n        var canvas = document.createElement(\"canvas\");\n        var ancho = 30,\n            alto = 40;\n        canvas.width = ancho + 18;\n        canvas.height = alto;\n        var x = canvas.width / 2,\n            y = canvas.height - 2,\n            radius = ancho / 2,\n            angulo = 0.6;\n\n        var font = \"'\" + options.font + \"'\" || 'Arial';\n        var fontsize = options.fontsize || 11;\n\n        var context = canvas.getContext(\"2d\");\n\n        context.clearRect(0, 0, canvas.width, canvas.height);\n\n        var radius0 = 2 * radius,\n            cx = x + 0.95 * radius0,\n            cy = y + 0.45 * radius0;\n\n        var grad = context.createLinearGradient(0, 0, 0, canvas.height),\n            color0, color1;\n        if (options.index !== undefined && options.count > 0) {\n            color0 = getColor(options.index, options.count);\n            color1 = getColor1();\n        } else {\n            var deccolor = toDecColor(options.color);\n            color0 = deccolor.fillColor;\n            color1 = darken(deccolor).fillColor;\n        }\n\n        grad.addColorStop(0, color0);\n        grad.addColorStop(1, color1);\n\n        context.fillStyle = grad;\n        context.strokeStyle = 'rgba(200,200,200,0.7)';\n\n        context.beginPath();\n\n        //arco izquierdo\n        context.arc(cx - 1, cy, radius0, 9 * Math.PI / 8, -6 * Math.PI / 8, false);\n\n        // arco superior\n        context.arc(x, (y - 7) / 2, radius, angulo, Math.PI - angulo, true);\n\n        //arco derecho\n        context.arc(2 * x - cx + 1, cy, radius0, -0.95 * Math.PI / 3, -Math.PI / 8, false);\n        context.fill();\n        context.stroke();\n\n        context.beginPath();\n        context.arc(x, 0.40 * y, 2 * radius / 3, 0, 2 * Math.PI, false);\n        context.fillStyle = 'white';\n        context.fill();\n\n        context.beginPath();\n\n        // Render Label\n        //context.font = \"11pt Arial\";\n        context.font = fontsize + \"pt \" + font;\n        context.textBaseline = \"top\";\n\n        var textWidth = context.measureText(options.label);\n\n        if (textWidth.width > ancho || String(options.label).length > 3) {\n            context.rect(x - 2 - textWidth.width / 2, y - 30, x - 2 + textWidth.width / 2, y - 23);\n            context.fillStyle = '#F7F0F0';\n            context.fill();\n            context.stroke();\n        }\n\n        context.fillStyle = \"black\";\n        context.strokeStyle = \"black\";\n        // centre the text.\n        context.fillText(options.label, 1 + Math.floor((canvas.width / 2) - (textWidth.width / 2)), 8);\n\n        return canvas;\n\n    };\n    theoptions.scale = theoptions.scale || 0.75;\n    var markerCanvas = generateCanvas(theoptions),\n        markerOpts = {};\n\n    theoptions.type = 'textmarker';\n\n    Object.assign(markerOpts, theoptions);\n\n    if (window && window.google && window.google.maps) {\n        Object.assign(markerOpts, {\n            size: new google.maps.Size(48, 40),\n            origin: new google.maps.Point(0, 0),\n            anchor: new google.maps.Point(24 * theoptions.scale, 40 * theoptions.scale),\n            scaledSize: new google.maps.Size(48 * theoptions.scale, 40 * theoptions.scale)\n        });\n    }\n    var iconObj = new IconObject(markerCanvas, markerOpts);\n\n    return iconObj;\n };\n\n var createClusterIcon = function (theoptions) {\n\n    var generateClusterCanvas = function (options) {\n        var canvas = options.canvas || document.createElement(\"canvas\"),\n            anchorX = 27,\n            anchorY = 53,\n            radius = (anchorX - 9),\n            angulo = 1.1,\n            font = options.font || 'fontello',\n            fontsize = options.fontsize || 14,\n            context = canvas.getContext(\"2d\"),\n            grad = context.createLinearGradient(0, 0, 0, anchorY),\n            color0, color1;\n\n        canvas.width = anchorX * 2;\n        canvas.height = anchorY + 1;\n\n        if (options.index !== undefined && options.count > 0) {\n            color0 = getColor(options.index, options.count);\n            color1 = getColor1();\n        } else {\n            var deccolor = toDecColor(options.color);\n            color0 = deccolor.fillColor;\n            color1 = darken(deccolor).fillColor;\n        }\n\n        context.clearRect(0, 0, canvas.width, canvas.height);\n        context.moveTo(anchorX, anchorY);\n\n        var labelvalue = parseInt(options.label);\n        if (labelvalue < 10) {\n            color1 = 'orange';\n            fontsize = 14;\n        } else if (labelvalue < 30) {\n            color1 = 'red';\n            fontsize = 15;\n        } else {\n            color1 = 'purple';\n            fontsize = 16;\n        }\n        if (labelvalue > 99) {\n            radius = radius + 3;\n            context.setLineDash([5, 5]);\n            context.beginPath();\n            context.arc(anchorX, 2 + (0.50 * anchorY), (radius + 7), 0, 2 * Math.PI, false);\n            context.fillStyle = 'transparent';\n            context.strokeStyle = color1;\n            context.lineWidth = 2;\n            context.fill();\n            context.stroke();\n        }\n\n        context.setLineDash([5, 5]);\n        context.beginPath();\n        context.arc(anchorX, 2 + (0.50 * anchorY), (radius + 2), 0, 2 * Math.PI, false);\n        context.fillStyle = 'transparent';\n        context.strokeStyle = color1;\n        context.lineWidth = 2;\n        context.fill();\n        context.stroke();\n\n        // Círculo blanco\n        context.setLineDash([5, 0]);\n        context.beginPath();\n        context.arc(anchorX, 2 + (0.50 * anchorY), (radius - 3), 0, 2 * Math.PI, false);\n        context.fillStyle = 'white';\n        context.strokeStyle = color1;\n        context.lineWidth = 4;\n        context.fill();\n        context.stroke();\n\n        context.beginPath();\n\n        context.font = 'normal normal normal ' + fontsize + 'px ' + font;\n        console.log('context font', context.font);\n        context.fillStyle = '#333';\n        context.textBaseline = \"top\";\n        var textWidth = context.measureText(options.label);\n\n        // centre the text.\n        context.fillText(options.label, Math.floor((canvas.width / 2) - (textWidth.width / 2)), 1 + Math.floor(canvas.height / 2 - fontsize / 2));\n\n        return canvas;\n\n    };\n    theoptions.scale = theoptions.scale || 1;\n    var markerCanvas = generateClusterCanvas(theoptions),\n        markerOpts = {},\n        scale = theoptions.scale;\n\n    Object.assign(markerOpts, theoptions);\n\n    if (window && window.google && window.google.maps) {\n        Object.assign(markerOpts, {\n            size: new google.maps.Size(54, 48),\n            origin: new google.maps.Point(0, 0),\n            anchor: new google.maps.Point(27 * scale, 24 * scale),\n            scaledSize: new google.maps.Size(54 * scale, 48 * scale)\n        });\n    }\n\n    var iconObj = new IconObject(markerCanvas, markerOpts);\n\n    return iconObj;\n };\n\n var createFatMarkerIcon = function (theoptions) {\n\n    var generateFatCanvas = function (options) {\n        var canvas = options.canvas || document.createElement(\"canvas\"),\n            anchorX = 27,\n            anchorY = 53,\n            radius = (anchorX - 9),\n            angulo = 1.1,\n            font = options.font || 'fontello',\n            fontsize = options.fontsize || 14,\n            context = canvas.getContext(\"2d\"),\n            grad = context.createLinearGradient(0, 0, 0, anchorY),\n            color0, color1;\n\n        canvas.width = anchorX * 2;\n        canvas.height = anchorY + 1;\n\n        if (options.index !== undefined && options.count > 0) {\n            color0 = getColor(options.index, options.count);\n            color1 = getColor1();\n        } else {\n            var deccolor = toDecColor(options.color);\n            color0 = deccolor.fillColor;\n            color1 = darken(deccolor).fillColor;\n        }\n\n        context.clearRect(0, 0, canvas.width, canvas.height);\n\n        grad.addColorStop(0, color0);\n        grad.addColorStop(1, color1);\n\n        context.fillStyle = grad;\n        context.strokeStyle = color1;\n        context.beginPath();\n\n        context.moveTo(anchorX, anchorY);\n\n        // arco superior\n        context.arc(anchorX, 2 + (0.50 * anchorY), radius, angulo, Math.PI - angulo, true);\n\n        //punta inferior\n        context.lineTo(anchorX, anchorY);\n\n        context.fill();\n        context.stroke();\n\n        // Círculo blanco\n        context.beginPath();\n        context.arc(anchorX, 2 + (0.50 * anchorY), (radius - 3), 0, 2 * Math.PI, false);\n        context.fillStyle = 'white';\n        context.fill();\n\n        context.beginPath();\n\n        context.font = 'normal normal normal ' + fontsize + 'px ' + font;\n        //console.log('context font', context.font);\n        context.fillStyle = color1;\n        context.textBaseline = \"top\";\n        var textWidth = context.measureText(options.unicodelabel);\n\n        // centre the text.\n        context.fillText(options.unicodelabel, Math.floor((canvas.width / 2) - (textWidth.width / 2)), 1 + Math.floor(canvas.height / 2 - fontsize / 2));\n        canvas.fillColor = color0;\n        return canvas;\n\n    };\n    var scale = theoptions.scale || 1,\n        markerCanvas = generateFatCanvas(theoptions),\n        markerOpts = {};\n\n    theoptions.type = 'fatmarker';\n\n    Object.assign(markerOpts, theoptions);\n\n    if (window && window.google && window.google.maps) {\n        Object.assign(markerOpts, {\n            size: new google.maps.Size(54, 48),\n            origin: new google.maps.Point(0, 0),\n            anchor: new google.maps.Point(21 * scale, 36 * scale),\n            scaledSize: new google.maps.Size(42 * scale, 36 * scale),\n            scale: scale\n        });\n    }\n    var iconObj = new IconObject(markerCanvas, markerOpts);\n    return iconObj;\n };\n\n var createTransparentMarkerIcon = function (theoptions) {\n\n    var generateTransparentCanvas = function (options) {\n        var canvas = options.canvas || document.createElement(\"canvas\"),\n            context = canvas.getContext(\"2d\"),\n            font = options.font || 'fontello',\n            fontsize = options.fontsize || 26,\n            color0, color1;\n\n        canvas.width = 54;\n        canvas.height = 48;\n        context.clearRect(0, 0, canvas.width, canvas.height);\n\n        /*context.rect(1, 1, canvas.width - 2, canvas.height - 2);\n        context.lineWidth = 1;\n        context.strokeStyle = 'black';\n        context.stroke();*/\n\n        if (options.index !== undefined && options.count > 0) {\n            color0 = getColor(options.index, options.count);\n            color1 = getColor1();\n        } else {\n            var deccolor = toDecColor(options.color);\n            color0 = deccolor.fillColor;\n            color1 = darken(deccolor).fillColor;\n        }\n\n        context.beginPath();\n\n        if (options.shadow) {\n\n            context.font = 'normal normal normal ' + fontsize + 'px ' + font;\n\n            context.textBaseline = \"top\";\n            var textWidth = context.measureText(options.unicodelabel),\n                text_x = Math.floor((canvas.width / 2) - (textWidth.width / 2));\n\n            context.shadowOffsetX = -2;\n            context.shadowOffsetY = -2;\n            context.shadowBlur = 0;\n\n            context.fillStyle = '#FFFFFF';\n            context.shadowColor = '#666666';\n\n            context.fillText(options.unicodelabel, text_x - 4, 2);\n            context.fillText(options.unicodelabel, text_x, 5);\n            context.fillStyle = color0;\n            context.fillText(options.unicodelabel, text_x + 4, 8);\n\n            context.strokeStyle = '#FFFFFF';\n            context.strokeText(options.unicodelabel, text_x + 4, 8);\n\n        } else {\n\n            context.font = 'normal normal normal ' + (fontsize - 3) + 'px ' + font;\n\n            context.textBaseline = \"top\";\n            var textmetric = context.measureText(options.unicodelabel),\n                text_x = Math.floor((canvas.width / 2) - (textmetric.width / 2));\n\n            //console.debug('textmetric', textmetric);\n\n            context.shadowOffsetX = 2;\n            context.shadowOffsetY = 2;\n            context.shadowBlur = 0;\n            context.shadowColor = '#FFFFFF';\n            context.fillStyle = color0;\n            context.fillText(options.unicodelabel, text_x + 1, 6);\n\n            context.shadowOffsetX = 2;\n            context.shadowOffsetY = 2;\n            context.shadowBlur = 1;\n            context.shadowColor = '#FFFFFF';\n            context.strokeStyle = color1;\n            context.strokeText(options.unicodelabel, text_x + 1, 6);\n\n        }\n\n        canvas.fillColor = color0;\n\n        return canvas;\n\n    };\n\n    theoptions.scale = theoptions.scale || 1;\n    theoptions.fontsize = theoptions.fontsize || 26;\n\n    var markerCanvas = generateTransparentCanvas(theoptions),\n        markerOpts = {};\n\n    var scale = theoptions.scale;\n    /*if (theoptions.shadow) {\n        scale = 0.9 * scale;\n    }*/\n    theoptions.type = 'transparent';\n\n    Object.assign(markerOpts, theoptions);\n\n    if (window.google && window.google.maps) {\n        Object.assign(markerOpts, {\n            size: new google.maps.Size(54 * scale, 48 * scale),\n            origin: new google.maps.Point(0, 0),\n            anchor: new google.maps.Point(27 * scale, 24 * scale),\n            scaledSize: new google.maps.Size(54 * scale, 48 * scale)\n        });\n    }\n    var iconObj = new IconObject(markerCanvas, markerOpts);\n\n    return iconObj;\n };\n\n\n\n\n var MarkerFactory = {\n    createTransparentMarkerIcon: createTransparentMarkerIcon,\n    createFatMarkerIcon: createFatMarkerIcon,\n    createTextMarker: createTextMarker,\n    /**\n     * Receives a color string rgb(a), hsl(a) or hex, returns its components\n     * in rgba and hsla, with optional transparency\n     * plus a darkened version (default is half of each RGB component) and a \n     *\n     * @param {string} somecolor          - A color string in  rgb(a), hsl(a) or hex format\n     * @param {Number} [opacity=1]        - Opacity to apply to the color\n     * @param {Number} [darkenfactor=1] - How much darker should the resulting color be\n     * \n     * @return     {Object}  input color parsed and modified as requested\n     */\n    parseColorString: function (somecolor, opacity, darkenfactor) {\n        var parsedcolor = {\n                original: somecolor\n            },\n            hsl, rgb;\n\n        darkenfactor = darkenfactor || 1;\n        opacity = opacity || 1;\n\n        if (somecolor.indexOf('hsl') !== -1) {\n            hsl = parseHSL(somecolor, opacity);\n            rgb = hslToRGB(hsl.h, hsl.s, hsl.l, hsl.a, darkenfactor);\n\n        } else {\n            if (somecolor.indexOf('rgb') !== -1) {\n                rgb = parseRGB(somecolor, opacity, darkenfactor);\n            } else {\n                rgb = parseHex(somecolor, opacity, darkenfactor);\n            }\n\n\n        }\n\n\n        hsl = rgbToHSL(rgb.r, rgb.g, rgb.b, rgb.a);\n\n\n        parsedcolor.hsl = {\n            h: hsl.h,\n            s: hsl.s,\n            l: hsl.l,\n            a: hsl.a\n        };\n        parsedcolor.rgb = {\n            r: rgb.r,\n            g: rgb.g,\n            b: rgb.b,\n            a: rgb.a\n        };\n\n\n\n        parsedcolor.fillColor = rgb.fillColor;\n        parsedcolor.rgba = rgb.fillColor;\n        parsedcolor.hsla = hsl.fillColor;\n        parsedcolor.strokeColor = rgb.strokeColor;\n        parsedcolor.hex = ['#', padHex(rgb.r.toString(16)), padHex(rgb.g.toString(16)), padHex(rgb.b.toString(16))].join('');\n        return parsedcolor;\n    },\n    /**\n     * Generates an google maps marker (or an image as dataurl from the given options)\n     *\n     * @param      {Object}  options  The options\n     * @return     {Object}  { description_of_the_return_value }\n     */\n    autoIcon: function (options) {\n\n        if (typeof (options) !== 'object') {\n            console.warn('autoIcon expects an object as its only parameter');\n            return null;\n        }\n\n        options.label = String(options.label || 'A');\n        options.color = options.color || '#FF0000';\n\n        // unless explicitly set to false, the icon doesn't have a marker-like wrapper\n        if (options.transparent_background === undefined) {\n            options.transparent_background = true;\n        }\n\n        if (options.label.length === 4 || options.label.substring(0, 2) === '0x') {\n\n\n            options.font = options.font || 'fontello';\n            options.label = (options.label || 'e836').slice(-4);\n            options.unicodelabel = String.fromCharCode('0x' + options.label);\n            options.scale = options.scale || 1;\n\n            if (options.transparent_background) {\n                console.log('createTransparentMarkerIcon', options.font);\n                return MarkerFactory.createTransparentMarkerIcon(options);\n            } else {\n                console.log('createFatMarkerIcon', options.font);\n                return MarkerFactory.createFatMarkerIcon(options);\n            }\n        } else if (options.shadow) {\n            return createClusterIcon(options);\n        } else {\n            options.scale = options.scale || 0.75;\n            options.label = String(options.label || 'A');\n            options.fontsize = options.fontsize || 11;\n            options.font = options.font || 'Arial';\n            // This is text I should print literally\n            return MarkerFactory.createTextMarker(options);\n        }\n\n    }\n };\n\nexport { MarkerFactory };\nexport default MarkerFactory;\n","/** @license\n *\n *  Copyright (C) 2012 K. Arthur Endsley (kaendsle@mtu.edu)\n *  Michigan Tech Research Institute (MTRI)\n *  3600 Green Court, Suite 100, Ann Arbor, MI, 48105\n *\n *  This program is free software: you can redistribute it and/or modify\n *  it under the terms of the GNU General Public License as published by\n *  the Free Software Foundation, either version 3 of the License, or\n *  (at your option) any later version.\n *\n *  This program is distributed in the hope that it will be useful,\n *  but WITHOUT ANY WARRANTY; without even the implied warranty of\n *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n *  GNU General Public License for more details.\n *\n *  You should have received a copy of the GNU General Public License\n *  along with this program.  If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport gmaps from 'gmaps';\n\ngmaps.comment = 'shut up rollup'; // just to stop rollup from bugging me\nvar beginsWith, endsWith;\n\n/**\n * @desc The Wkt namespace.\n * @property    {String}    delimiter   - The default delimiter for separating components of atomic geometry (coordinates)\n * @namespace\n * @global\n */\nvar Wkt = function (obj) {\n\tif (obj instanceof Wkt) return obj;\n\tif (!(this instanceof Wkt)) return new Wkt(obj);\n\tthis._wrapped = obj;\n};\n\n/**\n * Returns true if the substring is found at the beginning of the string.\n * @param   str {String}    The String to search\n * @param   sub {String}    The substring of interest\n * @return      {Boolean}\n * @private\n */\nbeginsWith = function (str, sub) {\n\treturn str.substring(0, sub.length) === sub;\n};\n\n/**\n * Returns true if the substring is found at the end of the string.\n * @param   str {String}    The String to search\n * @param   sub {String}    The substring of interest\n * @return      {Boolean}\n * @private\n */\nendsWith = function (str, sub) {\n\treturn str.substring(str.length - sub.length) === sub;\n};\n\n/**\n * The default delimiter for separating components of atomic geometry (coordinates)\n * @ignore\n */\nWkt.delimiter = ' ';\n\n/**\n * Determines whether or not the passed Object is an Array.\n * @param   obj {Object}    The Object in question\n * @return      {Boolean}\n * @member Wkt.isArray\n * @method\n */\nWkt.isArray = function (obj) {\n\treturn !!(obj && obj.constructor === Array);\n};\n\n/**\n * Removes given character String(s) from a String.\n * @param   str {String}    The String to search\n * @param   sub {String}    The String character(s) to trim\n * @return      {String}    The trimmed string\n * @member Wkt.trim\n * @method\n */\nWkt.trim = function (str, sub) {\n\tsub = sub || ' '; // Defaults to trimming spaces\n\t// Trim beginning spaces\n\twhile (beginsWith(str, sub)) {\n\t\tstr = str.substring(1);\n\t}\n\t// Trim ending spaces\n\twhile (endsWith(str, sub)) {\n\t\tstr = str.substring(0, str.length - 1);\n\t}\n\treturn str;\n};\n\n/**\n * An object for reading WKT strings and writing geographic features\n * @constructor this.Wkt.Wkt\n * @param   initializer {String}    An optional WKT string for immediate read\n * @property            {Array}     components      - Holder for atomic geometry objects (internal representation of geometric components)\n * @property            {String}    delimiter       - The default delimiter for separating components of atomic geometry (coordinates)\n * @property            {Object}    regExes         - Some regular expressions copied from OpenLayers.Format.WKT.js\n * @property            {String}    type            - The Well-Known Text name (e.g. 'point') of the geometry\n * @property            {Boolean}   wrapVerticies   - True to wrap vertices in MULTIPOINT geometries; If true: MULTIPOINT((30 10),(10 30),(40 40)); If false: MULTIPOINT(30 10,10 30,40 40)\n * @return              {this.Wkt.Wkt}\n * @memberof Wkt\n */\nWkt.Wkt = function (initializer) {\n\n\t/**\n\t * The default delimiter between X and Y coordinates.\n\t * @ignore\n\t */\n\tthis.delimiter = Wkt.delimiter || ' ';\n\n\t/**\n\t * Configuration parameter for controlling how Wicket seralizes\n\t * MULTIPOINT strings. Examples; both are valid WKT:\n\t * If true: MULTIPOINT((30 10),(10 30),(40 40))\n\t * If false: MULTIPOINT(30 10,10 30,40 40)\n\t * @ignore\n\t */\n\tthis.wrapVertices = true;\n\n\t/**\n\t * Some regular expressions copied from OpenLayers.Format.WKT.js\n\t * @ignore\n\t */\n\tthis.regExes = {\n\t\t'typeStr': /^\\s*(\\w+)\\s*\\(\\s*(.*)\\s*\\)\\s*$/,\n\t\t'spaces': /\\s+|\\+/, // Matches the '+' or the empty space\n\t\t'numeric': /-*\\d+(\\.*\\d+)?/,\n\t\t'comma': /\\s*,\\s*/,\n\t\t'parenComma': /\\)\\s*,\\s*\\(/,\n\t\t'coord': /-*\\d+\\.*\\d+ -*\\d+\\.*\\d+/, // e.g. \"24 -14\"\n\t\t'doubleParenComma': /\\)\\s*\\)\\s*,\\s*\\(\\s*\\(/,\n\t\t'trimParens': /^\\s*\\(?(.*?)\\)?\\s*$/,\n\t\t'ogcTypes': /^(multi)?(point|line|polygon|box)?(string)?$/i, // Captures e.g. \"Multi\",\"Line\",\"String\"\n\t\t'crudeJson': /^{.*\"(type|coordinates|geometries|features)\":.*}$/ // Attempts to recognize JSON strings\n\t};\n\n\t/**\n\t * The internal representation of geometry--the \"components\" of geometry.\n\t * @ignore\n\t */\n\tthis.components = undefined;\n\n\t// An initial WKT string may be provided\n\tif (initializer && typeof initializer === 'string') {\n\t\tthis.read(initializer);\n\t} else if (initializer && typeof initializer !== undefined) {\n\t\tthis.fromObject(initializer);\n\t}\n\n};\n\n/**\n * Returns true if the internal geometry is a collection of geometries.\n * @return  {Boolean}   Returns true when it is a collection\n * @memberof this.Wkt.Wkt\n * @method\n */\nWkt.Wkt.prototype.isCollection = function () {\n\tswitch (this.type.slice(0, 5)) {\n\tcase 'multi':\n\t\t// Trivial; any multi-geometry is a collection\n\t\treturn true;\n\tcase 'polyg':\n\t\t// Polygons with holes are \"collections\" of rings\n\t\treturn true;\n\tdefault:\n\t\t// Any other geometry is not a collection\n\t\treturn false;\n\t}\n};\n\n/**\n * Compares two x,y coordinates for equality.\n * @param   a   {Object}    An object with x and y properties\n * @param   b   {Object}    An object with x and y properties\n * @return      {Boolean}\n * @memberof this.Wkt.Wkt\n * @method\n */\nWkt.Wkt.prototype.sameCoords = function (a, b) {\n\treturn (a.x === b.x && a.y === b.y);\n};\n\n/**\n * Sets internal geometry (components) from framework geometry (e.g.\n * Google Polygon objects or google.maps.Polygon).\n * @param   obj {Object}    The framework-dependent geometry representation\n * @return      {this.Wkt.Wkt}   The object itself\n * @memberof this.Wkt.Wkt\n * @method\n */\nWkt.Wkt.prototype.fromObject = function (obj) {\n\tvar result;\n\n\tif (obj.hasOwnProperty('type') && obj.hasOwnProperty('coordinates')) {\n\t\tresult = this.fromJson(obj);\n\t} else {\n\t\tresult = this.deconstruct.call(this, obj);\n\t}\n\n\tthis.components = result.components;\n\tthis.isRectangle = result.isRectangle || false;\n\tthis.type = result.type;\n\treturn this;\n};\n\n/**\n * Creates external geometry objects based on a plug-in framework's\n * construction methods and available geometry classes.\n * @param   config  {Object}    An optional framework-dependent properties specification\n * @return          {Object}    The framework-dependent geometry representation\n * @memberof this.Wkt.Wkt\n * @method\n */\nWkt.Wkt.prototype.toObject = function (config) {\n\tvar obj = this.construct[this.type].call(this, config);\n\t// Don't assign the \"properties\" property to an Array\n\tif (typeof obj === 'object' && !Wkt.isArray(obj)) {\n\t\tobj.properties = this.properties;\n\t}\n\treturn obj;\n};\n\n/**\n * Returns the WKT string representation; the same as the write() method.\n * @memberof this.Wkt.Wkt\n * @method\n */\nWkt.Wkt.prototype.toString = function (config) {\n\treturn this.write();\n};\n\n/**\n * Parses a JSON representation as an Object.\n * @param\tobj\t{Object}\tAn Object with the GeoJSON schema\n * @return\t{this.Wkt.Wkt}\tThe object itself\n * @memberof this.Wkt.Wkt\n * @method\n */\nWkt.Wkt.prototype.fromJson = function (obj) {\n\tvar i, j, k, coords, iring, oring;\n\n\tthis.type = obj.type.toLowerCase();\n\tthis.components = [];\n\tif (obj.hasOwnProperty('geometry')) { //Feature\n\t\tthis.fromJson(obj.geometry);\n\t\tthis.properties = obj.properties;\n\t\treturn this;\n\t}\n\tcoords = obj.coordinates;\n\n\tif (!Wkt.isArray(coords[0])) { // Point\n\t\tthis.components.push({\n\t\t\tx: coords[0],\n\t\t\ty: coords[1]\n\t\t});\n\n\t} else {\n\n\t\tfor (i in coords) {\n\t\t\tif (coords.hasOwnProperty(i)) {\n\n\t\t\t\tif (!Wkt.isArray(coords[i][0])) { // LineString\n\n\t\t\t\t\tif (this.type === 'multipoint') { // MultiPoint\n\t\t\t\t\t\tthis.components.push([{\n\t\t\t\t\t\t\tx: coords[i][0],\n\t\t\t\t\t\t\ty: coords[i][1]\n\t\t\t\t\t\t}]);\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.components.push({\n\t\t\t\t\t\t\tx: coords[i][0],\n\t\t\t\t\t\t\ty: coords[i][1]\n\t\t\t\t\t\t});\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\toring = [];\n\t\t\t\t\tfor (j in coords[i]) {\n\t\t\t\t\t\tif (coords[i].hasOwnProperty(j)) {\n\n\t\t\t\t\t\t\tif (!Wkt.isArray(coords[i][j][0])) {\n\t\t\t\t\t\t\t\toring.push({\n\t\t\t\t\t\t\t\t\tx: coords[i][j][0],\n\t\t\t\t\t\t\t\t\ty: coords[i][j][1]\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tiring = [];\n\t\t\t\t\t\t\t\tfor (k in coords[i][j]) {\n\t\t\t\t\t\t\t\t\tif (coords[i][j].hasOwnProperty(k)) {\n\n\t\t\t\t\t\t\t\t\t\tiring.push({\n\t\t\t\t\t\t\t\t\t\t\tx: coords[i][j][k][0],\n\t\t\t\t\t\t\t\t\t\t\ty: coords[i][j][k][1]\n\t\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\toring.push(iring);\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.components.push(oring);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t}\n\n\treturn this;\n};\n\n/**\n * Creates a JSON representation, with the GeoJSON schema, of the geometry.\n * @return    {Object}    The corresponding GeoJSON representation\n * @memberof this.Wkt.Wkt\n * @method\n */\nWkt.Wkt.prototype.toJson = function () {\n\tvar cs, json, i, j, k, ring, rings;\n\n\tcs = this.components;\n\tjson = {\n\t\tcoordinates: [],\n\t\ttype: (function () {\n\t\t\tvar i, type, s;\n\n\t\t\ttype = this.regExes.ogcTypes.exec(this.type).slice(1);\n\t\t\ts = [];\n\n\t\t\tfor (i in type) {\n\t\t\t\tif (type.hasOwnProperty(i)) {\n\t\t\t\t\tif (type[i] !== undefined) {\n\t\t\t\t\t\ts.push(type[i].toLowerCase().slice(0, 1).toUpperCase() + type[i].toLowerCase().slice(1));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn s;\n\t\t}.call(this)).join('')\n\t}\n\n\t// Wkt BOX type gets a special bbox property in GeoJSON\n\tif (this.type.toLowerCase() === 'box') {\n\t\tjson.type = 'Polygon';\n\t\tjson.bbox = [];\n\n\t\tfor (i in cs) {\n\t\t\tif (cs.hasOwnProperty(i)) {\n\t\t\t\tjson.bbox = json.bbox.concat([cs[i].x, cs[i].y]);\n\t\t\t}\n\t\t}\n\n\t\tjson.coordinates = [\n\t\t\t[\n\t\t\t\t[cs[0].x, cs[0].y],\n\t\t\t\t[cs[0].x, cs[1].y],\n\t\t\t\t[cs[1].x, cs[1].y],\n\t\t\t\t[cs[1].x, cs[0].y],\n\t\t\t\t[cs[0].x, cs[0].y]\n\t\t\t]\n\t\t];\n\n\t\treturn json;\n\t}\n\n\t// For the coordinates of most simple features\n\tfor (i in cs) {\n\t\tif (cs.hasOwnProperty(i)) {\n\n\t\t\t// For those nested structures\n\t\t\tif (Wkt.isArray(cs[i])) {\n\t\t\t\trings = [];\n\n\t\t\t\tfor (j in cs[i]) {\n\t\t\t\t\tif (cs[i].hasOwnProperty(j)) {\n\n\t\t\t\t\t\tif (Wkt.isArray(cs[i][j])) { // MULTIPOLYGONS\n\t\t\t\t\t\t\tring = [];\n\n\t\t\t\t\t\t\tfor (k in cs[i][j]) {\n\t\t\t\t\t\t\t\tif (cs[i][j].hasOwnProperty(k)) {\n\t\t\t\t\t\t\t\t\tring.push([cs[i][j][k].x, cs[i][j][k].y]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\trings.push(ring);\n\n\t\t\t\t\t\t} else { // POLYGONS and MULTILINESTRINGS\n\n\t\t\t\t\t\t\tif (cs[i].length > 1) {\n\t\t\t\t\t\t\t\trings.push([cs[i][j].x, cs[i][j].y]);\n\n\t\t\t\t\t\t\t} else { // MULTIPOINTS\n\t\t\t\t\t\t\t\trings = rings.concat([cs[i][j].x, cs[i][j].y]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tjson.coordinates.push(rings);\n\n\t\t\t} else {\n\t\t\t\tif (cs.length > 1) { // For LINESTRING type\n\t\t\t\t\tjson.coordinates.push([cs[i].x, cs[i].y]);\n\n\t\t\t\t} else { // For POINT type\n\t\t\t\t\tjson.coordinates = json.coordinates.concat([cs[i].x, cs[i].y]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\t}\n\n\treturn json;\n};\n\n/**\n * Absorbs the geometry of another this.Wkt.Wkt instance, merging it with its own,\n * creating a collection (MULTI-geometry) based on their types, which must agree.\n * For example, creates a MULTIPOLYGON from a POLYGON type merged with another\n * POLYGON type, or adds a POLYGON instance to a MULTIPOLYGON instance.\n * @param   wkt {String}    A Wkt.Wkt object\n * @return\t{this.Wkt.Wkt}\tThe object itself\n * @memberof this.Wkt.Wkt\n * @method\n */\nWkt.Wkt.prototype.merge = function (wkt) {\n\tvar prefix = this.type.slice(0, 5);\n\n\tif (this.type !== wkt.type) {\n\t\tif (this.type.slice(5, this.type.length) !== wkt.type) {\n\t\t\tthrow TypeError('The input geometry types must agree or the calling this.Wkt.Wkt instance must be a multigeometry of the other');\n\t\t}\n\t}\n\n\tswitch (prefix) {\n\n\tcase 'point':\n\t\tthis.components = [this.components.concat(wkt.components)];\n\t\tbreak;\n\n\tcase 'multi':\n\t\tthis.components = this.components.concat((wkt.type.slice(0, 5) === 'multi') ? wkt.components : [wkt.components]);\n\t\tbreak;\n\n\tdefault:\n\t\tthis.components = [\n\t\t\tthis.components,\n\t\t\twkt.components\n\t\t];\n\t\tbreak;\n\n\t}\n\n\tif (prefix !== 'multi') {\n\t\tthis.type = 'multi' + this.type;\n\t}\n\treturn this;\n};\n\n/**\n * Reads a WKT string, validating and incorporating it.\n * @param   str {String}    A WKT or GeoJSON string\n * @return\t{this.Wkt.Wkt}\tThe object itself\n * @memberof this.Wkt.Wkt\n * @method\n */\nWkt.Wkt.prototype.read = function (str) {\n\tvar matches;\n\tmatches = this.regExes.typeStr.exec(str);\n\tif (matches) {\n\t\tthis.type = matches[1].toLowerCase();\n\t\tthis.base = matches[2];\n\t\tif (this.ingest[this.type]) {\n\t\t\tthis.components = this.ingest[this.type].apply(this, [this.base]);\n\t\t}\n\n\t} else {\n\t\tif (this.regExes.crudeJson.test(str)) {\n\t\t\tif (typeof JSON === 'object' && typeof JSON.parse === 'function') {\n\t\t\t\tthis.fromJson(JSON.parse(str));\n\n\t\t\t} else {\n\t\t\t\tconsole.log('JSON.parse() is not available; cannot parse GeoJSON strings');\n\t\t\t\tthrow {\n\t\t\t\t\tname: 'JSONError',\n\t\t\t\t\tmessage: 'JSON.parse() is not available; cannot parse GeoJSON strings'\n\t\t\t\t};\n\t\t\t}\n\n\t\t} else {\n\t\t\tconsole.log('Invalid WKT string provided to read()');\n\t\t\tthrow {\n\t\t\t\tname: 'WKTError',\n\t\t\t\tmessage: 'Invalid WKT string provided to read()'\n\t\t\t};\n\t\t}\n\t}\n\n\treturn this;\n}; // eo readWkt\n\n/**\n * Writes a WKT string.\n * @param   components  {Array}     An Array of internal geometry objects\n * @return              {String}    The corresponding WKT representation\n * @memberof this.Wkt.Wkt\n * @method\n */\nWkt.Wkt.prototype.write = function (components) {\n\tvar i, pieces, data;\n\n\tcomponents = components || this.components;\n\n\tpieces = [];\n\n\tpieces.push(this.type.toUpperCase() + '(');\n\n\tfor (i = 0; i < components.length; i += 1) {\n\t\tif (this.isCollection() && i > 0) {\n\t\t\tpieces.push(',');\n\t\t}\n\n\t\t// There should be an extract function for the named type\n\t\tif (!this.extract[this.type]) {\n\t\t\treturn null;\n\t\t}\n\n\t\tdata = this.extract[this.type].apply(this, [components[i]]);\n\t\tif (this.isCollection() && this.type !== 'multipoint') {\n\t\t\tpieces.push('(' + data + ')');\n\n\t\t} else {\n\t\t\tpieces.push(data);\n\n\t\t\t// If not at the end of the components, add a comma\n\t\t\tif (i !== (components.length - 1) && this.type !== 'multipoint') {\n\t\t\t\tpieces.push(',');\n\t\t\t}\n\n\t\t}\n\t}\n\n\tpieces.push(')');\n\n\treturn pieces.join('');\n};\n\n/**\n * This object contains functions as property names that extract WKT\n * strings from the internal representation.\n * @memberof this.Wkt.Wkt\n * @namespace this.Wkt.Wkt.extract\n * @instance\n */\nWkt.Wkt.prototype.extract = {\n\t/**\n\t * Return a WKT string representing atomic (point) geometry\n\t * @param   point   {Object}    An object with x and y properties\n\t * @return          {String}    The WKT representation\n\t * @memberof this.Wkt.Wkt.extract\n\t * @instance\n\t */\n\tpoint: function (point) {\n\t\treturn String(point.x) + this.delimiter + String(point.y);\n\t},\n\n\t/**\n\t * Return a WKT string representing multiple atoms (points)\n\t * @param   multipoint  {Array}     Multiple x-and-y objects\n\t * @return              {String}    The WKT representation\n\t * @memberof this.Wkt.Wkt.extract\n\t * @instance\n\t */\n\tmultipoint: function (multipoint) {\n\t\tvar i, parts = [],\n\t\t\ts;\n\n\t\tfor (i = 0; i < multipoint.length; i += 1) {\n\t\t\ts = this.extract.point.apply(this, [multipoint[i]]);\n\n\t\t\tif (this.wrapVertices) {\n\t\t\t\ts = '(' + s + ')';\n\t\t\t}\n\n\t\t\tparts.push(s);\n\t\t}\n\n\t\treturn parts.join(',');\n\t},\n\n\t/**\n\t * Return a WKT string representing a chain (linestring) of atoms\n\t * @param   linestring  {Array}     Multiple x-and-y objects\n\t * @return              {String}    The WKT representation\n\t * @memberof this.Wkt.Wkt.extract\n\t * @instance\n\t */\n\tlinestring: function (linestring) {\n\t\t// Extraction of linestrings is the same as for points\n\t\treturn this.extract.point.apply(this, [linestring]);\n\t},\n\n\t/**\n\t * Return a WKT string representing multiple chains (multilinestring) of atoms\n\t * @param   multilinestring {Array}     Multiple of multiple x-and-y objects\n\t * @return                  {String}    The WKT representation\n\t * @memberof this.Wkt.Wkt.extract\n\t * @instance\n\t */\n\tmultilinestring: function (multilinestring) {\n\t\tvar i, parts = [];\n\n\t\tif (multilinestring.length) {\n\t\t\tfor (i = 0; i < multilinestring.length; i += 1) {\n\t\t\t\tparts.push(this.extract.linestring.apply(this, [multilinestring[i]]));\n\t\t\t}\n\t\t} else {\n\t\t\tparts.push(this.extract.point.apply(this, [multilinestring]));\n\t\t}\n\n\t\treturn parts.join(',');\n\t},\n\n\t/**\n\t * Return a WKT string representing multiple atoms in closed series (polygon)\n\t * @param   polygon {Array}     Collection of ordered x-and-y objects\n\t * @return          {String}    The WKT representation\n\t * @memberof this.Wkt.Wkt.extract\n\t * @instance\n\t */\n\tpolygon: function (polygon) {\n\t\t// Extraction of polygons is the same as for multilinestrings\n\t\treturn this.extract.multilinestring.apply(this, [polygon]);\n\t},\n\n\t/**\n\t * Return a WKT string representing multiple closed series (multipolygons) of multiple atoms\n\t * @param   multipolygon    {Array}     Collection of ordered x-and-y objects\n\t * @return                  {String}    The WKT representation\n\t * @memberof this.Wkt.Wkt.extract\n\t * @instance\n\t */\n\tmultipolygon: function (multipolygon) {\n\t\tvar i, parts = [];\n\t\tfor (i = 0; i < multipolygon.length; i += 1) {\n\t\t\tparts.push('(' + this.extract.polygon.apply(this, [multipolygon[i]]) + ')');\n\t\t}\n\t\treturn parts.join(',');\n\t},\n\n\t/**\n\t * Return a WKT string representing a 2DBox\n\t * @param   multipolygon    {Array}     Collection of ordered x-and-y objects\n\t * @return                  {String}    The WKT representation\n\t * @memberof this.Wkt.Wkt.extract\n\t * @instance\n\t */\n\tbox: function (box) {\n\t\treturn this.extract.linestring.apply(this, [box]);\n\t},\n\n\tgeometrycollection: function (str) {\n\t\tconsole.log('The geometrycollection WKT type is not yet supported.');\n\t}\n};\n\n/**\n * This object contains functions as property names that ingest WKT\n * strings into the internal representation.\n * @memberof this.Wkt.Wkt\n * @namespace this.Wkt.Wkt.ingest\n * @instance\n */\nWkt.Wkt.prototype.ingest = {\n\n\t/**\n\t * Return point feature given a point WKT fragment.\n\t * @param   str {String}    A WKT fragment representing the point\n\t * @memberof this.Wkt.Wkt.ingest\n\t * @instance\n\t */\n\tpoint: function (str) {\n\t\tvar coords = Wkt.trim(str).split(this.regExes.spaces);\n\t\t// In case a parenthetical group of coordinates is passed...\n\t\treturn [{ // ...Search for numeric substrings\n\t\t\tx: parseFloat(this.regExes.numeric.exec(coords[0])[0]),\n\t\t\ty: parseFloat(this.regExes.numeric.exec(coords[1])[0])\n\t\t}];\n\t},\n\n\t/**\n\t * Return a multipoint feature given a multipoint WKT fragment.\n\t * @param   str {String}    A WKT fragment representing the multipoint\n\t * @memberof this.Wkt.Wkt.ingest\n\t * @instance\n\t */\n\tmultipoint: function (str) {\n\t\tvar i, components, points;\n\t\tcomponents = [];\n\t\tpoints = Wkt.trim(str).split(this.regExes.comma);\n\t\tfor (i = 0; i < points.length; i += 1) {\n\t\t\tcomponents.push(this.ingest.point.apply(this, [points[i]]));\n\t\t}\n\t\treturn components;\n\t},\n\n\t/**\n\t * Return a linestring feature given a linestring WKT fragment.\n\t * @param   str {String}    A WKT fragment representing the linestring\n\t * @memberof this.Wkt.Wkt.ingest\n\t * @instance\n\t */\n\tlinestring: function (str) {\n\t\tvar i, multipoints, components;\n\n\t\t// In our x-and-y representation of components, parsing\n\t\t//  multipoints is the same as parsing linestrings\n\t\tmultipoints = this.ingest.multipoint.apply(this, [str]);\n\n\t\t// However, the points need to be joined\n\t\tcomponents = [];\n\t\tfor (i = 0; i < multipoints.length; i += 1) {\n\t\t\tcomponents = components.concat(multipoints[i]);\n\t\t}\n\t\treturn components;\n\t},\n\n\t/**\n\t * Return a multilinestring feature given a multilinestring WKT fragment.\n\t * @param   str {String}    A WKT fragment representing the multilinestring\n\t * @memberof this.Wkt.Wkt.ingest\n\t * @instance\n\t */\n\tmultilinestring: function (str) {\n\t\tvar i, components, line, lines;\n\t\tcomponents = [];\n\n\t\tlines = Wkt.trim(str).split(this.regExes.doubleParenComma);\n\t\tif (lines.length === 1) { // If that didn't work...\n\t\t\tlines = Wkt.trim(str).split(this.regExes.parenComma);\n\t\t}\n\n\t\tfor (i = 0; i < lines.length; i += 1) {\n\t\t\tline = lines[i].replace(this.regExes.trimParens, '$1');\n\t\t\tcomponents.push(this.ingest.linestring.apply(this, [line]));\n\t\t}\n\n\t\treturn components;\n\t},\n\n\t/**\n\t * Return a polygon feature given a polygon WKT fragment.\n\t * @param   str {String}    A WKT fragment representing the polygon\n\t * @memberof this.Wkt.Wkt.ingest\n\t * @instance\n\t */\n\tpolygon: function (str) {\n\t\tvar i, j, components, subcomponents, ring, rings;\n\t\trings = Wkt.trim(str).split(this.regExes.parenComma);\n\t\tcomponents = []; // Holds one or more rings\n\t\tfor (i = 0; i < rings.length; i += 1) {\n\t\t\tring = rings[i].replace(this.regExes.trimParens, '$1').split(this.regExes.comma);\n\t\t\tsubcomponents = []; // Holds the outer ring and any inner rings (holes)\n\t\t\tfor (j = 0; j < ring.length; j += 1) {\n\t\t\t\t// Split on the empty space or '+' character (between coordinates)\n\t\t\t\tvar split = ring[j].split(this.regExes.spaces);\n\t\t\t\tif (split.length > 2) {\n\t\t\t\t\t//remove the elements which are blanks\n\t\t\t\t\tsplit = split.filter(function (n) {\n\t\t\t\t\t\treturn n != \"\"\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (split.length === 2) {\n\t\t\t\t\tvar x_cord = split[0];\n\t\t\t\t\tvar y_cord = split[1];\n\n\t\t\t\t\t//now push\n\t\t\t\t\tsubcomponents.push({\n\t\t\t\t\t\tx: parseFloat(x_cord),\n\t\t\t\t\t\ty: parseFloat(y_cord)\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\tcomponents.push(subcomponents);\n\t\t}\n\t\treturn components;\n\t},\n\n\t/**\n\t * Return box vertices (which would become the Rectangle bounds) given a Box WKT fragment.\n\t * @param   str {String}    A WKT fragment representing the box\n\t * @memberof this.Wkt.Wkt.ingest\n\t * @instance\n\t */\n\tbox: function (str) {\n\t\tvar i, multipoints, components;\n\n\t\t// In our x-and-y representation of components, parsing\n\t\t//  multipoints is the same as parsing linestrings\n\t\tmultipoints = this.ingest.multipoint.apply(this, [str]);\n\n\t\t// However, the points need to be joined\n\t\tcomponents = [];\n\t\tfor (i = 0; i < multipoints.length; i += 1) {\n\t\t\tcomponents = components.concat(multipoints[i]);\n\t\t}\n\n\t\treturn components;\n\t},\n\n\t/**\n\t * Return a multipolygon feature given a multipolygon WKT fragment.\n\t * @param   str {String}    A WKT fragment representing the multipolygon\n\t * @memberof this.Wkt.Wkt.ingest\n\t * @instance\n\t */\n\tmultipolygon: function (str) {\n\t\tvar i, components, polygon, polygons;\n\t\tcomponents = [];\n\t\tpolygons = Wkt.trim(str).split(this.regExes.doubleParenComma);\n\t\tfor (i = 0; i < polygons.length; i += 1) {\n\t\t\tpolygon = polygons[i].replace(this.regExes.trimParens, '$1');\n\t\t\tcomponents.push(this.ingest.polygon.apply(this, [polygon]));\n\t\t}\n\t\treturn components;\n\t},\n\n\t/**\n\t * Return an array of features given a geometrycollection WKT fragment.\n\t * @param   str {String}    A WKT fragment representing the geometry collection\n\t * @memberof this.Wkt.Wkt.ingest\n\t * @instance\n\t */\n\tgeometrycollection: function (str) {\n\t\tconsole.log('The geometrycollection WKT type is not yet supported.');\n\t}\n\n}; // eo ingest\n\n/**\n * @augments Wkt.Wkt\n * A framework-dependent flag, set for each Wkt.Wkt() instance, that indicates\n * whether or not a closed polygon geometry should be interpreted as a rectangle.\n */\nWkt.Wkt.prototype.isRectangle = false;\n\n/**\n * @augments Wkt.Wkt\n * An object of framework-dependent construction methods used to generate\n * objects belonging to the various geometry classes of the framework.\n */\nWkt.Wkt.prototype.construct = {\n\t/**\n\t * Creates the framework's equivalent point geometry object.\n\t * @param   config      {Object}    An optional properties hash the object should use\n\t * @param   component   {Object}    An optional component to build from\n\t * @return              {google.maps.Marker}\n\t */\n\tpoint: function (config, component) {\n\t\tvar c = component || this.components;\n\n\t\tconfig = config || {};\n\n\t\tconfig.position = new google.maps.LatLng(c[0].y, c[0].x);\n\n\t\treturn new google.maps.Marker(config);\n\t},\n\n\t/**\n\t * Creates the framework's equivalent multipoint geometry object.\n\t * @param   config  {Object}    An optional properties hash the object should use\n\t * @return          {Array}     Array containing multiple google.maps.Marker\n\t */\n\tmultipoint: function (config) {\n\t\tvar i, c, arr;\n\n\t\tc = this.components;\n\n\t\tconfig = config || {};\n\n\t\tarr = [];\n\n\t\tfor (i = 0; i < c.length; i += 1) {\n\t\t\tarr.push(this.construct.point(config, c[i]));\n\t\t}\n\n\t\treturn arr;\n\t},\n\n\t/**\n\t * Creates the framework's equivalent linestring geometry object.\n\t * @param   config      {Object}    An optional properties hash the object should use\n\t * @param   component   {Object}    An optional component to build from\n\t * @return              {google.maps.Polyline}\n\t */\n\tlinestring: function (config, component) {\n\t\tvar i, c;\n\n\t\tc = component || this.components;\n\n\t\tconfig = config || {\n\t\t\teditable: false\n\t\t};\n\n\t\tconfig.path = [];\n\n\t\tfor (i = 0; i < c.length; i += 1) {\n\t\t\tconfig.path.push(new google.maps.LatLng(c[i].y, c[i].x));\n\t\t}\n\n\t\treturn new google.maps.Polyline(config);\n\t},\n\n\t/**\n\t * Creates the framework's equivalent multilinestring geometry object.\n\t * @param   config  {Object}    An optional properties hash the object should use\n\t * @return          {Array}     Array containing multiple google.maps.Polyline instances\n\t */\n\tmultilinestring: function (config) {\n\t\tvar i, c, arr;\n\n\t\tc = this.components;\n\n\t\tconfig = config || {\n\t\t\teditable: false\n\t\t};\n\n\t\tconfig.path = [];\n\n\t\tarr = [];\n\n\t\tfor (i = 0; i < c.length; i += 1) {\n\t\t\tarr.push(this.construct.linestring(config, c[i]));\n\t\t}\n\n\t\treturn arr;\n\t},\n\n\t/**\n\t * Creates the framework's equivalent Box or Rectangle geometry object.\n\t * @param   config      {Object}    An optional properties hash the object should use\n\t * @param   component   {Object}    An optional component to build from\n\t * @return              {google.maps.Rectangle}\n\t */\n\tbox: function (config, component) {\n\t\tvar c = component || this.components;\n\n\t\tconfig = config || {};\n\n\t\tconfig.bounds = new google.maps.LatLngBounds(\n\t\t\tnew google.maps.LatLng(c[0].y, c[0].x),\n\t\t\tnew google.maps.LatLng(c[1].y, c[1].x));\n\n\t\treturn new google.maps.Rectangle(config);\n\t},\n\n\t/**\n\t * Creates the framework's equivalent polygon geometry object.\n\t * @param   config      {Object}    An optional properties hash the object should use\n\t * @param   component   {Object}    An optional component to build from\n\t * @return              {google.maps.Polygon}\n\t */\n\tpolygon: function (config, component) {\n\t\tvar j, k, c, rings, verts;\n\n\t\tvar polygonIsClockwise = function (coords) {\n\t\t\tvar area = 0,\n\t\t\t\tj = null,\n\t\t\t\ti = 0;\n\n\t\t\tfor (i = 0; i < coords.length; i++) {\n\t\t\t\tj = (i + 1) % coords.length;\n\t\t\t\tarea += coords[i].x * coords[j].x;\n\t\t\t\tarea -= coords[j].y * coords[i].y;\n\t\t\t}\n\n\t\t\treturn area > 0;\n\t\t};\n\n\t\tc = component || this.components;\n\n\t\tconfig = config || {\n\t\t\teditable: false // Editable geometry off by default\n\t\t};\n\n\t\tconfig.paths = [];\n\n\t\trings = [];\n\t\tfor (j = 0; j < c.length; j += 1) { // For each ring...\n\n\t\t\tverts = [];\n\t\t\t// NOTE: We iterate to one (1) less than the Array length to skip the last vertex\n\t\t\tfor (k = 0; k < c[j].length - 1; k += 1) { // For each vertex...\n\t\t\t\tverts.push(new google.maps.LatLng(c[j][k].y, c[j][k].x));\n\n\t\t\t} // eo for each vertex\n\n\t\t\tif (j !== 0) {\n\t\t\t\t// Orient inner rings correctly\n\t\t\t\tif (polygonIsClockwise(c[j]) && this.type == 'polygon') {\n\t\t\t\t\tverts.reverse();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\trings.push(verts);\n\t\t} // eo for each ring\n\n\t\tconfig.paths = config.paths.concat(rings);\n\n\t\tif (this.isRectangle) {\n\t\t\treturn (function () {\n\t\t\t\tvar bounds, v;\n\n\t\t\t\tbounds = new google.maps.LatLngBounds();\n\n\t\t\t\tfor (v in rings[0]) { // Ought to be only 1 ring in a Rectangle\n\t\t\t\t\tif (rings[0].hasOwnProperty(v)) {\n\t\t\t\t\t\tbounds.extend(rings[0][v]);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn new google.maps.Rectangle({\n\t\t\t\t\tbounds: bounds\n\t\t\t\t});\n\t\t\t}());\n\t\t} else {\n\t\t\treturn new google.maps.Polygon(config);\n\t\t}\n\t},\n\n\t/**\n\t * Creates the framework's equivalent multipolygon geometry object.\n\t * @param   config  {Object}    An optional properties hash the object should use\n\t * @return          {Array}     Array containing multiple google.maps.Polygon\n\t */\n\tmultipolygon: function (config) {\n\t\tvar i, c, arr;\n\n\t\tc = this.components;\n\n\t\tconfig = config || {\n\t\t\teditable: false\n\t\t};\n\n\t\tconfig.path = [];\n\n\t\tarr = [];\n\n\t\tfor (i = 0; i < c.length; i += 1) {\n\t\t\tarr.push(this.construct.polygon(config, c[i]));\n\t\t}\n\n\t\treturn arr;\n\t}\n\n};\n\n/**\n * @augments Wkt.Wkt\n * A framework-dependent deconstruction method used to generate internal\n * geometric representations from instances of framework geometry. This method\n * uses object detection to attempt to classify members of framework geometry\n * classes into the standard WKT types.\n * @param obj       {Object}    An instance of one of the framework's geometry classes\n * @param multiFlag {Boolean} If true, then the deconstructor will be forced to return a MultiGeometry (multipoint, multilinestring or multipolygon)\n * @return          {Object}    A hash of the 'type' and 'components' thus derived, plus the WKT string of the feature.\n */\nWkt.Wkt.prototype.deconstruct = function (obj, multiFlag) {\n\tvar features, i, j, multiFlag, verts, rings, sign, tmp, response, lat, lng, vertex, ring, linestrings, k;\n\n\t// Shortcut to signed area function (determines clockwise vs counter-clock)\n\tif (google.maps.geometry) {\n\t\tsign = google.maps.geometry.spherical.computeSignedArea;\n\t};\n\n\t// google.maps.LatLng //////////////////////////////////////////////////////\n\tif (obj.constructor === google.maps.LatLng) {\n\n\t\tresponse = {\n\t\t\ttype: 'point',\n\t\t\tcomponents: [{\n\t\t\t\tx: obj.lng(),\n\t\t\t\ty: obj.lat()\n\t\t\t}]\n\t\t};\n\t\treturn response;\n\t}\n\n\t// google.maps.Point //////////////////////////////////////////////////////\n\tif (obj.constructor === google.maps.Point) {\n\t\tresponse = {\n\t\t\ttype: 'point',\n\t\t\tcomponents: [{\n\t\t\t\tx: obj.x,\n\t\t\t\ty: obj.y\n\t\t\t}]\n\t\t};\n\t\treturn response;\n\t}\n\n\t// google.maps.Marker //////////////////////////////////////////////////////\n\tif (obj.constructor === google.maps.Marker) {\n\t\tresponse = {\n\t\t\ttype: 'point',\n\t\t\tcomponents: [{\n\t\t\t\tx: obj.getPosition().lng(),\n\t\t\t\ty: obj.getPosition().lat()\n\t\t\t}]\n\t\t};\n\t\treturn response;\n\t}\n\n\t// google.maps.Polyline ////////////////////////////////////////////////////\n\tif (obj.constructor === google.maps.Polyline) {\n\n\t\tverts = [];\n\t\tfor (i = 0; i < obj.getPath().length; i += 1) {\n\t\t\ttmp = obj.getPath().getAt(i);\n\t\t\tverts.push({\n\t\t\t\tx: tmp.lng(),\n\t\t\t\ty: tmp.lat()\n\t\t\t});\n\t\t}\n\t\tresponse = {\n\t\t\ttype: 'linestring',\n\t\t\tcomponents: verts\n\t\t};\n\t\treturn response;\n\n\t}\n\n\t// google.maps.Polygon /////////////////////////////////////////////////////\n\tif (obj.constructor === google.maps.Polygon) {\n\n\t\trings = [];\n\n\t\tif (multiFlag === undefined) {\n\t\t\tmultiFlag = (function () {\n\t\t\t\tvar areas, i, l;\n\n\t\t\t\tl = obj.getPaths().length;\n\t\t\t\tif (l <= 1) { // Trivial; this is a single polygon\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tif (l === 2) {\n\t\t\t\t\t// If clockwise*clockwise or counter*counter, i.e.\n\t\t\t\t\t//  (-1)*(-1) or (1)*(1), then result would be positive\n\t\t\t\t\tif (sign(obj.getPaths().getAt(0)) * sign(obj.getPaths().getAt(1)) < 0) {\n\t\t\t\t\t\treturn false; // Most likely single polygon with 1 hole\n\t\t\t\t\t}\n\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\t// Must be longer than 3 polygons at this point...\n\t\t\t\tareas = obj.getPaths().getArray().map(function (k) {\n\t\t\t\t\treturn sign(k) / Math.abs(sign(k)); // Unit normalization (outputs 1 or -1)\n\t\t\t\t});\n\n\t\t\t\t// If two clockwise or two counter-clockwise rings are found\n\t\t\t\t//  (at different indices)...\n\t\t\t\tif (areas.indexOf(areas[0]) !== areas.lastIndexOf(areas[0])) {\n\t\t\t\t\tmultiFlag = true; // Flag for holes in one or more polygons\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\n\t\t\t}());\n\t\t}\n\n\t\tfor (i = 0; i < obj.getPaths().length; i += 1) { // For each polygon (ring)...\n\t\t\ttmp = obj.getPaths().getAt(i);\n\t\t\tverts = [];\n\n\t\t\tfor (j = 0; j < obj.getPaths().getAt(i).length; j += 1) { // For each vertex...\n\t\t\t\tverts.push({\n\t\t\t\t\tx: tmp.getAt(j).lng(),\n\t\t\t\t\ty: tmp.getAt(j).lat()\n\t\t\t\t});\n\n\t\t\t}\n\n\t\t\tif (!tmp.getAt(tmp.length - 1).equals(tmp.getAt(0))) {\n\t\t\t\tif (i % 2 !== 0) { // In inner rings, coordinates are reversed...\n\n\t\t\t\t\tverts.push({ // Add the first coordinate again for closure\n\t\t\t\t\t\tx: tmp.getAt(0).lng(),\n\t\t\t\t\t\ty: tmp.getAt(0).lat()\n\t\t\t\t\t});\n\t\t\t\t\tverts.reverse();\n\n\t\t\t\t} else {\n\t\t\t\t\tverts.push({ // Add the first coordinate again for closure\n\t\t\t\t\t\tx: tmp.getAt(0).lng(),\n\t\t\t\t\t\ty: tmp.getAt(0).lat()\n\t\t\t\t\t});\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif (obj.getPaths().length > 1 && i > 0) {\n\t\t\t\t// If this and the last ring have the same signs...\n\t\t\t\tif (sign(obj.getPaths().getAt(i)) > 0 && sign(obj.getPaths().getAt(i - 1)) > 0 ||\n\t\t\t\t\tsign(obj.getPaths().getAt(i)) < 0 && sign(obj.getPaths().getAt(i - 1)) < 0 /*&& !multiFlag*/ ) {\n\t\t\t\t\t// ...They must both be inner rings (or both be outer rings, in a multipolygon)\n\t\t\t\t\tverts = [verts]; // Wrap multipolygons once more (collection)\n\t\t\t\t} else {\n\t\t\t\t\tverts.reverse();\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t//TODO This makes mistakes when a second polygon has holes; it sees them all as individual polygons\n\t\t\t/*if (i % 2 !== 0) { // In inner rings, coordinates are reversed...\n\t\t\t\tverts.reverse();\n\t\t\t}*/\n\n\t\t\trings.push(verts);\n\t\t}\n\n\t\tresponse = {\n\t\t\ttype: (multiFlag) ? 'multipolygon' : 'polygon',\n\t\t\tcomponents: rings\n\t\t};\n\t\treturn response;\n\n\t}\n\n\t// google.maps.Circle //////////////////////////////////////////////////////\n\tif (obj.constructor === google.maps.Circle) {\n\t\tvar point = obj.getCenter();\n\t\tvar radius = obj.getRadius();\n\t\tverts = [];\n\t\tvar d2r = Math.PI / 180; // degrees to radians\n\t\tvar r2d = 180 / Math.PI; // radians to degrees\n\t\tradius = radius / 1609; // meters to miles\n\t\tvar earthsradius = 3963; // 3963 is the radius of the earth in miles\n\t\tvar num_seg = 32; // number of segments used to approximate a circle\n\t\tvar rlat = (radius / earthsradius) * r2d;\n\t\tvar rlng = rlat / Math.cos(point.lat() * d2r);\n\n\t\tfor (var n = 0; n <= num_seg; n++) {\n\t\t\tvar theta = Math.PI * (n / (num_seg / 2));\n\t\t\tlng = point.lng() + (rlng * Math.cos(theta)); // center a + radius x * cos(theta)\n\t\t\tlat = point.lat() + (rlat * Math.sin(theta)); // center b + radius y * sin(theta)\n\t\t\tverts.push({\n\t\t\t\tx: lng,\n\t\t\t\ty: lat\n\t\t\t});\n\t\t}\n\n\t\tresponse = {\n\t\t\ttype: 'polygon',\n\t\t\tcomponents: [verts]\n\t\t};\n\n\t\treturn response;\n\n\t}\n\n\t// google.maps.LatLngBounds ///////////////////////////////////////////////////\n\tif (obj.constructor === google.maps.LatLngBounds) {\n\n\t\ttmp = obj;\n\t\tverts = [];\n\t\tverts.push({ // NW corner\n\t\t\tx: tmp.getSouthWest().lng(),\n\t\t\ty: tmp.getNorthEast().lat()\n\t\t});\n\n\t\tverts.push({ // NE corner\n\t\t\tx: tmp.getNorthEast().lng(),\n\t\t\ty: tmp.getNorthEast().lat()\n\t\t});\n\n\t\tverts.push({ // SE corner\n\t\t\tx: tmp.getNorthEast().lng(),\n\t\t\ty: tmp.getSouthWest().lat()\n\t\t});\n\n\t\tverts.push({ // SW corner\n\t\t\tx: tmp.getSouthWest().lng(),\n\t\t\ty: tmp.getSouthWest().lat()\n\t\t});\n\n\t\tverts.push({ // NW corner (again, for closure)\n\t\t\tx: tmp.getSouthWest().lng(),\n\t\t\ty: tmp.getNorthEast().lat()\n\t\t});\n\n\t\tresponse = {\n\t\t\ttype: 'polygon',\n\t\t\tisRectangle: true,\n\t\t\tcomponents: [verts]\n\t\t};\n\n\t\treturn response;\n\n\t}\n\n\t// google.maps.Rectangle ///////////////////////////////////////////////////\n\tif (obj.constructor === google.maps.Rectangle) {\n\n\t\ttmp = obj.getBounds();\n\t\tverts = [];\n\t\tverts.push({ // NW corner\n\t\t\tx: tmp.getSouthWest().lng(),\n\t\t\ty: tmp.getNorthEast().lat()\n\t\t});\n\n\t\tverts.push({ // NE corner\n\t\t\tx: tmp.getNorthEast().lng(),\n\t\t\ty: tmp.getNorthEast().lat()\n\t\t});\n\n\t\tverts.push({ // SE corner\n\t\t\tx: tmp.getNorthEast().lng(),\n\t\t\ty: tmp.getSouthWest().lat()\n\t\t});\n\n\t\tverts.push({ // SW corner\n\t\t\tx: tmp.getSouthWest().lng(),\n\t\t\ty: tmp.getSouthWest().lat()\n\t\t});\n\n\t\tverts.push({ // NW corner (again, for closure)\n\t\t\tx: tmp.getSouthWest().lng(),\n\t\t\ty: tmp.getNorthEast().lat()\n\t\t});\n\n\t\tresponse = {\n\t\t\ttype: 'polygon',\n\t\t\tisRectangle: true,\n\t\t\tcomponents: [verts]\n\t\t};\n\n\t\treturn response;\n\n\t}\n\n\t// google.maps.Data Geometry Types /////////////////////////////////////////////////////\n\n\t// google.maps.Data.Feature /////////////////////////////////////////////////////\n\tif (obj.constructor === google.maps.Data.Feature) {\n\t\treturn this.deconstruct.call(this, obj.getGeometry());\n\t}\n\n\t// google.maps.Data.Point /////////////////////////////////////////////////////\n\tif (obj.constructor === google.maps.Data.Point) {\n\t\t//console.log('It is a google.maps.Data.Point');\n\t\tresponse = {\n\t\t\ttype: 'point',\n\t\t\tcomponents: [{\n\t\t\t\tx: obj.get().lng(),\n\t\t\t\ty: obj.get().lat()\n\t\t\t}]\n\t\t};\n\t\treturn response;\n\t}\n\n\t// google.maps.Data.LineString /////////////////////////////////////////////////////\n\tif (obj.constructor === google.maps.Data.LineString) {\n\t\tverts = [];\n\t\t//console.log('It is a google.maps.Data.LineString');\n\t\tfor (i = 0; i < obj.getLength(); i += 1) {\n\t\t\tvertex = obj.getAt(i);\n\t\t\tverts.push({\n\t\t\t\tx: vertex.lng(),\n\t\t\t\ty: vertex.lat()\n\t\t\t});\n\t\t}\n\t\tresponse = {\n\t\t\ttype: 'linestring',\n\t\t\tcomponents: verts\n\t\t};\n\t\treturn response;\n\t}\n\n\t// google.maps.Data.Polygon /////////////////////////////////////////////////////\n\tif (obj.constructor === google.maps.Data.Polygon) {\n\t\tvar rings = [];\n\t\t//console.log('It is a google.maps.Data.Polygon');\n\t\tfor (i = 0; i < obj.getLength(); i += 1) { // For each ring...\n\t\t\tring = obj.getAt(i);\n\t\t\tvar verts = [];\n\t\t\tfor (j = 0; j < ring.getLength(); j += 1) { // For each vertex...\n\t\t\t\tvertex = ring.getAt(j);\n\t\t\t\tverts.push({\n\t\t\t\t\tx: vertex.lng(),\n\t\t\t\t\ty: vertex.lat()\n\t\t\t\t});\n\t\t\t}\n\t\t\tverts.push({\n\t\t\t\tx: ring.getAt(0).lng(),\n\t\t\t\ty: ring.getAt(0).lat()\n\t\t\t});\n\n\t\t\trings.push(verts);\n\t\t}\n\t\tresponse = {\n\t\t\ttype: 'polygon',\n\t\t\tcomponents: rings\n\t\t};\n\n\t\treturn response;\n\t}\n\n\t// google.maps.Data.MultiPoint /////////////////////////////////////////////////////\n\tif (obj.constructor === google.maps.Data.MultiPoint) {\n\t\tverts = [];\n\t\tfor (i = 0; i < obj.getLength(); i += 1) {\n\t\t\tvertex = obj.getAt(i);\n\t\t\tverts.push([{\n\t\t\t\tx: vertex.lng(),\n\t\t\t\ty: vertex.lat()\n\t\t\t}]);\n\t\t}\n\t\tresponse = {\n\t\t\ttype: 'multipoint',\n\t\t\tcomponents: verts\n\t\t};\n\t\treturn response;\n\t}\n\n\t// google.maps.Data.MultiLineString /////////////////////////////////////////////////////\n\tif (obj.constructor === google.maps.Data.MultiLineString) {\n\t\tlinestrings = []\n\t\tfor (i = 0; i < obj.getLength(); i += 1) {\n\t\t\tverts = [];\n\t\t\tvar linestring = obj.getAt(i);\n\t\t\tfor (j = 0; j < linestring.getLength(); j += 1) {\n\t\t\t\tvertex = linestring.getAt(j);\n\t\t\t\tverts.push({\n\t\t\t\t\tx: vertex.lng(),\n\t\t\t\t\ty: vertex.lat()\n\t\t\t\t});\n\t\t\t}\n\t\t\tlinestrings.push(verts);\n\t\t}\n\t\tresponse = {\n\t\t\ttype: 'multilinestring',\n\t\t\tcomponents: linestrings\n\t\t};\n\t\treturn response;\n\t}\n\n\t// google.maps.Data.MultiPolygon /////////////////////////////////////////////////////\n\tif (obj.constructor === google.maps.Data.MultiPolygon) {\n\n\t\tvar polygons = [];\n\n\t\t//console.log('It is a google.maps.Data.MultiPolygon');\n\t\tfor (k = 0; k < obj.getLength(); k += 1) { // For each multipolygon\n\t\t\tvar polygon = obj.getAt(k);\n\t\t\tvar rings = [];\n\t\t\tfor (i = 0; i < polygon.getLength(); i += 1) { // For each ring...\n\t\t\t\tring = polygon.getAt(i);\n\t\t\t\tvar verts = [];\n\t\t\t\tfor (j = 0; j < ring.getLength(); j += 1) { // For each vertex...\n\t\t\t\t\tvertex = ring.getAt(j);\n\t\t\t\t\tverts.push({\n\t\t\t\t\t\tx: vertex.lng(),\n\t\t\t\t\t\ty: vertex.lat()\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tverts.push({\n\t\t\t\t\tx: ring.getAt(0).lng(),\n\t\t\t\t\ty: ring.getAt(0).lat()\n\t\t\t\t});\n\n\t\t\t\trings.push(verts);\n\t\t\t}\n\t\t\tpolygons.push(rings);\n\t\t}\n\n\t\tresponse = {\n\t\t\ttype: 'multipolygon',\n\t\t\tcomponents: polygons\n\t\t};\n\t\treturn response;\n\t}\n\n\t// google.maps.Data.GeometryCollection /////////////////////////////////////////////////////\n\tif (obj.constructor === google.maps.Data.GeometryCollection) {\n\n\t\tvar objects = [];\n\t\tfor (k = 0; k < obj.getLength(); k += 1) { // For each multipolygon\n\t\t\tvar object = obj.getAt(k);\n\t\t\tobjects.push(this.deconstruct.call(this, object));\n\t\t}\n\t\t//console.log('It is a google.maps.Data.GeometryCollection', objects);\n\t\tresponse = {\n\t\t\ttype: 'geometrycollection',\n\t\t\tcomponents: objects\n\t\t};\n\t\treturn response;\n\t}\n\n\t// Array ///////////////////////////////////////////////////////////////////\n\tif (Wkt.isArray(obj)) {\n\t\tfeatures = [];\n\n\t\tfor (i = 0; i < obj.length; i += 1) {\n\t\t\tfeatures.push(this.deconstruct.call(this, obj[i], true));\n\t\t}\n\n\t\tresponse = {\n\n\t\t\ttype: (function () {\n\t\t\t\tvar k, type = obj[0].constructor;\n\n\t\t\t\tfor (k = 0; k < obj.length; k += 1) {\n\t\t\t\t\t// Check that all items have the same constructor as the first item\n\t\t\t\t\tif (obj[k].constructor !== type) {\n\t\t\t\t\t\t// If they don't, type is heterogeneous geometry collection\n\t\t\t\t\t\treturn 'geometrycollection';\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tswitch (type) {\n\t\t\t\tcase google.maps.Marker:\n\t\t\t\t\treturn 'multipoint';\n\t\t\t\tcase google.maps.Polyline:\n\t\t\t\t\treturn 'multilinestring';\n\t\t\t\tcase google.maps.Polygon:\n\t\t\t\t\treturn 'multipolygon';\n\t\t\t\tdefault:\n\t\t\t\t\treturn 'geometrycollection';\n\t\t\t\t}\n\n\t\t\t}()),\n\t\t\tcomponents: (function () {\n\t\t\t\t// Pluck the components from each Wkt\n\t\t\t\tvar i, comps;\n\n\t\t\t\tcomps = [];\n\t\t\t\tfor (i = 0; i < features.length; i += 1) {\n\t\t\t\t\tif (features[i].components) {\n\t\t\t\t\t\tcomps.push(features[i].components);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\tcomps: comps\n\t\t\t\t};\n\t\t\t}())\n\n\t\t};\n\t\tresponse.components = response.components.comps;\n\t\treturn response;\n\n\t}\n\n\tconsole.log('The passed object does not have any recognizable properties.');\n\n};\n\nexport {\n\tWkt\n};\nexport function Wicket() {\n\treturn new Wkt.Wkt();\n};\n\nexport function WKT2Object(WKT) {\n\tvar wkt = new Wkt.Wkt();\n\ttry {\n\t\twkt.read(WKT);\n\t} catch (e) {\n\t\tconsole.zlog('Imposible leer geometría', WKT);\n\t\treturn false;\n\t}\n\ttry {\n\t\tvar obj = wkt.toObject({\n\t\t\treverseInnerPolygons: true\n\t\t}); // Make an object\n\t\tobj.wkt = wkt;\n\t\treturn obj;\n\t} catch (e) {\n\t\tconsole.warn('Imposible exportar geometría', WKT);\n\t\treturn false;\n\t}\n\n};\n","import $ from 'jquery';\n\nvar jqContainerLoading = null,\n\tremoveEvent = null;\nvar preloaderFN = function (id_selector) {\n\tvar preloader = $('<div class=\"preloader\">'),\n\t\tloading = $('<div class=\"preloader-wrapper big active\" id=\"loading\">'),\n\t\tspinnerlayer = $('<div class=\"spinner-layer spinner-blue-only\">')\n\t\t.append('<div class=\"circle-clipper left\"><div class=\"circle\"></div></div>')\n\t\t.append('<div class=\"gap-patch\"><div class=\"circle\"></div></div>')\n\t\t.append('<div class=\"circle-clipper right\"><div class=\"circle\"></div>')\n\t\t.appendTo(loading);\n\n\tpreloader.append(loading).append('<div id=\"preload_text\">');\n\tpreloader.attr('id', id_selector.replace('#', ''));\n\treturn preloader;\n};\n/**\n * Muestra un div con una animación de \"cargando\"\n * @param  {integer} timeout   segundos de timeout o un flag (0,1,2)\n * @param  {string} message mensaje a desplegar\n * @param  {string} container  selector CSS del contenedor\n * @return {void}\n */\nexport function loadingcircle(timeout, message, container) {\n\n\tvar theGlobalvars = window.globalvars || {};\n\ttheGlobalvars.containerIds = theGlobalvars.containerIds || {};\n\n\tvar loadingcircleId = theGlobalvars.containerIds.loadingcircleId || '#preloader';\n\tjqContainerLoading = jqContainerLoading || $(loadingcircleId);\n\n\tmessage = message || '';\n\n\tif (jqContainerLoading.length === 0) {\n\t\tjqContainerLoading = preloaderFN(loadingcircleId);\n\t}\n\n\tvar removeContainer = function removeContainer(delay) {\n\n\t\treturn window.setTimeout(function () {\n\t\t\tjqContainerLoading.addClass('animated fadeOut');\n\t\t\twindow.setTimeout(function () {\n\t\t\t\tjqContainerLoading.detach();\n\t\t\t\tvar garbagedivs = $('body').find(loadingcircleId);\n\t\t\t\tgarbagedivs.detach();\n\t\t\t}, 1000);\n\t\t}, delay);\n\t};\n\tif (removeEvent) {\n\t\t//console.log('clearTimeout', removeEvent);\n\t\twindow.clearTimeout(removeEvent);\n\t} else {\n\t\t//console.log('no remove event detected');\n\t}\n\n\tjqContainerLoading.attr('class', 'preloader');\n\n\tif (timeout === 0) {\n\t\tremoveEvent = removeContainer(500);\n\t} else {\n\n\t\tif (container) {\n\t\t\tjqContainerLoading.addClass('preloader_padding_container');\n\t\t} else {\n\t\t\tjqContainerLoading.addClass('preloader_padding');\n\t\t\tcontainer = 'body';\n\t\t}\n\t\t$(container).append(jqContainerLoading);\n\t\t$('#preload_text').html(message);\n\n\t\tif (timeout >= 2) {\n\t\t\ttimeout = Math.max(timeout, 1000);\n\t\t\tremoveEvent = removeContainer(timeout);\n\t\t}\n\t}\n\treturn jqContainerLoading;\n\n}\n","import $ from 'jquery';\n\nexport {\n\tCollectionUtils\n}\nfrom './collection_helper.js';\n\nimport {\n\tMarkerFactory as ButtonFactory\n} from 'ig_markerfactory';\n\nimport {\n\tWkt,\n\tWicket,\n\tWKT2Object\n}\nfrom './wicket_helper.js';\nimport {\n\tloadingcircle\n}\nfrom './loadingcircle.js';\nimport {\n\tcolorset\n}\nfrom './colorset.js';\n\nvar root = (typeof self == 'object' && self.self === self && self) ||\n\t(typeof global == 'object' && global.global === global && global);\n\n/**\n * Sets the modal class.\n *\n * @param      {string}    cls      The cls\n * @param      {<type>}    options  The options\n * @return     {Function}  { description_of_the_return_value }\n */\nfunction setModalClass(cls, options) {\n\n\toptions = options || {\n\t\tfooter: true\n\t};\n\tvar modal = $('#dialogomodal'),\n\t\tmodal_body = $('.modal-body'),\n\t\tmodal_footer = $('.modal-footer');\n\n\tmodal.attr('style', '');\n\tmodal.attr('class', cls + ' modal');\n\tmodal_body.attr('style', '');\n\n\tif (options.footer === false) {\n\t\tmodal_footer.addClass('invisible');\n\t} else {\n\t\tmodal_footer.removeClass('invisible');\n\t}\n\n\treturn modal;\n}\n\n/**\n * Determines if array.\n *\n * @param      {<type>}   obj     The object\n * @return     {boolean}  True if array, False otherwise.\n */\nfunction isArray(obj) {\n\treturn Object.prototype.toString.call(obj) === \"[object Array]\";\n}\n\nfunction spaceString(str) {\n\tvar cleanstr = String(str).replace(/[_]/g, ' ');\n\treturn cleanstr;\n}\n\n/**\n * Method for cleaning special chars\n * @param  {String} str   source string\n * @param  {Boolean} strict if true, will replace even underscores\n * @return {String}        Clean string\n */\nfunction cleanString(str, strict) {\n\tvar cleanstr = String(str).replace(/[,.\\-& ]/g, '_');\n\tif (strict) {\n\t\tcleanstr = cleanstr.replace(/[_-]/g, '').toLowerCase();\n\t}\n\tcleanstr = cleanstr.replace(/[ÀÁÂÃÄÅ]/g, \"A\");\n\tcleanstr = cleanstr.replace(/[àáâãäå]/g, \"a\");\n\tcleanstr = cleanstr.replace(/[ÈÉÊË]/g, \"E\");\n\tcleanstr = cleanstr.replace(/[é]/g, \"e\");\n\tcleanstr = cleanstr.replace(/[Í]/g, \"I\");\n\tcleanstr = cleanstr.replace(/[í]/g, \"i\");\n\tcleanstr = cleanstr.replace(/[Ó]/g, \"O\");\n\tcleanstr = cleanstr.replace(/(ó|ó)/g, \"o\");\n\tcleanstr = cleanstr.replace(/[Ú]/g, \"U\");\n\tcleanstr = cleanstr.replace(/[ú]/g, \"u\");\n\tcleanstr = cleanstr.replace(/[Ñ]/g, \"N\");\n\tcleanstr = cleanstr.replace(/[ñ]/g, \"n\");\n\tcleanstr = cleanstr.replace(/(__)+/g, '_');\n\n\tcleanstr = cleanstr.replace(/\\'/g, '');\n\treturn cleanstr;\n}\n\n/**\n * { function_description }\n *\n * @param      {number}  limit   The limit\n * @return     {string}  { description_of_the_return_value }\n */\nfunction randomname(limit) {\n\tlimit = limit || 5;\n\tvar text = \"\";\n\tvar possible = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n\n\tfor (var i = 0; i < limit; i++) {\n\t\ttext += possible.charAt(Math.floor(Math.random() * possible.length));\n\t}\n\n\treturn text;\n}\n/**\n * Gets the cookie.\n *\n * @param      {string}    name    The name\n * @return     {Function}  The cookie.\n */\nfunction getCookie(name) {\n\tvar match = root.document.cookie.match(new RegExp(name + '=([^;]+)'));\n\tif (match) {\n\t\treturn match[1];\n\t}\n}\nexport {\n\tButtonFactory,\n\tWkt,\n\tWicket,\n\tWKT2Object,\n\tloadingcircle,\n\tcolorset,\n\tsetModalClass,\n\tisArray,\n\tspaceString,\n\tcleanString,\n\trandomname,\n\tgetCookie\n};\nexport default {\n\tButtonFactory: ButtonFactory,\n\tWkt: Wkt,\n\tWicket: Wicket,\n\tWKT2Object: WKT2Object,\n\tloadingcircle: loadingcircle,\n\tcolorset: colorset,\n\tsetModalClass: setModalClass,\n\tisArray: isArray,\n\tspaceString: spaceString,\n\tcleanString: cleanString,\n\trandomname: randomname,\n\tgetCookie: getCookie\n};\n","import $ from 'jquery';\nimport _ from 'underscore';\n\n/**\n * Campos que no deben tomarse en cuenta a la hora de reconocer las características de un dataset\n * @type {Array}\n */\nvar blacklistedfields = [\n\t'id',\n\t'strokeOpacity',\n\t'clickable',\n\t'strokeWeight',\n\t'fillOpacity',\n\t'shape',\n\t'The_Radio_google',\n\t'the_geom_google',\n\t'the_radio_google',\n\t'geocoding_address',\n\t'gm_accessors_',\n\t'gm_bindings_',\n\t'icon',\n\t'position',\n\t'lat_google',\n\t'lon_google',\n\t'weight',\n\t'id_dataset',\n\t'id_instagis',\n\t'location',\n\t'point',\n\t'center',\n\t'value'\n];\n\nvar CollectionUtils = function (DataSet) {\n\n\tthis.DataSet = DataSet;\n\tthis.DataSet.type = this.DataSet.type || this.DataSet.category;\n\treturn this;\n};\n\nCollectionUtils.prototype.addGeometricBoundaries = function () {\n\tvar element = this.DataSet,\n\t\thtml = '<h5 for=\"boundaries_' + element.domid + '\">Filter By Boundaries</h5>';\n\n\thtml += '<div class=\"span11  boundariescontainer\" data-theproperty=\"boundaries\">';\n\n\thtml += '<select id=\"boundaries_' + element.domid + '\" class=\"boundaries small span11\">';\n\thtml += '<option value=\"0\">Any place</option>';\n\thtml += '<option value=\"1\">Within Visible Zone</option>';\n\n\tglobalvars.mapModel.Polygons.each(function (Polygon) {\n\t\thtml += _.template('<option value=\"{{id}}\">Within {{name}}</option>')(Polygon.attributes);\n\t});\n\n\thtml += '</select>';\n\thtml += '</div>';\n\treturn html;\n};\n\n/**\n * Recorre una colección y devuelve sus campos\n * @param  {gmaps.FeatureCollection | gmaps.MVCArray | gmaps.Data} [DataSet] la colección a recorrer\n * si no se especifica, usará el DataSet asignado al instanciar.\n * @return {Object}    Los campos del Dataset\n */\nCollectionUtils.prototype.findFields = function (DataSet, callback) {\n\tvar _this = this;\n\tvar fields = {},\n\t\telemento;\n\tif (!DataSet) {\n\t\tDataSet = _this.DataSet;\n\t}\n\n\tif (!DataSet) {\n\t\treturn fields;\n\t}\n\treturn new Promise(function (resolve, reject) {\n\n\t\tif (DataSet.fieldsFound !== true || DataSet.fields === undefined || _.isEmpty(DataSet.fields)) {\n\n\t\t\t//console.info('getting fields for FeatureCollection');\n\n\t\t\telemento = _.uniq(_.flatten(_.map(DataSet.getArray(), function (item) {\n\t\t\t\tvar properties = item.getProperties ? item.getProperties() : item.properties;\n\t\t\t\tvar keys = _.keys(properties);\n\t\t\t\treturn keys;\n\t\t\t})), false);\n\n\t\t\t//console.zlog('field Keys', elemento);\n\n\t\t\tvar finalkeys = _.chain(elemento).reduce(function (memo, propiedad) {\n\t\t\t\tmemo[propiedad] = {\n\t\t\t\t\tlabel: propiedad,\n\t\t\t\t\tvalue: propiedad\n\t\t\t\t};\n\t\t\t\treturn memo;\n\t\t\t}, {}).omit(blacklistedfields).value();\n\n\t\t\t//DataSet.fields = finalkeys;\n\t\t\t/*_.each(finalkeys, function (attrs, fieldname) {\n\t\t\t\tconsole.zlog('fieldname', fieldname, attrs);\n\t\t\t\tconsole.zlog('Before DataSet.fields[', fieldname, ']', DataSet.fields, DataSet.fields[fieldname]);\n\t\t\t\tconsole.zlog('After DataSet.fields[', fieldname, ']', DataSet.fields, DataSet.fields[fieldname]);\n\t\t\t});*/\n\n\t\t\tDataSet.fields = finalkeys;\n\n\t\t\t//console.zlog('finalkeys Object', finalkeys, 'Datasetfields', DataSet.fields);\n\n\t\t\tDataSet.fieldsFound = true;\n\t\t}\n\n\t\tif (DataSet.Model && DataSet.Model.columns) {\n\t\t\tDataSet.Model.columns.each(function (column) {\n\t\t\t\tDataSet.fields[column.get('nombre_fisico')] = {\n\t\t\t\t\tvalue: column.get('nombre_fisico'),\n\t\t\t\t\tlabel: column.get('alias')\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\n\t\tif (callback) {\n\t\t\tcallback(null, DataSet.fields);\n\t\t}\n\t\tresolve(DataSet.fields);\n\t});\n\n};\n\n/**\n * Synchronous: Recorre una colección y devuelve sus campos no numéricos\n * @param  {gmaps.FeatureCollection | gmaps.MVCArray | gmaps.Data} [DataSet] la colección a recorrer\n * si no se especifica, usará el DataSet asignado al instanciar.\n * @return {Object}    Los campos no numéricos del Dataset\n */\nCollectionUtils.prototype.findQualityFields = function (DataSet) {\n\tvar _this = this;\n\tvar qualityfilters = {};\n\tif (!DataSet) {\n\t\tDataSet = _this.DataSet;\n\t}\n\tif (!DataSet.getArray || DataSet.getArray().length === 0) {\n\t\tconsole.zwarn('empty dataset');\n\t\treturn qualityfilters;\n\t}\n\n\t_.each(DataSet.fields, function (propiedadObj, propiedad) {\n\n\t\t//console.zlog(propiedadObj, propiedad); return;\n\t\tif (propiedadObj && propiedadObj.value) {\n\t\t\tvar arraypropiedad = _.map(DataSet.getArray(), function (element) {\n\t\t\t\treturn element.get ? element.get(propiedadObj.value) : element[propiedadObj.value]; // || element['properties']['gse_preponderante'];\n\t\t\t});\n\n\t\t\tif (DataSet.backend_grouped) {\n\t\t\t\tarraypropiedad = _.flatten(arraypropiedad);\n\t\t\t}\n\t\t\tvar registros_numericos = _.filter(arraypropiedad, Number),\n\t\t\t\tregistros_totales = _.compact(arraypropiedad);\n\n\t\t\t// si menos de la mitad de los registros son numéricos\n\t\t\tif (registros_numericos.length < registros_totales.length / 2) {\n\t\t\t\t/*console.zdebug('QUALITYFILTERS ES NO NUMERICO', {\n\t\t\t\t\t\tpropiedad: propiedadObj.value,\n\t\t\t\t\t\tregistros_numericos: registros_numericos,\n\t\t\t\t\t\tregistros_totales: registros_totales,\n\t\t\t\t\t\t//arraypropiedad: arraypropiedad,\n\t\t\t\t\t});*/\n\n\t\t\t\tvar data = _.map(_.groupBy(arraypropiedad), function (c, d) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tname: d,\n\t\t\t\t\t\tcount: c.length\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t\tqualityfilters[propiedad] = {\n\t\t\t\t\tlabel: propiedadObj.label ? propiedadObj.label : propiedad,\n\t\t\t\t\tvalue: propiedadObj.value ? propiedadObj.value : propiedad,\n\t\t\t\t\tdata: data\n\t\t\t\t};\n\n\t\t\t} else {\n\t\t\t\t//delete(DataSet.qualityfilters[propiedad]);\n\t\t\t\t/*console.zdebug('QUALITYFILTERS ES NUMERICO', {\n\t\t\t\t\t\tpropiedad: propiedadObj.value,\n\t\t\t\t\t\tregistros_numericos: registros_numericos,\n\t\t\t\t\t\tregistros_totales: registros_totales,\n\t\t\t\t\t\t//arraypropiedad: arraypropiedad,\n\t\t\t\t\t});*/\n\n\t\t\t}\n\t\t}\n\t});\n\tDataSet.qualityfilters = qualityfilters;\n\t//console.zdebug('DataSet qualityfilters are', qualityfilters);\n\treturn qualityfilters;\n};\n\n/**\n * Synchronous:  Recorre una colección y devuelve sus campos numéricos\n * @param  {gmaps.FeatureCollection | gmaps.MVCArray | gmaps.Data} [DataSet] la colección a recorrer\n * si no se especifica, usará el DataSet asignado al instanciar.\n * @return {Object}    Los campos numéricos del Dataset\n */\nCollectionUtils.prototype.findQuantityFields = function (DataSet) {\n\tvar _this = this,\n\t\tquantityfilters = {\n\t\t\tcount: {\n\t\t\t\tvalue: 'count',\n\t\t\t\tlabel: 'count',\n\t\t\t\tmin: 1,\n\t\t\t\tmax: 1\n\t\t\t}\n\t\t};\n\tif (!DataSet) {\n\t\tDataSet = _this.DataSet;\n\t}\n\n\tif (!DataSet.getArray || !DataSet.getArray() || DataSet.getArray().length === 0) {\n\t\t//console.zdebug('empty dataset');\n\t\treturn quantityfilters;\n\t}\n\n\t_.each(DataSet.fields, function (propiedadObj, propiedad) {\n\t\tif (propiedadObj && propiedadObj.value !== null && propiedadObj.value !== undefined) {\n\t\t\tvar arraypropiedad = _.map(DataSet.getArray(), function (element) {\n\t\t\t\tif (element.get) {\n\t\t\t\t\treturn element.get(propiedadObj.value);\n\t\t\t\t} else if (element.properties) {\n\t\t\t\t\treturn element.properties[propiedadObj.value];\n\t\t\t\t} else {\n\t\t\t\t\treturn element[propiedadObj.value];\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (DataSet.backend_grouped) {\n\t\t\t\tarraypropiedad = _.flatten(arraypropiedad);\n\t\t\t}\n\n\t\t\tvar registros_numericos = _.filter(arraypropiedad, Number),\n\t\t\t\tregistros_totales = _.compact(arraypropiedad);\n\n\t\t\t// si al menos un quinto de los registros son numéricos para esta propiedad\n\t\t\tif (registros_numericos.length > registros_totales.length / 5) {\n\n\t\t\t\t/*console.zdebug('QUANTITYFILTERS: NUMERICO', {\n\t\t\t\t\t\tpropiedad: propiedadObj.value,\n\t\t\t\t\t\tregistros_numericos: registros_numericos,\n\t\t\t\t\t\tregistros_totales: registros_totales,\n\t\t\t\t\t\t//arraypropiedad: arraypropiedad,\n\t\t\t\t\t});*/\n\n\t\t\t\tvar localmin = Number(_.min(_.filter(arraypropiedad, Number))),\n\t\t\t\t\tlocalmax = Number(_.max(_.filter(arraypropiedad, Number)));\n\n\t\t\t\tquantityfilters[propiedad] = {\n\t\t\t\t\tmin: Math.min(localmin, localmax),\n\t\t\t\t\tmax: Math.max(localmin, localmax),\n\t\t\t\t\tlabel: propiedadObj.label ? propiedadObj.label : propiedad,\n\t\t\t\t\tvalue: propiedadObj.value ? propiedadObj.value : propiedad\n\t\t\t\t};\n\n\t\t\t} else {\n\t\t\t\t/*console.zdebug('QUANTITYFILTERS: NO NUMERICO', {\n\t\t\t\t\t\tpropiedad: propiedadObj.value,\n\t\t\t\t\t\tregistros_numericos: registros_numericos,\n\t\t\t\t\t\tregistros_totales: registros_totales,\n\t\t\t\t\t\t//arraypropiedad: arraypropiedad,\n\t\t\t\t\t});*/\n\t\t\t\t//delete(DataSet.quantityfilters[propiedad]);\n\t\t\t}\n\n\t\t} else {\n\t\t\t//console.zlog('Not value', propiedad, propiedadObj);\n\t\t}\n\t});\n\n\tDataSet.quantityfilters = quantityfilters;\n\t//console.zdebug('DataSet quantityfilters are', quantityfilters);\n\n\treturn quantityfilters;\n};\n\n/**\n * Asynchronous: traverses the collection discriminating each field as quantityfilter or qualityfilder\n * @return {Promise}    A promise that resolves as a hash {qualityfilters,quantityfilters}\n */\nCollectionUtils.prototype.discriminateFields = function () {\n\tvar _this = this,\n\t\tqualityfilters = {},\n\t\tquantityfilters = {\n\t\t\tcount: {\n\t\t\t\tvalue: 'count',\n\t\t\t\tlabel: 'count',\n\t\t\t\tmin: 1,\n\t\t\t\tmax: 1\n\t\t\t}\n\t\t},\n\t\tDataSet = _this.DataSet;\n\n\tif (!DataSet.getArray || DataSet.getArray().length === 0) {\n\t\tconsole.zwarn('empty dataset');\n\t\treturn Promise.resolve({\n\t\t\tquantityfilters: quantityfilters,\n\t\t\tqualityfilters: qualityfilters\n\t\t});\n\t}\n\treturn new Promise(function (resolve, reject) {\n\n\t\t_.each(DataSet.fields, function (propiedadObj, propiedad) {\n\t\t\tif (propiedadObj && propiedadObj.value !== null && propiedadObj.value !== undefined) {\n\t\t\t\tvar arraypropiedad = _.map(DataSet.getArray(), function (element) {\n\t\t\t\t\tif (element.get) {\n\t\t\t\t\t\treturn element.get(propiedadObj.value);\n\t\t\t\t\t} else if (element.properties) {\n\t\t\t\t\t\treturn element.properties[propiedadObj.value];\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn element[propiedadObj.value];\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif (DataSet.backend_grouped) {\n\t\t\t\t\tarraypropiedad = _.flatten(arraypropiedad);\n\t\t\t\t}\n\n\t\t\t\tvar registros_numericos = _.filter(arraypropiedad, Number),\n\t\t\t\t\tregistros_totales = _.compact(arraypropiedad);\n\n\t\t\t\t// si al menos un quinto de los registros son numéricos para esta propiedad\n\t\t\t\tif (registros_numericos.length > registros_totales.length / 5) {\n\n\t\t\t\t\tvar localmin = Number(_.min(_.filter(arraypropiedad, Number))),\n\t\t\t\t\t\tlocalmax = Number(_.max(_.filter(arraypropiedad, Number)));\n\n\t\t\t\t\tquantityfilters[propiedad] = {\n\t\t\t\t\t\tmin: Math.min(localmin, localmax),\n\t\t\t\t\t\tmax: Math.max(localmin, localmax),\n\t\t\t\t\t\tlabel: propiedadObj.label ? propiedadObj.label : propiedad,\n\t\t\t\t\t\tvalue: propiedadObj.value ? propiedadObj.value : propiedad\n\t\t\t\t\t};\n\n\t\t\t\t} else {\n\t\t\t\t\tvar data = _.map(_.groupBy(arraypropiedad), function (c, d) {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tname: d,\n\t\t\t\t\t\t\tcount: c.length\n\t\t\t\t\t\t};\n\t\t\t\t\t});\n\t\t\t\t\tqualityfilters[propiedad] = {\n\t\t\t\t\t\tlabel: propiedadObj.label ? propiedadObj.label : propiedad,\n\t\t\t\t\t\tvalue: propiedadObj.value ? propiedadObj.value : propiedad,\n\t\t\t\t\t\tdata: data\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t}\n\t\t});\n\n\t\tDataSet.quantityfilters = quantityfilters;\n\t\tDataSet.qualityfilters = qualityfilters;\n\t\t//console.zdebug('DataSet qualityfilters are', qualityfilters);\n\t\tresolve({\n\t\t\tquantityfilters: quantityfilters,\n\t\t\tqualityfilters: qualityfilters\n\t\t});\n\n\t});\n};\n\nexport {\n\tCollectionUtils\n};\n","export var colorset = {\n\t\"polygon_mycolor\": {\n\t\t\"rows\": 4,\n\t\t\"cols\": 9,\n\t\t\"subThemeColors\": [\"f2f2f2\", \"ddd9c3\", \"c6d9f0\", \"dbe5f1\", \"f2dcdb\", \"ebf1dd\", \"e5e0ec\", \"dbeef3\", \"fdeada\", \"d8d8d8\", \"c4bd97\", \"8db3e2\", \"b8cce4\", \"e5b9b7\", \"d7e3bc\",\n\t\t\t\"ccc1d9\",\n\t\t\t\"b7dde8\", \"fbd5b5\", \"bfbfbf\", \"938953\", \"548dd4\", \"95b3d7\", \"d99694\", \"c3d69b\", \"b2a2c7\", \"92cddc\", \"fac08f\", \"a5a5a5\", \"494429\", \"17365d\", \"366092\", \"953734\", \"76923c\",\n\t\t\t\"5f497a\", \"31859b\", \"e36c09\", \"7f7f7f\", \"1d1b10\", \"0f243e\", \"244061\", \"632423\", \"4f6128\", \"3f3151\", \"205867\", \"974806\"\n\t\t]\n\t},\n\t\"marker_mycolor\": {\n\t\t\"rows\": 4,\n\t\t\"cols\": 8,\n\t\t\"subThemeColors\": [\"000099\", \"990099\", \"990000\", \"FF3300\", \"333300\", \"006600\", \"006666\", \"666666\", \"0000CC\", \"CC00CC\", \"CC0000\", \"FF6600\", \"666600\", \"66BB66\", \"009999\",\n\t\t\t\"999999\",\n\t\t\t\"0000FF\", \"AA88CC\", \"FF0000\", \"FF9900\", \"CCCC00\", \"00CC00\", \"00CCCC\", \"CCCCCC\", \"5599CC\", \"CCBBDD\", \"FFAAAA\", \"FFCC99\", \"FFFF00\", \"AAEEAA\", \"00FFFF\", \"CCDDEE\"\n\t\t]\n\t},\n\t\"gradient_mycolor\": {\n\t\t\"rows\": 6,\n\t\t\"cols\": 8,\n\t\t\"subThemeColors\": [\n\t\t\t[\"brown\", [\n\t\t\t\t\"hsla(50,48%,41%,0.1)\",\n\t\t\t\t\"hsla(64,60%,82%,0.7)\",\n\t\t\t\t\"hsla(62,60%,80%,0.8)\",\n\t\t\t\t\"hsla(60,60%,78%,0.9)\",\n\t\t\t\t\"hsl(58,60%,76%)\",\n\t\t\t\t\"hsl(56,60%,74%)\",\n\t\t\t\t\"hsl(54,60%,72%)\",\n\t\t\t\t\"hsl(52,60%,70%)\",\n\t\t\t\t\"hsl(49,60%,68%)\",\n\t\t\t\t\"hsl(46,60%,66%)\",\n\t\t\t\t\"hsl(43,60%,64%)\",\n\t\t\t\t\"hsl(40,60%,62%)\",\n\t\t\t\t\"hsl(37,60%,60%)\",\n\t\t\t\t\"hsl(34,60%,58%)\",\n\t\t\t\t\"hsl(31,61%,56%)\",\n\t\t\t\t\"hsl(28,62%,54%)\",\n\t\t\t\t\"hsl(25,63%,52%)\",\n\t\t\t\t\"hsl(22,64%,50%)\",\n\t\t\t\t\"hsl(19,65%,48%)\",\n\t\t\t\t\"hsl(16,66%,46%)\",\n\t\t\t\t\"hsl(13,67%,44%)\",\n\t\t\t\t\"hsl(10,68%,42%)\",\n\t\t\t\t\"hsl(7,69%,40%)\",\n\t\t\t\t\"hsl(4,70%,38%)\",\n\t\t\t\t\"hsl(1,71%,36%)\",\n\t\t\t\t\"hsl(358,72%,34%)\",\n\t\t\t\t\"hsl(355,73%,32%)\",\n\t\t\t\t\"hsl(352,74%,30%)\",\n\t\t\t\t\"hsl(349,75%,28%)\",\n\t\t\t\t\"hsl(346,76%,26%)\",\n\t\t\t\t\"hsl(343,77%,24%)\"\n\t\t\t]],\n\n\t\t\t[\"green\", [\n\t\t\t\t\"hsla(50,48%,41%,0.1)\",\n\t\t\t\t\"hsla(50,60%,82%,0.7)\",\n\t\t\t\t\"hsla(53,60%,80%,0.8)\",\n\t\t\t\t\"hsla(56,60%,78%,0.9)\",\n\t\t\t\t\"hsl(59,60%,76%)\",\n\t\t\t\t\"hsl(62,60%,74%)\",\n\t\t\t\t\"hsl(65,60%,72%)\",\n\t\t\t\t\"hsl(68,60%,70%)\",\n\t\t\t\t\"hsl(71,60%,68%)\",\n\t\t\t\t\"hsl(74,60%,66%)\",\n\t\t\t\t\"hsl(77,60%,64%)\",\n\t\t\t\t\"hsl(80,60%,62%)\",\n\t\t\t\t\"hsl(83,60%,60%)\",\n\t\t\t\t\"hsl(86,60%,58%)\",\n\t\t\t\t\"hsl(89,61%,56%)\",\n\t\t\t\t\"hsl(92,62%,54%)\",\n\t\t\t\t\"hsl(95,63%,52%)\",\n\t\t\t\t\"hsl(98,64%,50%)\",\n\t\t\t\t\"hsl(101,65%,48%)\",\n\t\t\t\t\"hsl(104,66%,46%)\",\n\t\t\t\t\"hsl(106,67%,44%)\",\n\t\t\t\t\"hsl(108,68%,42%)\",\n\t\t\t\t\"hsl(110,69%,40%)\",\n\t\t\t\t\"hsl(112,70%,38%)\",\n\t\t\t\t\"hsl(114,71%,36%)\",\n\t\t\t\t\"hsl(116,72%,34%)\",\n\t\t\t\t\"hsl(118,73%,32%)\",\n\t\t\t\t\"hsl(120,74%,30%)\",\n\t\t\t\t\"hsl(122,75%,28%)\",\n\t\t\t\t\"hsl(124,76%,26%)\",\n\t\t\t\t\"hsl(126,77%,24%)\"\n\n\t\t\t]],\n\t\t\t[\"blue\", [\n\t\t\t\t\"hsla(260,8%,64%,0.1)\",\n\t\t\t\t\"hsla(185,60%,82%,0.7)\",\n\t\t\t\t\"hsla(186,60%,80%,0.8)\",\n\t\t\t\t\"hsla(187,60%,78%,0.9)\",\n\t\t\t\t\"hsl(188,60%,76%)\",\n\t\t\t\t\"hsl(189,60%,74%)\",\n\t\t\t\t\"hsl(190,60%,72%)\",\n\t\t\t\t\"hsl(191,60%,70%)\",\n\t\t\t\t\"hsl(192,60%,68%)\",\n\t\t\t\t\"hsl(193,60%,66%)\",\n\t\t\t\t\"hsl(194,60%,64%)\",\n\t\t\t\t\"hsl(195,60%,62%)\",\n\t\t\t\t\"hsl(196,60%,60%)\",\n\t\t\t\t\"hsl(197,60%,58%)\",\n\t\t\t\t\"hsl(198,61%,56%)\",\n\t\t\t\t\"hsl(199,62%,54%)\",\n\t\t\t\t\"hsl(200,63%,52%)\",\n\t\t\t\t\"hsl(201,64%,50%)\",\n\t\t\t\t\"hsl(202,65%,48%)\",\n\t\t\t\t\"hsl(203,66%,46%)\",\n\t\t\t\t\"hsl(204,67%,44%)\",\n\t\t\t\t\"hsl(205,68%,42%)\",\n\t\t\t\t\"hsl(206,69%,40%)\",\n\t\t\t\t\"hsl(207,70%,38%)\",\n\t\t\t\t\"hsl(208,71%,36%)\",\n\t\t\t\t\"hsl(209,72%,34%)\",\n\t\t\t\t\"hsl(210,73%,32%)\",\n\t\t\t\t\"hsl(211,74%,30%)\",\n\t\t\t\t\"hsl(212,75%,28%)\",\n\t\t\t\t\"hsl(213,76%,26%)\",\n\t\t\t\t\"hsl(214,77%,24%)\"\n\t\t\t]],\n\n\t\t\t[\"purple\", [\n\t\t\t\t\"hsla(204,13%,62%,0.1)\",\n\t\t\t\t\"hsla(190,47%,82%,0.7)\",\n\t\t\t\t\"hsla(194,48%,80%,0.8)\",\n\t\t\t\t\"hsla(198,49%,78%,0.9)\",\n\t\t\t\t\"hsl(202,50%,76%)\",\n\t\t\t\t\"hsl(206,51%,74%)\",\n\t\t\t\t\"hsl(210,52%,72%)\",\n\t\t\t\t\"hsl(214,53%,70%)\",\n\t\t\t\t\"hsl(218,54%,68%)\",\n\t\t\t\t\"hsl(222,55%,66%)\",\n\t\t\t\t\"hsl(226,56%,64%)\",\n\t\t\t\t\"hsl(230,57%,62%)\",\n\t\t\t\t\"hsl(234,58%,60%)\",\n\t\t\t\t\"hsl(238,59%,58%)\",\n\t\t\t\t\"hsl(242,61%,56%)\",\n\t\t\t\t\"hsl(246,62%,54%)\",\n\t\t\t\t\"hsl(250,63%,52%)\",\n\t\t\t\t\"hsl(254,64%,50%)\",\n\t\t\t\t\"hsl(258,65%,48%)\",\n\t\t\t\t\"hsl(262,66%,46%)\",\n\t\t\t\t\"hsl(266,67%,44%)\",\n\t\t\t\t\"hsl(270,68%,42%)\",\n\t\t\t\t\"hsl(274,69%,40%)\",\n\t\t\t\t\"hsl(278,70%,38%)\",\n\t\t\t\t\"hsl(282,71%,36%)\",\n\t\t\t\t\"hsl(286,72%,34%)\",\n\t\t\t\t\"hsl(290,73%,32%)\",\n\t\t\t\t\"hsl(294,74%,30%)\",\n\t\t\t\t\"hsl(298,75%,28%)\",\n\t\t\t\t\"hsl(302,76%,26%)\",\n\t\t\t\t\"hsl(306,77%,24%)\"\n\t\t\t]],\n\n\t\t\t[\"greenred\", [\n\t\t\t\t\"hsla(120,52%,45%,0.1)\",\n\t\t\t\t\"hsla(120,60%,50%,0.7)\",\n\t\t\t\t\"hsla(115,60%,59%,0.8)\",\n\t\t\t\t\"hsla(110,60%,50%,0.9)\",\n\t\t\t\t\"hsl(105,60%,51%)\",\n\t\t\t\t\"hsl(100,60%,52%)\",\n\t\t\t\t\"hsl(95,60%,53%)\",\n\t\t\t\t\"hsl(90,60%,54%)\",\n\t\t\t\t\"hsl(85,60%,55%)\",\n\t\t\t\t\"hsl(80,61%,56%)\",\n\t\t\t\t\"hsl(75,62%,57%)\",\n\t\t\t\t\"hsl(70,63%,58%)\",\n\t\t\t\t\"hsl(67,64%,59%)\",\n\t\t\t\t\"hsl(64,65%,58%)\",\n\t\t\t\t\"hsl(59,65%,56%)\",\n\t\t\t\t\"hsl(56,65%,54%)\",\n\t\t\t\t\"hsl(53,65%,52%)\",\n\t\t\t\t\"hsl(50,65%,50%)\",\n\t\t\t\t\"hsl(47,65%,50%)\",\n\t\t\t\t\"hsl(44,66%,50%)\",\n\t\t\t\t\"hsl(41,67%,50%)\",\n\t\t\t\t\"hsl(38,68%,50%)\",\n\t\t\t\t\"hsl(35,69%,50%)\",\n\t\t\t\t\"hsl(32,70%,50%)\",\n\t\t\t\t\"hsl(28,71%,50%)\",\n\t\t\t\t\"hsl(24,72%,50%)\",\n\t\t\t\t\"hsl(20,73%,50%)\",\n\t\t\t\t\"hsl(16,74%,50%)\",\n\t\t\t\t\"hsl(12,75%,50%)\",\n\t\t\t\t\"hsl(8,76%,50%)\",\n\t\t\t\t\"hsl(0,77%,50%)\"\n\t\t\t]],\n\n\t\t\t[\"divergent\", [\n\t\t\t\t\"hsla(120,52%,45%,0.1)\",\n\t\t\t\t\"hsl(12,70%,50%)\",\n\t\t\t\t\"hsl(24,70%,50%)\",\n\t\t\t\t\"hsl(36,70%,50%)\",\n\t\t\t\t\"hsl(48,70%,50%)\",\n\t\t\t\t\"hsl(60,70%,50%)\",\n\t\t\t\t\"hsl(72,70%,50%)\",\n\t\t\t\t\"hsl(84,70%,50%)\",\n\t\t\t\t\"hsl(96,70%,50%)\",\n\t\t\t\t\"hsl(108,70%,50%)\",\n\t\t\t\t\"hsl(120,70%,50%)\",\n\t\t\t\t\"hsl(132,70%,50%)\",\n\t\t\t\t\"hsl(144,70%,50%)\",\n\t\t\t\t\"hsl(156,70%,50%)\",\n\t\t\t\t\"hsl(168,70%,50%)\",\n\t\t\t\t\"hsl(180,70%,50%)\",\n\t\t\t\t\"hsl(192,70%,50%)\",\n\t\t\t\t\"hsl(204,70%,50%)\",\n\t\t\t\t\"hsl(216,70%,50%)\",\n\t\t\t\t\"hsl(228,70%,50%)\",\n\t\t\t\t\"hsl(240,70%,50%)\",\n\t\t\t\t\"hsl(252,70%,50%)\",\n\t\t\t\t\"hsl(264,70%,50%)\",\n\t\t\t\t\"hsl(276,70%,50%)\",\n\t\t\t\t\"hsl(288,70%,50%)\",\n\t\t\t\t\"hsl(300,70%,50%)\",\n\t\t\t\t\"hsl(312,70%,50%)\",\n\t\t\t\t\"hsl(324,70%,50%)\",\n\t\t\t\t\"hsl(336,70%,50%)\",\n\t\t\t\t\"hsl(348,70%,50%)\",\n\t\t\t\t\"hsl(0,70%,50%)\"\n\t\t\t]],\n\t\t\t[\"venta\", [\n\t\t\t\t\"rgba(233,255,233,0.1)\",\n\t\t\t\t\"#FF0000\",\n\t\t\t\t\"#FF0000\",\n\t\t\t\t\"#FF0000\",\n\t\t\t\t\"#FF0000\",\n\t\t\t\t\"#FF0000\",\n\t\t\t\t\"#FF0000\",\n\t\t\t\t\"#FF0000\",\n\t\t\t\t\"#FF0000\",\n\t\t\t\t\"#FF0000\",\n\t\t\t\t\"#FF0000\",\n\t\t\t\t\"#FF0000\",\n\t\t\t\t\"#FF0000\",\n\t\t\t\t\"#FFDB14\",\n\t\t\t\t\"#FFDB14\",\n\t\t\t\t\"#FFDB14\",\n\t\t\t\t\"#FFDB14\",\n\t\t\t\t\"#FFDB14\",\n\t\t\t\t\"#FFDB14\",\n\t\t\t\t\"#FFDB14\",\n\t\t\t\t\"#008000\",\n\t\t\t\t\"#008000\",\n\t\t\t\t\"#008000\",\n\t\t\t\t\"#008000\",\n\t\t\t\t\"#008000\",\n\t\t\t\t\"#008000\",\n\t\t\t\t\"#008000\",\n\t\t\t\t\"#008000\",\n\t\t\t\t\"#008000\",\n\t\t\t\t\"#008000\",\n\t\t\t\t\"#008000\"\n\t\t\t]],\n\n\t\t\t[\"stock\", [\n\t\t\t\t\"rgba(233,255,233,0.1)\",\n\t\t\t\t\"#FF0000\",\n\t\t\t\t\"#FF0000\",\n\t\t\t\t\"#FF0000\",\n\t\t\t\t\"#FF0000\",\n\t\t\t\t\"#FF0000\",\n\t\t\t\t\"#FF0000\",\n\t\t\t\t\"#FF0000\",\n\t\t\t\t\"#FF0000\",\n\t\t\t\t\"#FF0000\",\n\t\t\t\t\"#008000\",\n\t\t\t\t\"#008000\",\n\t\t\t\t\"#008000\",\n\t\t\t\t\"#008000\",\n\t\t\t\t\"#008000\",\n\t\t\t\t\"#008000\",\n\t\t\t\t\"#008000\",\n\t\t\t\t\"#008000\",\n\t\t\t\t\"#008000\",\n\t\t\t\t\"#008000\",\n\t\t\t\t\"#7C0000\",\n\t\t\t\t\"#7C0000\",\n\t\t\t\t\"#7C0000\",\n\t\t\t\t\"#7C0000\",\n\t\t\t\t\"#7C0000\",\n\t\t\t\t\"#7C0000\",\n\t\t\t\t\"#7C0000\",\n\t\t\t\t\"#7C0000\",\n\t\t\t\t\"#7C0000\",\n\t\t\t\t\"#7C0000\",\n\t\t\t\t\"#7C0000\"\n\t\t\t]]\n\t\t],\n\t\t\"RGBColors\": [\n\t\t\t[\"brown\", [\"rgba(155,155,55,0.1)\", \"rgba(255,255,204,0.6)\", \"rgba(255,255,204,0.6)\", \"rgb(255,237,160)\", \"rgb(254,217,118)\", \"rgb(254,217,118)\", \"rgb(254,178,76)\",\n\t\t\t\t\"rgb(254,178,76)\", \"rgb(253,141,60)\", \"rgb(253,141,60)\", \"rgb(252,78,42)\", \"rgb(252,78,42)\", \"rgb(227,26,28)\", \"rgb(227,26,28)\", \"rgb(177,0,38)\", \"rgb(177,0,38)\"\n\t\t\t]],\n\t\t\t[\"green\", [\"rgba(155,155,55,0.1)\", \"rgba(247,252,245,0.6)\", \"rgba(247,252,245,0.6)\", \"rgba(229,245,224,0.7)\", \"rgba(199,233,192,0.8)\", \"rgba(199,233,192,0.8)\",\n\t\t\t\t\"rgba(161,217,155,0.9)\", \"rgba(161,217,155,0.9)\", \"rgb(116,196,118)\", \"rgb(116,196,118)\", \"rgb(65,171,93)\", \"rgb(65,171,93)\", \"rgb(35,139,69)\", \"rgb(35,139,69)\",\n\t\t\t\t\"rgb(0,90,50)\", \"rgb(0,90,50)\"\n\t\t\t]],\n\t\t\t[\"blue\", [\"rgba(160,155,170,0.1)\", \"rgba(247,251,255,0.6)\", \"rgba(247,251,255,0.6)\", \"rgb(222,235,247)\", \"rgb(198,219,239)\", \"rgb(198,219,239)\", \"rgb(158,202,225)\",\n\t\t\t\t\"rgb(158,202,225)\", \"rgb(107,174,214)\", \"rgb(107,174,214)\", \"rgb(66,146,198)\", \"rgb(66,146,198)\", \"rgb(33,113,181)\", \"rgb(33,113,181)\", \"rgb(8,69,148)\", \"rgb(8,69,148)\"\n\t\t\t]],\n\t\t\t[\"purple\", [\"rgba(145,160,170,0.1)\", \"rgba(247,252,253,0.6)\", \"rgba(247,252,253,0.6)\", \"rgb(224,236,244)\", \"rgb(191,211,230)\", \"rgb(191,211,230)\", \"rgb(158,188,218)\",\n\t\t\t\t\"rgb(158,188,218)\", \"rgb(140,150,198)\", \"rgb(140,150,198)\", \"rgb(140,107,177)\", \"rgb(140,107,177)\", \"rgb(136,65,157)\", \"rgb(136,65,157)\", \"rgb(110,1,107)\",\n\t\t\t\t\"rgb(110,1,107)\"\n\t\t\t]],\n\t\t\t[\"greenred\", [\"rgba(55,175,55,0.1)\", \"rgba(224,255,224,0.6)\", \"rgba(224,255,224,0.6)\", \"rgba(166,217,106,0.7)\", \"rgba(217,239,139,0.8)\", \"rgba(217,239,139,0.8)\",\n\t\t\t\t\"rgba(246,246,102,0.9)\", \"rgba(246,246,102,0.9)\", \"rgba(254,224,139,1)\", \"rgba(254,224,139,1)\", \"rgba(253,174,97,1)\", \"rgba(253,174,97,1)\", \"rgba(244,109,67,1)\",\n\t\t\t\t\"rgba(244,109,67,1)\", \"rgba(227,40,39,1)\", \"rgba(227,40,39,1)\"\n\t\t\t]],\n\t\t\t[\"divergent\", [\"rgba(200,155,133,0.1)\", \"rgba(178,24,43,0.6)\", \"rgba(178,24,43,0.6)\", \"rgb(214,96,77)\", \"rgb(244,165,130)\", \"rgb(244,165,130)\", \"rgb(253,219,199)\",\n\t\t\t\t\"rgb(253,219,199)\", \"rgb(209,229,240)\", \"rgb(209,229,240)\", \"rgb(146,197,222)\", \"rgb(146,197,222)\", \"rgb(67,147,195)\", \"rgb(67,147,195)\", \"rgb(33,102,172)\",\n\t\t\t\t\"rgb(33,102,172)\"\n\t\t\t]],\n\t\t\t[\"venta\", [\"rgba(233,255,233,0.1)\", \"#FF0000\", \"#FF0000\", \"#FF0000\", \"#FF0000\", \"#FF0000\", \"#FF0000\", \"#FFDB14\", \"#FFDB14\", \"#FFDB14\", \"#008000\", \"#008000\", \"#008000\",\n\t\t\t\t\"#008000\", \"#008000\", \"#008000\"\n\t\t\t]],\n\t\t\t[\"stock\", [\"rgba(233,255,233,0.1)\", \"#FF0000\", \"#FF0000\", \"#FF0000\", \"#FF0000\", \"#008000\", \"#008000\", \"#008000\", \"#008000\", \"#7C0000\", \"#7C0000\", \"#7C0000\", \"#7C0000\",\n\t\t\t\t\"#7C0000\", \"#7C0000\", \"#7C0000\"\n\t\t\t]]\n\t\t]\n\t},\n\t\"filter_mycolor\": {\n\t\t\"rows\": 4,\n\t\t\"cols\": 8,\n\t\t\"subThemeColors\": [\"000066\", \"660066\", \"660000\", \"CC3300\", \"666600\", \"006600\", \"006666\", \"333333\", \"000099\", \"990099\", \"990000\", \"FF3300\", \"999900\", \"009900\", \"009999\",\n\t\t\t\"666666\",\n\t\t\t\"0000CC\", \"CC00CC\", \"CC0000\", \"FF6600\", \"CCCC00\", \"00CC00\", \"00CCCC\", \"999999\", \"0000FF\", \"FF00FF\", \"FF0000\", \"FF9900\", \"FFFF00\", \"00FF00\", \"00FFFF\", \"CCCCCC\"\n\t\t]\n\t}\n};\n"],"names":["compact","array","index","length","resIndex","result","value","padHex","str_in","String","Wicket","Wkt","WKT2Object","WKT","wkt","read","e","console","zlog","obj","toObject","reverseInnerPolygons","warn","loadingcircle","timeout","message","container","theGlobalvars","window","globalvars","containerIds","loadingcircleId","jqContainerLoading","$","preloaderFN","removeContainer","delay","setTimeout","addClass","detach","find","removeEvent","clearTimeout","attr","append","html","Math","max","setModalClass","cls","options","footer","modal","modal_body","modal_footer","removeClass","isArray","Object","prototype","toString","call","spaceString","str","replace","cleanString","strict","cleanstr","toLowerCase","randomname","limit","text","possible","i","charAt","floor","random","getCookie","name","match","root","document","cookie","RegExp","blacklistedfields","CollectionUtils","DataSet","this","type","category","addGeometricBoundaries","element","domid","mapModel","Polygons","each","Polygon","_","template","attributes","findFields","callback","elemento","Promise","resolve","reject","fieldsFound","undefined","fields","isEmpty","uniq","flatten","map","getArray","item","properties","getProperties","keys","finalkeys","chain","reduce","memo","propiedad","label","omit","Model","columns","column","get","findQualityFields","qualityfilters","propiedadObj","arraypropiedad","backend_grouped","registros_numericos","filter","Number","registros_totales","data","groupBy","c","d","count","zwarn","findQuantityFields","quantityfilters","min","localmin","localmax","discriminateFields","defaults","h","s","l","a","getColor","val","range","getColor1","parseHalf","foo","parseInt","darken","stringcolor","factor","darkercolor","fillColor","indexOf","r","g","b","parseHex","hexstring","opacity","darkenfactor","hexcolor","hex","isNaN","parseFloat","substring","strokeColor","join","rgb","parseHSL","hslstring","hslcolor","hslparts","split","hsl","parseRGB","rgbstring","rgbcolor","rgbparts","toDecColor","parsedcolor","IconObject","canvas","markerOpts","url","toDataURL","assign","toJSON","MarkerFactory","createTransparentMarkerIcon","theoptions","scale","fontsize","markerCanvas","color0","color1","createElement","context","getContext","font","width","height","clearRect","deccolor","color","beginPath","shadow","textBaseline","textWidth","measureText","unicodelabel","text_x","shadowOffsetX","shadowOffsetY","shadowBlur","fillStyle","shadowColor","fillText","strokeStyle","strokeText","textmetric","generateTransparentCanvas","google","maps","size","Size","origin","Point","anchor","scaledSize","createFatMarkerIcon","grad","createLinearGradient","anchorX","anchorY","addColorStop","moveTo","arc","PI","lineTo","fill","stroke","generateFatCanvas","createTextMarker","ancho","x","y","cx","cy","rect","generateCanvas","parseColorString","somecolor","original","hue2rgb","p","q","t","round","hslToRGB","rgbToHSL","rgba","hsla","autoIcon","transparent_background","slice","fromCharCode","log","radius","labelvalue","setLineDash","lineWidth","generateClusterCanvas","createClusterIcon","gmaps","comment","beginsWith","endsWith","_wrapped","sub","delimiter","constructor","Array","trim","initializer","wrapVertices","regExes","typeStr","spaces","numeric","comma","parenComma","coord","doubleParenComma","trimParens","ogcTypes","crudeJson","components","fromObject","isCollection","sameCoords","hasOwnProperty","fromJson","deconstruct","isRectangle","config","construct","write","j","k","coords","iring","oring","geometry","coordinates","push","toJson","cs","json","ring","rings","exec","toUpperCase","bbox","concat","merge","prefix","TypeError","matches","base","ingest","apply","test","JSON","parse","pieces","extract","point","multipoint","parts","linestring","multilinestring","polygon","multipolygon","box","geometrycollection","points","multipoints","line","lines","subcomponents","n","x_cord","y_cord","polygons","component","position","LatLng","Marker","arr","editable","path","Polyline","bounds","LatLngBounds","Rectangle","verts","paths","area","polygonIsClockwise","reverse","v","extend","multiFlag","features","sign","tmp","response","lat","lng","vertex","linestrings","spherical","computeSignedArea","getPosition","getPath","getAt","areas","getPaths","abs","lastIndexOf","equals","Circle","getCenter","getRadius","d2r","rlat","rlng","cos","theta","sin","getSouthWest","getNorthEast","getBounds","Data","Feature","getGeometry","LineString","getLength","MultiPoint","MultiLineString","MultiPolygon","GeometryCollection","objects","object","comps","id_selector","preloader","loading","appendTo","colorset","polygon_mycolor","rows","cols","subThemeColors","marker_mycolor","gradient_mycolor","RGBColors","filter_mycolor","self","global","ButtonFactory"],"mappings":"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AU,SAAU,SAAU,SAAU,SAAU,WAGxJE,kBACCJ,KAAQ,EACRC,KAAQ,EACRC,iBACE,SACA,uBACA,uBACA,uBACA,uBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,iBACA,iBACA,iBACA,mBACA,mBACA,mBACA,mBACA,mBACA,sBAGA,SACA,uBACA,uBACA,uBACA,uBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,sBAGA,QACA,uBACA,wBACA,wBACA,wBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,sBAGA,UACA,wBACA,wBACA,wBACA,wBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,sBAGA,YACA,wBACA,wBACA,wBACA,wBACA,mBACA,mBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,iBACA,oBAGA,aACA,wBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,oBAEA,SACA,wBACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,aAGA,SACA,wBACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,aAGFG,YACE,SAAU,uBAAwB,wBAAyB,wBAAyB,mBAAoB,mBAAoB,mBAAoB,kBAChJ,kBAAmB,kBAAmB,kBAAmB,iBAAkB,iBAAkB,iBAAkB,iBAAkB,gBAAiB,mBAElJ,SAAU,uBAAwB,wBAAyB,wBAAyB,wBAAyB,wBAAyB,wBACtI,wBAAyB,wBAAyB,mBAAoB,mBAAoB,iBAAkB,iBAAkB,iBAAkB,iBAChJ,eAAgB,kBAEhB,QAAS,wBAAyB,wBAAyB,wBAAyB,mBAAoB,mBAAoB,mBAAoB,mBAChJ,mBAAoB,mBAAoB,mBAAoB,kBAAmB,kBAAmB,kBAAmB,kBAAmB,gBAAiB,mBAEzJ,UAAW,wBAAyB,wBAAyB,wBAAyB,mBAAoB,mBAAoB,mBAAoB,mBAClJ,mBAAoB,mBAAoB,mBAAoB,mBAAoB,mBAAoB,kBAAmB,kBAAmB,iBAC1I,oBAEA,YAAa,sBAAuB,wBAAyB,wBAAyB,wBAAyB,wBAAyB,wBACxI,wBAAyB,wBAAyB,sBAAuB,sBAAuB,qBAAsB,qBAAsB,qBAC5I,qBAAsB,oBAAqB,uBAE3C,aAAc,wBAAyB,sBAAuB,sBAAuB,iBAAkB,mBAAoB,mBAAoB,mBAC/I,mBAAoB,mBAAoB,mBAAoB,mBAAoB,mBAAoB,kBAAmB,kBAAmB,kBAC1I,qBAEA,SAAU,wBAAyB,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAC5J,UAAW,UAAW,aAEtB,SAAU,wBAAyB,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAC5J,UAAW,UAAW,cAIzBC,gBACCN,KAAQ,EACRC,KAAQ,EACRC,gBAAmB,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAC9J,SACA,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,YF/SrJtW,KAAuB,iBAAR2W,MAAoBA,KAAKA,OAASA,MAAQA,MAC1C,iBAAVC,QAAsBA,OAAOA,SAAWA,QAAUA,kBAuH1DC,cAAeA,cACfjb,IAAKA,IACLD,OAAQA,OACRE,WAAYA,WACZW,cAAeA,cACf0Z,SAAUA,SACVjY,cAAeA,cACfQ,QAASA,QACTK,YAAaA,YACbG,YAAaA,YACbI,WAAYA,WACZQ,UAAWA"}