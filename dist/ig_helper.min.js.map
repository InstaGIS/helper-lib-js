{"version":3,"file":"ig_helper.min.js","sources":["../node_modules/ig_markerfactory/dist/markerfactory.es6.js","../src/wicket_helper.js","../src/loadingcircle.js","../src/ig_helper.js","../src/collection_helper.js","../src/colorset.js"],"sourcesContent":["function hslaString(hslcolor) {\n\tif (hslcolor.a !== undefined) {\n\t\treturn (\n\t\t\t\"hsla(\" +\n\t\t\thslcolor.h +\n\t\t\t\",\" +\n\t\t\thslcolor.s +\n\t\t\t\"%,\" +\n\t\t\thslcolor.l +\n\t\t\t\"%,\" +\n\t\t\tparseFloat(hslcolor.a, 10) +\n\t\t\t\")\"\n\t\t);\n\t}\n\treturn \"hsl(\" + hslcolor.h + \",\" + hslcolor.s + \"%,\" + hslcolor.l + \"%)\";\n}\n\nfunction rgbaString(hexcolor) {\n\tif (hexcolor.a !== undefined) {\n\t\treturn (\n\t\t\t\"rgba(\" +\n\t\t\thexcolor.r +\n\t\t\t\",\" +\n\t\t\thexcolor.g +\n\t\t\t\",\" +\n\t\t\thexcolor.b +\n\t\t\t\",\" +\n\t\t\tparseFloat(hexcolor.a, 10) +\n\t\t\t\")\"\n\t\t);\n\t}\n\treturn \"rgb(\" + hexcolor.r + \",\" + hexcolor.g + \",\" + hexcolor.b + \")\";\n}\n\nfunction parseHalf(foo) {\n\treturn parseInt(foo / 2, 10);\n}\n\nfunction compact(array) {\n\tvar index = -1,\n\t\tlength = array ? array.length : 0,\n\t\tresIndex = 0,\n\t\tresult = [];\n\n\twhile (++index < length) {\n\t\tvar value = array[index];\n\t\tif (value) {\n\t\t\tresult[resIndex++] = value;\n\t\t}\n\t}\n\treturn result;\n}\n\nfunction omit(obj, fn) {\n\tvar target = {};\n\tfor (var i in obj) {\n\t\tif (fn(i)) {\n\t\t\tcontinue;\n\t\t}\n\t\tif (!Object.prototype.hasOwnProperty.call(obj, i)) {\n\t\t\tcontinue;\n\t\t}\n\t\ttarget[i] = obj[i];\n\t}\n\treturn target;\n}\n\nfunction serializeOptions(options) {\n\tif (typeof options !== \"object\") {\n\t\treturn null;\n\t}\n\tvar cleanOptions = omit(options, function(prop) {\n\t\t\treturn prop.indexOf(\"gm_\") === 0;\n\t\t}),\n\t\tsortedOpts = Object.entries(cleanOptions)\n\t\t\t.filter(function(item) {\n\t\t\t\treturn (\n\t\t\t\t\ttypeof item[1] !== \"function\" &&\n\t\t\t\t\ttypeof item[1] !== \"object\" &&\n\t\t\t\t\titem[1] !== null &&\n\t\t\t\t\ttypeof item[1] !== \"undefined\"\n\t\t\t\t);\n\t\t\t})\n\t\t\t.sort();\n\treturn JSON.stringify(sortedOpts);\n}\n\nfunction IconObject(url, fillColor, markerOpts) {\n\tthis.url = url;\n\tthis.fillColor = fillColor;\n\tthis.markerOpts = markerOpts;\n\tObject.assign(this, markerOpts);\n\tif (window && window.google && window.google.maps) {\n\t\tthis.origin = new google.maps.Point(\n\t\t\tthis.markerOpts.origin.x,\n\t\t\tthis.markerOpts.origin.y\n\t\t);\n\t\tthis.anchor = new google.maps.Point(\n\t\t\tthis.markerOpts.anchor.x,\n\t\t\tthis.markerOpts.anchor.y\n\t\t);\n\t\tthis.size = new google.maps.Size(\n\t\t\tthis.markerOpts.size.width,\n\t\t\tthis.markerOpts.size.height\n\t\t);\n\t\tthis.scaledSize = new google.maps.Size(\n\t\t\tthis.markerOpts.scaledSize.width,\n\t\t\tthis.markerOpts.scaledSize.height\n\t\t);\n\t}\n\treturn this;\n}\n\nIconObject.prototype.toJSON = function() {\n\tvar serialized = omit(this.markerOpts, function(prop) {\n\t\treturn prop.indexOf(\"gm_\") === 0 || prop === \"url\";\n\t});\n\tserialized.fillColor = this.fillColor;\n\treturn serialized;\n};\n\n/** global: google */\n\nvar generateClusterCanvas = function(options) {\n    var canvas = options.canvas || document.createElement(\"canvas\"),\n        anchorX = 27,\n        anchorY = 53,\n        radius = anchorX - 9,\n        color1,\n        font = options.font || \"fontello\",\n        fontsize = options.fontsize || 14,\n        context = canvas.getContext(\"2d\");\n\n    canvas.width = anchorX * 2;\n    canvas.height = anchorY + 1;\n\n    context.clearRect(0, 0, canvas.width, canvas.height);\n    context.moveTo(anchorX, anchorY);\n\n    var labelvalue = parseInt(options.label, 10);\n    if (labelvalue < 10) {\n        color1 = \"orange\";\n        fontsize = 14;\n    } else if (labelvalue < 30) {\n        color1 = \"red\";\n        fontsize = 15;\n    } else {\n        color1 = \"purple\";\n        fontsize = 16;\n    }\n    if (labelvalue > 99) {\n        radius = radius + 3;\n        context.setLineDash([5, 5]);\n        context.beginPath();\n        context.arc(\n            anchorX,\n            2 + 0.5 * anchorY,\n            radius + 7,\n            0,\n            2 * Math.PI,\n            false\n        );\n        context.fillStyle = \"transparent\";\n        context.strokeStyle = color1;\n        context.lineWidth = 2;\n        context.fill();\n        context.stroke();\n    }\n\n    context.setLineDash([5, 5]);\n    context.beginPath();\n    context.arc(anchorX, 2 + 0.5 * anchorY, radius + 2, 0, 2 * Math.PI, false);\n    context.fillStyle = \"transparent\";\n    context.strokeStyle = color1;\n    context.lineWidth = 2;\n    context.fill();\n    context.stroke();\n\n    // Círculo blanco\n    context.setLineDash([5, 0]);\n    context.beginPath();\n    context.arc(anchorX, 2 + 0.5 * anchorY, radius - 3, 0, 2 * Math.PI, false);\n    context.fillStyle = \"white\";\n    context.strokeStyle = color1;\n    context.lineWidth = 4;\n    context.fill();\n    context.stroke();\n\n    context.beginPath();\n\n    context.font = \"normal normal normal \" + fontsize + \"px \" + font;\n    context.fillStyle = \"#333\";\n    context.textBaseline = \"top\";\n\n    var textWidth = context.measureText(options.label),\n        text_x = options.label,\n        label_x = Math.floor(canvas.width / 2 - textWidth.width / 2),\n        label_y = 1 + Math.floor(canvas.height / 2 - fontsize / 2);\n\n    // centre the text.\n    context.fillText(text_x, label_x, label_y);\n\n    return canvas;\n};\nfunction createClusterIcon(theoptions) {\n    theoptions.scale = theoptions.scale || 1;\n    var markerCanvas = generateClusterCanvas(theoptions),\n        markerOpts = {},\n        scale = theoptions.scale;\n\n    Object.assign(markerOpts, theoptions);\n\n    Object.assign(markerOpts, {\n        origin: { x: 0, y: 0 },\n        anchor: { x: 27 * scale, y: 24 * scale },\n        size: { width: 54, height: 48 },\n        scaledSize: { width: 54 * scale, height: 48 * scale }\n    });\n\n    var url = markerCanvas.toDataURL(),\n        fillColor = markerCanvas.fillColor,\n        iconObj = new IconObject(url, fillColor, markerOpts);\n\n    return iconObj;\n}\n\n/** global: google, r, g, b */\n\nfunction parseHex(hexstring, opacity, darkenfactor) {\n    var hexcolor = {\n        hex: hexstring\n    };\n    darkenfactor = darkenfactor || 1;\n\n    hexstring = hexstring.replace(\"#\", \"\");\n    if (hexstring.length === 3) {\n        hexstring =\n            hexstring[0] +\n            hexstring[0] +\n            hexstring[1] +\n            hexstring[1] +\n            hexstring[2] +\n            hexstring[2];\n    }\n    if (isNaN(parseFloat(opacity, 10))) {\n        opacity = 1;\n    }\n\n    hexcolor.r = parseInt(\n        darkenfactor * parseInt(hexstring.substring(0, 2), 16),\n        10\n    );\n    hexcolor.g = parseInt(\n        darkenfactor * parseInt(hexstring.substring(2, 4), 16),\n        10\n    );\n    hexcolor.b = parseInt(\n        darkenfactor * parseInt(hexstring.substring(4, 6), 16),\n        10\n    );\n    hexcolor.a = opacity;\n    hexcolor.fillColor = rgbaString(hexcolor);\n    hexcolor.strokeColor = [\n        \"rgba(\" + parseHalf(hexcolor.r),\n        parseHalf(hexcolor.g),\n        parseHalf(hexcolor.b),\n        hexcolor.a + \")\"\n    ].join(\",\");\n    hexcolor.rgb = hexcolor.fillColor;\n    return hexcolor;\n}\n\nfunction parseHSL(hslstring, opacity) {\n    var hslcolor = {},\n        hslcolor_stroke = {},\n        hslparts = compact(hslstring.split(/hsla?\\(|,|\\)|%/));\n\n    if (hslparts[3] === undefined) {\n        hslparts[3] = 1;\n    }\n    if (isNaN(parseFloat(opacity, 10))) {\n        opacity = 1;\n    }\n\n    hslcolor.h = hslcolor_stroke.h = parseFloat(hslparts[0], 10);\n    hslcolor.s = hslcolor_stroke.s = parseFloat(hslparts[1], 10);\n    hslcolor.l = parseFloat(hslparts[2], 10);\n    hslcolor.a = hslcolor_stroke.a = parseFloat(opacity * hslparts[3], 10);\n    hslcolor_stroke.l = parseInt(hslcolor.l / 2, 10);\n\n    hslcolor.fillColor = hslaString(hslcolor);\n    hslcolor.strokeColor = hslaString(hslcolor_stroke);\n    hslcolor.hsl = hslcolor.fillColor;\n    return hslcolor;\n}\n\nfunction parseRGB(rgbstring, opacity, darkenfactor) {\n    var rgbcolor = {},\n        rgbparts = compact(rgbstring.split(/rgba?\\(|,|\\)/));\n\n    darkenfactor = darkenfactor || 1;\n\n    if (rgbparts[3] === undefined) {\n        rgbparts[3] = 1;\n    }\n\n    if (isNaN(parseFloat(opacity, 10))) {\n        opacity = 1;\n    }\n\n    rgbcolor.r = parseInt(darkenfactor * (parseInt(rgbparts[0], 10) % 256), 10);\n    rgbcolor.g = parseInt(darkenfactor * (parseInt(rgbparts[1], 10) % 256), 10);\n    rgbcolor.b = parseInt(darkenfactor * (parseInt(rgbparts[2], 10) % 256), 10);\n    rgbcolor.a = parseFloat(opacity * rgbparts[3], 10);\n    rgbcolor.fillColor = rgbaString(rgbcolor);\n    rgbcolor.strokeColor =\n        \"rgba(\" +\n        rgbcolor.r / 2 +\n        \",\" +\n        rgbcolor.g / 2 +\n        \",\" +\n        rgbcolor.b / 2 +\n        \",\" +\n        rgbcolor.a +\n        \")\";\n    rgbcolor.rgb = rgbcolor.fillColor;\n    return rgbcolor;\n}\n\nfunction hue2rgb(p, q, t) {\n    if (t < 0) {\n        t += 1;\n    }\n    if (t > 1) {\n        t -= 1;\n    }\n    if (t < 1 / 6) {\n        return p + (q - p) * 6 * t;\n    }\n    if (t < 1 / 2) {\n        return q;\n    }\n    if (t < 2 / 3) {\n        return p + (q - p) * (2 / 3 - t) * 6;\n    }\n    return p;\n}\n\nfunction hslToRGB(h, s, l, a, darkenfactor) {\n    var r, g, b;\n\n    darkenfactor = darkenfactor || 1;\n    h = parseFloat(h, 10) / 360;\n    s = parseFloat(s, 10) / 100;\n    l = parseFloat(l, 10) / 100;\n    if (a === undefined) {\n        a = 1;\n    }\n    if (s === 0) {\n        r = g = b = l; // achromatic\n    } else {\n        var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n        var p = 2 * l - q;\n        r = hue2rgb(p, q, h + 1 / 3);\n        g = hue2rgb(p, q, h);\n        b = hue2rgb(p, q, h - 1 / 3);\n    }\n\n    if (a === undefined) {\n        a = 1;\n    }\n\n    var rgb = {\n        r: Math.round(r * 255 * darkenfactor),\n        g: Math.round(g * 255 * darkenfactor),\n        b: Math.round(b * 255 * darkenfactor),\n        a: parseFloat(a, 10)\n    };\n\n    rgb.fillColor = rgbaString(rgb);\n\n    return rgb;\n}\n\nfunction rgbToHSL(in_r, in_g, in_b, in_a) {\n    var h,\n        r = (in_r % 256) / 255,\n        g = (in_g % 256) / 255,\n        b = (in_b % 256) / 255,\n        a = in_a === undefined ? 1 : in_a,\n        max = Math.max(r, g, b),\n        min = Math.min(r, g, b),\n        sum = max + min,\n        diff = max - min,\n        s = sum > 1 ? diff / (2 - sum) : diff / sum;\n\n    switch (max) {\n        case r:\n            h = (g - b) / diff + (g < b ? 6 : 0);\n            break;\n        case g:\n            h = (b - r) / diff + 2;\n            break;\n        case b:\n            h = (r - g) / diff + 4;\n            break;\n        default:\n            h = 0;\n            break;\n    }\n\n    h /= 6;\n\n    if (diff === 0) {\n        h = s = 0; // achromatic\n    }\n\n    var hsl = {\n        h: Math.round(360 * h),\n        s: Math.round(100 * s),\n        l: Math.round(50 * sum),\n        a: Math.round(100 * a) / 100\n    };\n\n    hsl.fillColor = hslaString(hsl);\n\n    return hsl;\n}\n\nfunction toDecColor(stringcolor) {\n    var parsedcolor = {};\n    if (!stringcolor) {\n        parsedcolor.fillColor = \"rgba(100,250,50,0.99)\";\n    } else if (stringcolor.indexOf(\"rgb\") !== -1) {\n        parsedcolor = parseRGB(stringcolor);\n    } else if (stringcolor.indexOf(\"hsl\") !== -1) {\n        parsedcolor = parseHSL(stringcolor);\n    } else {\n        parsedcolor = parseHex(stringcolor);\n    }\n\n    return parsedcolor;\n}\n\nfunction getColor(val, range) {\n    var defaults = {\n        h: Math.floor((360 / range) * val),\n        s: 78, // constant saturation\n        l: 63, // constant luminance\n        a: 1\n    };\n\n    return hslaString(defaults);\n}\n\nfunction getColor1() {\n    var defaults1 = {\n        h: 1,\n        s: 78, // constant saturation\n        l: 33, // constant luminance\n        a: 1\n    };\n    return hslaString(defaults1);\n}\n\nfunction darken(stringcolor, factor) {\n    var darkercolor = {};\n    if (!factor) {\n        factor = 1;\n    }\n    if (stringcolor.fillColor.indexOf(\"rgb\") !== -1) {\n        darkercolor.r = factor * parseHalf(stringcolor.r);\n        darkercolor.g = factor * parseHalf(stringcolor.g);\n        darkercolor.b = factor * parseHalf(stringcolor.b);\n        darkercolor.a = 0.99;\n        darkercolor.fillColor = rgbaString(darkercolor);\n    } else if (stringcolor.fillColor.indexOf(\"hsl\") !== -1) {\n        darkercolor.h = stringcolor.h;\n        darkercolor.s = stringcolor.s;\n        darkercolor.l = factor * stringcolor.l - 30;\n        darkercolor.fillColor = hslaString(darkercolor);\n    }\n\n    return darkercolor;\n}\n\nfunction getColors(options) {\n    var color0, color1;\n    if (options.index !== undefined && options.count > 0) {\n        color0 = getColor(options.index, options.count);\n        color1 = getColor1();\n    } else {\n        var deccolor = toDecColor(options.color);\n        color0 = deccolor.fillColor;\n        color1 = darken(deccolor).fillColor;\n    }\n    return [color0, color1];\n}\n\n/** global: google */\nvar generateCanvas = function(options) {\n    var canvas = document.createElement(\"canvas\");\n    var ancho = 30,\n        alto = 40;\n    canvas.width = ancho + 18;\n    canvas.height = alto;\n    var x = canvas.width / 2,\n        y = canvas.height - 2,\n        radius = ancho / 2,\n        angulo = 0.6;\n\n    var font = \"'\" + options.font + \"'\" || \"Arial\";\n    var fontsize = options.fontsize || 11;\n\n    var context = canvas.getContext(\"2d\");\n\n    context.clearRect(0, 0, canvas.width, canvas.height);\n\n    var radius0 = 2 * radius,\n        cx = x + 0.95 * radius0,\n        cy = y + 0.45 * radius0;\n\n    var grad = context.createLinearGradient(0, 0, 0, canvas.height),\n        colors = getColors(options),\n        color0 = colors[0],\n        color1 = colors[1];\n\n    grad.addColorStop(0, color0);\n    grad.addColorStop(1, color1);\n\n    context.fillStyle = grad;\n    context.strokeStyle = \"rgba(200,200,200,0.7)\";\n\n    context.beginPath();\n\n    //arco izquierdo\n    context.arc(\n        cx - 1,\n        cy,\n        radius0,\n        (9 * Math.PI) / 8,\n        (-6 * Math.PI) / 8,\n        false\n    );\n\n    // arco superior\n    context.arc(x, (y - 7) / 2, radius, angulo, Math.PI - angulo, true);\n\n    //arco derecho\n    context.arc(\n        2 * x - cx + 1,\n        cy,\n        radius0,\n        (-0.95 * Math.PI) / 3,\n        -Math.PI / 8,\n        false\n    );\n    context.fill();\n    context.stroke();\n\n    context.beginPath();\n    context.arc(x, 0.4 * y, (2 * radius) / 3, 0, 2 * Math.PI, false);\n    context.fillStyle = \"white\";\n    context.fill();\n\n    context.beginPath();\n\n    // Render Label\n    //context.font = \"11pt Arial\";\n    context.font = fontsize + \"pt \" + font;\n    context.textBaseline = \"top\";\n\n    var textWidth = context.measureText(options.label);\n\n    if (textWidth.width > ancho || String(options.label).length > 3) {\n        context.rect(\n            x - 2 - textWidth.width / 2,\n            y - 30,\n            x - 2 + textWidth.width / 2,\n            y - 23\n        );\n        context.fillStyle = \"#F7F0F0\";\n        context.fill();\n        context.stroke();\n    }\n\n    context.fillStyle = \"black\";\n    context.strokeStyle = \"black\";\n    // centre the text.\n    context.fillText(\n        options.label,\n        1 + Math.floor(canvas.width / 2 - textWidth.width / 2),\n        8\n    );\n    canvas.fillColor = color0;\n\n    return canvas;\n};\nfunction createTextMarker(theoptions) {\n    var scale = theoptions.scale || 0.75,\n        markerCanvas = generateCanvas(theoptions),\n        markerOpts = {};\n\n    theoptions.type = \"textmarker\";\n\n    Object.assign(markerOpts, theoptions);\n\n    Object.assign(markerOpts, {\n        origin: { x: 0, y: 0 },\n        anchor: { x: 24 * scale, y: 40 * scale },\n        size: { width: 48, height: 40 },\n        scaledSize: { width: 48 * scale, height: 40 * scale }\n    });\n\n    var url = markerCanvas.toDataURL(),\n        fillColor = markerCanvas.fillColor,\n        iconObj = new IconObject(url, fillColor, markerOpts);\n\n    return iconObj;\n}\n\n/** global: google */\nvar generateFatCanvas = function(options) {\n\tvar canvas = options.canvas || document.createElement(\"canvas\"),\n\t\tanchorX = 27,\n\t\tanchorY = 53,\n\t\tradius = anchorX - 9,\n\t\tangulo = 1.1,\n\t\tfont = options.font || \"fontello\",\n\t\tfontsize = options.fontsize || 14,\n\t\tcontext = canvas.getContext(\"2d\"),\n\t\tgrad = context.createLinearGradient(0, 0, 0, anchorY);\n\n\tcanvas.width = anchorX * 2;\n\tcanvas.height = anchorY + 1;\n\n\tvar colors = getColors(options),\n\t\tcolor0 = colors[0],\n\t\tcolor1 = colors[1];\n\n\tcontext.clearRect(0, 0, canvas.width, canvas.height);\n\n\tgrad.addColorStop(0, color0);\n\tgrad.addColorStop(1, color1);\n\n\tcontext.fillStyle = grad;\n\tcontext.strokeStyle = color1;\n\tcontext.beginPath();\n\n\tcontext.moveTo(anchorX, anchorY);\n\n\t// arco superior\n\tcontext.arc(\n\t\tanchorX,\n\t\t2 + 0.5 * anchorY,\n\t\tradius,\n\t\tangulo,\n\t\tMath.PI - angulo,\n\t\ttrue\n\t);\n\n\t//punta inferior\n\tcontext.lineTo(anchorX, anchorY);\n\n\tcontext.fill();\n\tcontext.stroke();\n\n\t// Círculo blanco\n\tcontext.beginPath();\n\tcontext.arc(anchorX, 2 + 0.5 * anchorY, radius - 3, 0, 2 * Math.PI, false);\n\tcontext.fillStyle = \"white\";\n\tcontext.fill();\n\n\tcontext.beginPath();\n\n\tcontext.font = \"normal normal normal \" + fontsize + \"px \" + font;\n\t//console.log('context font', context.font);\n\tcontext.fillStyle = color1;\n\tcontext.textBaseline = \"top\";\n\n\tvar textWidth = context.measureText(options.unicodelabel),\n\t\ttext_x = options.unicodelabel,\n\t\tlabel_x = Math.floor(canvas.width / 2 - textWidth.width / 2),\n\t\tlabel_y = 1 + Math.floor(canvas.height / 2 - fontsize / 2);\n\n\t// centre the text.\n\tcontext.fillText(text_x, label_x, label_y);\n\tcanvas.fillColor = color0;\n\treturn canvas;\n};\n\nfunction createFatMarkerIcon(theoptions) {\n\tvar scale = theoptions.scale || 1,\n\t\tmarkerCanvas = generateFatCanvas(theoptions),\n\t\tmarkerOpts = {};\n\n\ttheoptions.type = \"fatmarker\";\n\n\tObject.assign(markerOpts, theoptions);\n\n\tObject.assign(markerOpts, {\n\t\torigin: { x: 0, y: 0 },\n\t\tanchor: { x: 21 * scale, y: 36 * scale },\n\t\tsize: { width: 54, height: 48 },\n\t\tscaledSize: { width: 42 * scale, height: 36 * scale },\n\t\tscale: scale\n\t});\n\n\tvar url = markerCanvas.toDataURL(),\n\t\tfillColor = markerCanvas.fillColor,\n\t\ticonObj = new IconObject(url, fillColor, markerOpts);\n\treturn iconObj;\n}\n\n/** global: google */\nvar generateGroupedCanvas = function(options) {\n    var text_x,\n        canvas = options.canvas || document.createElement(\"canvas\"),\n        context = canvas.getContext(\"2d\"),\n        font = options.font || \"fontello\",\n        fontsize = options.fontsize || 26;\n\n    canvas.width = 54;\n    canvas.height = 48;\n    context.clearRect(0, 0, canvas.width, canvas.height);\n\n    var colors = getColors(options),\n        color0 = colors[0];\n    context.beginPath();\n\n    context.font = \"normal normal normal \" + fontsize + \"px \" + font;\n\n    context.textBaseline = \"top\";\n    var textWidth = context.measureText(options.unicodelabel);\n    text_x = Math.floor(canvas.width / 2 - textWidth.width / 2);\n\n    context.shadowOffsetX = -2;\n    context.shadowOffsetY = -2;\n    context.shadowBlur = 0;\n\n    context.fillStyle = \"#FFFFFF\";\n    context.shadowColor = \"#666666\";\n\n    context.fillText(options.unicodelabel, text_x - 4, 2);\n    context.fillText(options.unicodelabel, text_x, 5);\n    context.fillStyle = color0;\n    context.fillText(options.unicodelabel, text_x + 4, 8);\n\n    context.strokeStyle = \"#FFFFFF\";\n    context.strokeText(options.unicodelabel, text_x + 4, 8);\n\n    canvas.fillColor = color0;\n\n    return canvas;\n};\n\nfunction createGroupedIcon(theoptions) {\n    theoptions.scale = theoptions.scale || 1;\n    theoptions.fontsize = theoptions.fontsize || 26;\n\n    var markerCanvas = generateGroupedCanvas(theoptions),\n        markerOpts = {};\n\n    var scale = theoptions.scale;\n\n    theoptions.type = \"transparent\";\n\n    Object.assign(markerOpts, theoptions);\n\n    Object.assign(markerOpts, {\n        origin: { x: 0, y: 0 },\n        anchor: { x: 27 * scale, y: 24 * scale },\n        size: { width: 54, height: 48 },\n        scaledSize: { width: 54 * scale, height: 48 * scale }\n    });\n\n    var url = markerCanvas.toDataURL(),\n        fillColor = markerCanvas.fillColor,\n        iconObj = new IconObject(url, fillColor, markerOpts);\n\n    return iconObj;\n}\n\n/** global: google */\nvar generateTransparentCanvas = function(options) {\n    var text_x,\n        canvas = options.canvas || document.createElement(\"canvas\"),\n        context = canvas.getContext(\"2d\"),\n        font = options.font || \"fontello\",\n        fontsize = options.fontsize || 26;\n\n    canvas.width = 54;\n    canvas.height = 48;\n    context.clearRect(0, 0, canvas.width, canvas.height);\n\n    var colors = getColors(options),\n        color0 = colors[0],\n        color1 = colors[1];\n    context.beginPath();\n\n    context.font = \"normal normal normal \" + (fontsize - 3) + \"px \" + font;\n\n    context.textBaseline = \"top\";\n    var textmetric = context.measureText(options.unicodelabel);\n    text_x = Math.floor(canvas.width / 2 - textmetric.width / 2);\n\n    //console.debug('textmetric', textmetric);\n\n    context.shadowOffsetX = 2;\n    context.shadowOffsetY = 2;\n    context.shadowBlur = 0;\n    context.shadowColor = \"#FFFFFF\";\n    context.fillStyle = color0;\n    context.fillText(options.unicodelabel, text_x + 1, 6);\n\n    context.shadowOffsetX = 2;\n    context.shadowOffsetY = 2;\n    context.shadowBlur = 1;\n    context.shadowColor = \"#FFFFFF\";\n    context.strokeStyle = color1;\n    context.strokeText(options.unicodelabel, text_x + 1, 6);\n\n    canvas.fillColor = color0;\n\n    return canvas;\n};\n\nfunction createTransparentMarkerIcon(theoptions) {\n    theoptions.scale = theoptions.scale || 1;\n    theoptions.fontsize = theoptions.fontsize || 26;\n\n    var markerCanvas = generateTransparentCanvas(theoptions),\n        markerOpts = {};\n\n    var scale = theoptions.scale;\n\n    theoptions.type = \"transparent\";\n\n    Object.assign(markerOpts, theoptions);\n\n    Object.assign(markerOpts, {\n        origin: { x: 0, y: 0 },\n        anchor: { x: 27 * scale, y: 24 * scale },\n        size: { width: 54, height: 48 },\n        scaledSize: { width: 54 * scale, height: 48 * scale }\n    });\n\n    var url = markerCanvas.toDataURL(),\n        fillColor = markerCanvas.fillColor,\n        iconObj = new IconObject(url, fillColor, markerOpts);\n\n    return iconObj;\n}\n\n/** global: google, r, g, b */\n\nfunction padHex(str_in) {\n    if ((\"\" + str_in).length === 1) {\n        return \"0\" + String(str_in);\n    } else {\n        return String(str_in);\n    }\n}\n\nvar MarkerFactory = {\n    createTransparentMarkerIcon: createTransparentMarkerIcon,\n    createFatMarkerIcon: createFatMarkerIcon,\n    createTextMarker: createTextMarker,\n    createClusterIcon: createClusterIcon,\n    createGroupedIcon: createGroupedIcon,\n\n    readCache: function(cacheKey, options) {\n        if (options.no_cache) {\n            return null;\n        }\n\n        var cached = window.sessionStorage.getItem(cacheKey);\n        if (cached === null) {\n            return null;\n        }\n\n        var cachedObj = JSON.parse(cached);\n        var iconObj = new IconObject(\n            cachedObj.url,\n            cachedObj.fillColor,\n            omit(cachedObj, function(key) {\n                return [\"url\", \"fillColor\"].indexOf(key) !== -1;\n            })\n        );\n        return iconObj;\n    },\n\n    setCache: function(cacheKey, iconObj) {\n        var cached = iconObj.toJSON();\n        cached.url = iconObj.url;\n        window.sessionStorage.setItem(cacheKey, JSON.stringify(cached));\n        return iconObj;\n    },\n\n    generateAutoicon: function(options) {\n        var generatorFN;\n\n        if (!options.is_icon) {\n            options.type = \"textmarker\";\n            generatorFN = MarkerFactory.createTextMarker;\n        } else if (options.shadow || options.type === \"grouped\") {\n            options.type = \"grouped\";\n            generatorFN = MarkerFactory.createGroupedIcon;\n        } else if (options.transparent_background) {\n            options.type = \"transparent\";\n            generatorFN = MarkerFactory.createTransparentMarkerIcon;\n        } else {\n            generatorFN = MarkerFactory.createFatMarkerIcon;\n            options.type = \"fatmarker\";\n        }\n        var cacheKey = serializeOptions(options);\n        var iconObj = MarkerFactory.readCache(cacheKey, options);\n        if (iconObj === null) {\n            iconObj = generatorFN(options);\n        }\n        if (options.no_cache) {\n            return iconObj;\n        }\n        return MarkerFactory.setCache(cacheKey, iconObj);\n    },\n    /**\n     * Receives a color string rgb(a), hsl(a) or hex, returns its components\n     * in rgba and hsla, with optional transparency\n     * plus a darkened version (default is half of each RGB component) and a\n     *\n     * @param {string} somecolor    - A color string in  rgb(a), hsl(a) or hex format\n     * @param {Number} opacity      - Opacity to apply to the color. Optional, default 1\n     * @param {Number} darkenfactor - How much darker should the resulting color be. Optional, default 1\n     *\n     * @return     {Object}  input color parsed and modified as requested\n     */\n    parseColorString: function(somecolor, opacity, darkenfactor) {\n        var parsedcolor = {\n                original: somecolor\n            },\n            hsl,\n            rgb;\n\n        darkenfactor = darkenfactor || 1;\n        opacity = isNaN(parseFloat(opacity, 10)) ? 1 : parseFloat(opacity, 10);\n\n        if (somecolor.indexOf(\"hsl\") !== -1) {\n            hsl = parseHSL(somecolor, opacity);\n            rgb = hslToRGB(hsl.h, hsl.s, hsl.l, hsl.a, darkenfactor);\n        } else if (somecolor.indexOf(\"rgb\") !== -1) {\n            rgb = parseRGB(somecolor, opacity, darkenfactor);\n        } else {\n            rgb = parseHex(somecolor, opacity, darkenfactor);\n        }\n\n        hsl = rgbToHSL(rgb.r, rgb.g, rgb.b, rgb.a);\n\n        parsedcolor.hsl = {\n            h: hsl.h,\n            s: hsl.s,\n            l: hsl.l,\n            a: hsl.a\n        };\n        parsedcolor.rgb = {\n            r: rgb.r,\n            g: rgb.g,\n            b: rgb.b,\n            a: rgb.a\n        };\n\n        parsedcolor.fillColor = rgb.fillColor;\n        parsedcolor.rgba = rgb.fillColor;\n        parsedcolor.hsla = hsl.fillColor;\n        parsedcolor.strokeColor = rgb.strokeColor;\n        parsedcolor.hex = [\n            \"#\",\n            padHex(rgb.r.toString(16)),\n            padHex(rgb.g.toString(16)),\n            padHex(rgb.b.toString(16)),\n            rgb.a === 0 ? \"00\" : \"\"\n        ].join(\"\");\n        return parsedcolor;\n    },\n\n    /**\n     * Generates an google maps marker (or an image as dataurl from the given options)\n     *\n     * @param      {Object}  options  The options\n     * @return     {Object}  { description_of_the_return_value }\n     */\n    autoIcon: function(options) {\n        if (typeof options !== \"object\") {\n            console.warn(\"autoIcon expects an object as its only parameter\");\n            return null;\n        }\n        // unless explicitly set to false, the icon doesn't have a marker-like wrapper\n        options.transparent_background =\n            options.transparent_background !== false;\n\n        options.label = String(options.label || \"A\");\n        options.color = options.color || \"#FF0000\";\n\n        if (\n            options.label.length === 4 ||\n            options.label.substring(0, 2) === \"0x\"\n        ) {\n            options.font = options.font || \"fontello\";\n            options.label = (options.label || \"e836\").slice(-4);\n            options.unicodelabel = String.fromCharCode(\"0x\" + options.label);\n            options.scale = options.scale || 1;\n            options.is_icon = true;\n\n            return MarkerFactory.generateAutoicon(options);\n        } else if (options.shadow) {\n\n            return MarkerFactory.createClusterIcon(options);\n        } else {\n            options.scale = options.scale || 0.75;\n            options.label = String(options.label || \"A\");\n            options.fontsize = options.fontsize || 11;\n            options.font = options.font || \"Arial\";\n            // This is text I should print literally\n\n            return MarkerFactory.generateAutoicon(options);\n        }\n    }\n};\n\nexport { MarkerFactory };\n","/** @license\n *\n *  Copyright (C) 2012 K. Arthur Endsley (kaendsle@mtu.edu)\n *  Michigan Tech Research Institute (MTRI)\n *  3600 Green Court, Suite 100, Ann Arbor, MI, 48105\n *\n *  This program is free software: you can redistribute it and/or modify\n *  it under the terms of the GNU General Public License as published by\n *  the Free Software Foundation, either version 3 of the License, or\n *  (at your option) any later version.\n *\n *  This program is distributed in the hope that it will be useful,\n *  but WITHOUT ANY WARRANTY; without even the implied warranty of\n *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n *  GNU General Public License for more details.\n *\n *  You should have received a copy of the GNU General Public License\n *  along with this program.  If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\n/**\n * @desc The Wkt namespace.\n * @property    {String}    delimiter   - The default delimiter for separating components of atomic geometry (coordinates)\n * @namespace\n * @global\n */\nvar Wkt = function (obj) {\n\tif (obj instanceof Wkt) return obj;\n\tif (!(this instanceof Wkt)) return new Wkt(obj);\n\tthis._wrapped = obj;\n};\n\n/**\n * Returns true if the substring is found at the beginning of the string.\n * @param   str {String}    The String to search\n * @param   sub {String}    The substring of interest\n * @return      {Boolean}\n * @private\n */\nvar beginsWith = function (str, sub) {\n\treturn str.substring(0, sub.length) === sub;\n};\n\n/**\n * Returns true if the substring is found at the end of the string.\n * @param   str {String}    The String to search\n * @param   sub {String}    The substring of interest\n * @return      {Boolean}\n * @private\n */\nvar endsWith = function (str, sub) {\n\treturn str.substring(str.length - sub.length) === sub;\n};\n\n/**\n * The default delimiter for separating components of atomic geometry (coordinates)\n * @ignore\n */\nWkt.delimiter = ' ';\n\n/**\n * Determines whether or not the passed Object is an Array.\n * @param   obj {Object}    The Object in question\n * @return      {Boolean}\n * @member Wkt.isArray\n * @method\n */\nWkt.isArray = function (obj) {\n\treturn !!(obj && obj.constructor === Array);\n};\n\n/**\n * Removes given character String(s) from a String.\n * @param   str {String}    The String to search\n * @param   sub {String}    The String character(s) to trim\n * @return      {String}    The trimmed string\n * @member Wkt.trim\n * @method\n */\nWkt.trim = function (str, sub) {\n\tsub = sub || ' '; // Defaults to trimming spaces\n\t// Trim beginning spaces\n\twhile (beginsWith(str, sub)) {\n\t\tstr = str.substring(1);\n\t}\n\t// Trim ending spaces\n\twhile (endsWith(str, sub)) {\n\t\tstr = str.substring(0, str.length - 1);\n\t}\n\treturn str;\n};\n\n/**\n * An object for reading WKT strings and writing geographic features\n * @constructor this.Wkt.Wkt\n * @param   initializer {String}    An optional WKT string for immediate read\n * @property            {Array}     components      - Holder for atomic geometry objects (internal representation of geometric components)\n * @property            {String}    delimiter       - The default delimiter for separating components of atomic geometry (coordinates)\n * @property            {Object}    regExes         - Some regular expressions copied from OpenLayers.Format.WKT.js\n * @property            {String}    type            - The Well-Known Text name (e.g. 'point') of the geometry\n * @property            {Boolean}   wrapVerticies   - True to wrap vertices in MULTIPOINT geometries; If true: MULTIPOINT((30 10),(10 30),(40 40)); If false: MULTIPOINT(30 10,10 30,40 40)\n * @return              {this.Wkt.Wkt}\n * @memberof Wkt\n */\nWkt.Wkt = function (initializer) {\n\n\t/**\n\t * The default delimiter between X and Y coordinates.\n\t * @ignore\n\t */\n\tthis.delimiter = Wkt.delimiter || ' ';\n\n\t/**\n\t * Configuration parameter for controlling how Wicket seralizes\n\t * MULTIPOINT strings. Examples; both are valid WKT:\n\t * If true: MULTIPOINT((30 10),(10 30),(40 40))\n\t * If false: MULTIPOINT(30 10,10 30,40 40)\n\t * @ignore\n\t */\n\tthis.wrapVertices = true;\n\n\t/**\n\t * Some regular expressions copied from OpenLayers.Format.WKT.js\n\t * @ignore\n\t */\n\tthis.regExes = {\n\t\t'typeStr': /^\\s*(\\w+)\\s*\\(\\s*(.*)\\s*\\)\\s*$/,\n\t\t'spaces': /\\s+|\\+/, // Matches the '+' or the empty space\n\t\t'numeric': /-*\\d+(\\.*\\d+)?/,\n\t\t'comma': /\\s*,\\s*/,\n\t\t'parenComma': /\\)\\s*,\\s*\\(/,\n\t\t'coord': /-*\\d+\\.*\\d+ -*\\d+\\.*\\d+/, // e.g. \"24 -14\"\n\t\t'doubleParenComma': /\\)\\s*\\)\\s*,\\s*\\(\\s*\\(/,\n\t\t'trimParens': /^\\s*\\(?(.*?)\\)?\\s*$/,\n\t\t'ogcTypes': /^(multi)?(point|line|polygon|box)?(string)?$/i, // Captures e.g. \"Multi\",\"Line\",\"String\"\n\t\t'crudeJson': /^{.*\"(type|coordinates|geometries|features)\":.*}$/ // Attempts to recognize JSON strings\n\t};\n\n\t/**\n\t * The internal representation of geometry--the \"components\" of geometry.\n\t * @ignore\n\t */\n\tthis.components = undefined;\n\n\t// An initial WKT string may be provided\n\tif (initializer && typeof initializer === 'string') {\n\t\tthis.read(initializer);\n\t} else if (initializer && typeof initializer !== undefined) {\n\t\tthis.fromObject(initializer);\n\t}\n\n};\n\n/**\n * Returns true if the internal geometry is a collection of geometries.\n * @return  {Boolean}   Returns true when it is a collection\n * @memberof this.Wkt.Wkt\n * @method\n */\nWkt.Wkt.prototype.isCollection = function () {\n\tswitch (this.type.slice(0, 5)) {\n\tcase 'multi':\n\t\t// Trivial; any multi-geometry is a collection\n\t\treturn true;\n\tcase 'polyg':\n\t\t// Polygons with holes are \"collections\" of rings\n\t\treturn true;\n\tdefault:\n\t\t// Any other geometry is not a collection\n\t\treturn false;\n\t}\n};\n\n/**\n * Compares two x,y coordinates for equality.\n * @param   a   {Object}    An object with x and y properties\n * @param   b   {Object}    An object with x and y properties\n * @return      {Boolean}\n * @memberof this.Wkt.Wkt\n * @method\n */\nWkt.Wkt.prototype.sameCoords = function (a, b) {\n\treturn (a.x === b.x && a.y === b.y);\n};\n\n/**\n * Sets internal geometry (components) from framework geometry (e.g.\n * Google Polygon objects or google.maps.Polygon).\n * @param   obj {Object}    The framework-dependent geometry representation\n * @return      {this.Wkt.Wkt}   The object itself\n * @memberof this.Wkt.Wkt\n * @method\n */\nWkt.Wkt.prototype.fromObject = function (obj) {\n\tvar result;\n\n\tif (obj.hasOwnProperty('type') && obj.hasOwnProperty('coordinates')) {\n\t\tresult = this.fromJson(obj);\n\t} else {\n\t\tresult = this.deconstruct.call(this, obj);\n\t}\n\n\tthis.components = result.components;\n\tthis.isRectangle = result.isRectangle || false;\n\tthis.type = result.type;\n\treturn this;\n};\n\n/**\n * Creates external geometry objects based on a plug-in framework's\n * construction methods and available geometry classes.\n * @param   config  {Object}    An optional framework-dependent properties specification\n * @return          {Object}    The framework-dependent geometry representation\n * @memberof this.Wkt.Wkt\n * @method\n */\nWkt.Wkt.prototype.toObject = function (config) {\n\tvar obj = this.construct[this.type].call(this, config);\n\t// Don't assign the \"properties\" property to an Array\n\tif (typeof obj === 'object' && !Wkt.isArray(obj)) {\n\t\tobj.properties = this.properties;\n\t}\n\treturn obj;\n};\n\n/**\n * Returns the WKT string representation; the same as the write() method.\n * @memberof this.Wkt.Wkt\n * @method\n */\nWkt.Wkt.prototype.toString = function (config) {\n\treturn this.write();\n};\n\n/**\n * Parses a JSON representation as an Object.\n * @param\tobj\t{Object}\tAn Object with the GeoJSON schema\n * @return\t{this.Wkt.Wkt}\tThe object itself\n * @memberof this.Wkt.Wkt\n * @method\n */\nWkt.Wkt.prototype.fromJson = function (obj) {\n\tvar i, j, k, coords, iring, oring;\n\n\tthis.type = obj.type.toLowerCase();\n\tthis.components = [];\n\tif (obj.hasOwnProperty('geometry')) { //Feature\n\t\tthis.fromJson(obj.geometry);\n\t\tthis.properties = obj.properties;\n\t\treturn this;\n\t}\n\tcoords = obj.coordinates;\n\n\tif (!Wkt.isArray(coords[0])) { // Point\n\t\tthis.components.push({\n\t\t\tx: coords[0],\n\t\t\ty: coords[1]\n\t\t});\n\n\t} else {\n\n\t\tfor (i in coords) {\n\t\t\tif (coords.hasOwnProperty(i)) {\n\n\t\t\t\tif (!Wkt.isArray(coords[i][0])) { // LineString\n\n\t\t\t\t\tif (this.type === 'multipoint') { // MultiPoint\n\t\t\t\t\t\tthis.components.push([{\n\t\t\t\t\t\t\tx: coords[i][0],\n\t\t\t\t\t\t\ty: coords[i][1]\n\t\t\t\t\t\t}]);\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.components.push({\n\t\t\t\t\t\t\tx: coords[i][0],\n\t\t\t\t\t\t\ty: coords[i][1]\n\t\t\t\t\t\t});\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\toring = [];\n\t\t\t\t\tfor (j in coords[i]) {\n\t\t\t\t\t\tif (coords[i].hasOwnProperty(j)) {\n\n\t\t\t\t\t\t\tif (!Wkt.isArray(coords[i][j][0])) {\n\t\t\t\t\t\t\t\toring.push({\n\t\t\t\t\t\t\t\t\tx: coords[i][j][0],\n\t\t\t\t\t\t\t\t\ty: coords[i][j][1]\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tiring = [];\n\t\t\t\t\t\t\t\tfor (k in coords[i][j]) {\n\t\t\t\t\t\t\t\t\tif (coords[i][j].hasOwnProperty(k)) {\n\n\t\t\t\t\t\t\t\t\t\tiring.push({\n\t\t\t\t\t\t\t\t\t\t\tx: coords[i][j][k][0],\n\t\t\t\t\t\t\t\t\t\t\ty: coords[i][j][k][1]\n\t\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\toring.push(iring);\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.components.push(oring);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t}\n\n\treturn this;\n};\n\n/**\n * Creates a JSON representation, with the GeoJSON schema, of the geometry.\n * @return    {Object}    The corresponding GeoJSON representation\n * @memberof this.Wkt.Wkt\n * @method\n */\nWkt.Wkt.prototype.toJson = function () {\n\tvar cs, json, i, j, k, ring, rings;\n\n\tcs = this.components;\n\tjson = {\n\t\tcoordinates: [],\n\t\ttype: (function () {\n\t\t\tvar i, type, s;\n\n\t\t\ttype = this.regExes.ogcTypes.exec(this.type).slice(1);\n\t\t\ts = [];\n\n\t\t\tfor (i in type) {\n\t\t\t\tif (type.hasOwnProperty(i)) {\n\t\t\t\t\tif (type[i] !== undefined) {\n\t\t\t\t\t\ts.push(type[i].toLowerCase().slice(0, 1).toUpperCase() + type[i].toLowerCase().slice(1));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn s;\n\t\t}.call(this)).join('')\n\t}\n\n\t// Wkt BOX type gets a special bbox property in GeoJSON\n\tif (this.type.toLowerCase() === 'box') {\n\t\tjson.type = 'Polygon';\n\t\tjson.bbox = [];\n\n\t\tfor (i in cs) {\n\t\t\tif (cs.hasOwnProperty(i)) {\n\t\t\t\tjson.bbox = json.bbox.concat([cs[i].x, cs[i].y]);\n\t\t\t}\n\t\t}\n\n\t\tjson.coordinates = [\n\t\t\t[\n\t\t\t\t[cs[0].x, cs[0].y],\n\t\t\t\t[cs[0].x, cs[1].y],\n\t\t\t\t[cs[1].x, cs[1].y],\n\t\t\t\t[cs[1].x, cs[0].y],\n\t\t\t\t[cs[0].x, cs[0].y]\n\t\t\t]\n\t\t];\n\n\t\treturn json;\n\t}\n\n\t// For the coordinates of most simple features\n\tfor (i in cs) {\n\t\tif (cs.hasOwnProperty(i)) {\n\n\t\t\t// For those nested structures\n\t\t\tif (Wkt.isArray(cs[i])) {\n\t\t\t\trings = [];\n\n\t\t\t\tfor (j in cs[i]) {\n\t\t\t\t\tif (cs[i].hasOwnProperty(j)) {\n\n\t\t\t\t\t\tif (Wkt.isArray(cs[i][j])) { // MULTIPOLYGONS\n\t\t\t\t\t\t\tring = [];\n\n\t\t\t\t\t\t\tfor (k in cs[i][j]) {\n\t\t\t\t\t\t\t\tif (cs[i][j].hasOwnProperty(k)) {\n\t\t\t\t\t\t\t\t\tring.push([cs[i][j][k].x, cs[i][j][k].y]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\trings.push(ring);\n\n\t\t\t\t\t\t} else { // POLYGONS and MULTILINESTRINGS\n\n\t\t\t\t\t\t\tif (cs[i].length > 1) {\n\t\t\t\t\t\t\t\trings.push([cs[i][j].x, cs[i][j].y]);\n\n\t\t\t\t\t\t\t} else { // MULTIPOINTS\n\t\t\t\t\t\t\t\trings = rings.concat([cs[i][j].x, cs[i][j].y]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tjson.coordinates.push(rings);\n\n\t\t\t} else {\n\t\t\t\tif (cs.length > 1) { // For LINESTRING type\n\t\t\t\t\tjson.coordinates.push([cs[i].x, cs[i].y]);\n\n\t\t\t\t} else { // For POINT type\n\t\t\t\t\tjson.coordinates = json.coordinates.concat([cs[i].x, cs[i].y]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\t}\n\n\treturn json;\n};\n\n/**\n * Absorbs the geometry of another this.Wkt.Wkt instance, merging it with its own,\n * creating a collection (MULTI-geometry) based on their types, which must agree.\n * For example, creates a MULTIPOLYGON from a POLYGON type merged with another\n * POLYGON type, or adds a POLYGON instance to a MULTIPOLYGON instance.\n * @param   wkt {String}    A Wkt.Wkt object\n * @return\t{this.Wkt.Wkt}\tThe object itself\n * @memberof this.Wkt.Wkt\n * @method\n */\nWkt.Wkt.prototype.merge = function (wkt) {\n\tvar prefix = this.type.slice(0, 5);\n\n\tif (this.type !== wkt.type) {\n\t\tif (this.type.slice(5, this.type.length) !== wkt.type) {\n\t\t\tthrow TypeError('The input geometry types must agree or the calling this.Wkt.Wkt instance must be a multigeometry of the other');\n\t\t}\n\t}\n\n\tswitch (prefix) {\n\n\tcase 'point':\n\t\tthis.components = [this.components.concat(wkt.components)];\n\t\tbreak;\n\n\tcase 'multi':\n\t\tthis.components = this.components.concat((wkt.type.slice(0, 5) === 'multi') ? wkt.components : [wkt.components]);\n\t\tbreak;\n\n\tdefault:\n\t\tthis.components = [\n\t\t\tthis.components,\n\t\t\twkt.components\n\t\t];\n\t\tbreak;\n\n\t}\n\n\tif (prefix !== 'multi') {\n\t\tthis.type = 'multi' + this.type;\n\t}\n\treturn this;\n};\n\n/**\n * Reads a WKT string, validating and incorporating it.\n * @param   str {String}    A WKT or GeoJSON string\n * @return\t{this.Wkt.Wkt}\tThe object itself\n * @memberof this.Wkt.Wkt\n * @method\n */\nWkt.Wkt.prototype.read = function (str) {\n\tvar matches;\n\tmatches = this.regExes.typeStr.exec(str);\n\tif (matches) {\n\t\tthis.type = matches[1].toLowerCase();\n\t\tthis.base = matches[2];\n\t\tif (this.ingest[this.type]) {\n\t\t\tthis.components = this.ingest[this.type].apply(this, [this.base]);\n\t\t}\n\n\t} else {\n\t\tif (this.regExes.crudeJson.test(str)) {\n\t\t\tif (typeof JSON === 'object' && typeof JSON.parse === 'function') {\n\t\t\t\tthis.fromJson(JSON.parse(str));\n\n\t\t\t} else {\n\t\t\t\tconsole.log('JSON.parse() is not available; cannot parse GeoJSON strings');\n\t\t\t\tthrow {\n\t\t\t\t\tname: 'JSONError',\n\t\t\t\t\tmessage: 'JSON.parse() is not available; cannot parse GeoJSON strings'\n\t\t\t\t};\n\t\t\t}\n\n\t\t} else {\n\t\t\tconsole.log('Invalid WKT string provided to read()');\n\t\t\tthrow {\n\t\t\t\tname: 'WKTError',\n\t\t\t\tmessage: 'Invalid WKT string provided to read()'\n\t\t\t};\n\t\t}\n\t}\n\n\treturn this;\n}; // eo readWkt\n\n/**\n * Writes a WKT string.\n * @param   components  {Array}     An Array of internal geometry objects\n * @return              {String}    The corresponding WKT representation\n * @memberof this.Wkt.Wkt\n * @method\n */\nWkt.Wkt.prototype.write = function (components) {\n\tvar i, pieces, data;\n\n\tcomponents = components || this.components;\n\n\tpieces = [];\n\n\tpieces.push(this.type.toUpperCase() + '(');\n\n\tfor (i = 0; i < components.length; i += 1) {\n\t\tif (this.isCollection() && i > 0) {\n\t\t\tpieces.push(',');\n\t\t}\n\n\t\t// There should be an extract function for the named type\n\t\tif (!this.extract[this.type]) {\n\t\t\treturn null;\n\t\t}\n\n\t\tdata = this.extract[this.type].apply(this, [components[i]]);\n\t\tif (this.isCollection() && this.type !== 'multipoint') {\n\t\t\tpieces.push('(' + data + ')');\n\n\t\t} else {\n\t\t\tpieces.push(data);\n\n\t\t\t// If not at the end of the components, add a comma\n\t\t\tif (i !== (components.length - 1) && this.type !== 'multipoint') {\n\t\t\t\tpieces.push(',');\n\t\t\t}\n\n\t\t}\n\t}\n\n\tpieces.push(')');\n\n\treturn pieces.join('');\n};\n\n/**\n * This object contains functions as property names that extract WKT\n * strings from the internal representation.\n * @memberof this.Wkt.Wkt\n * @namespace this.Wkt.Wkt.extract\n * @instance\n */\nWkt.Wkt.prototype.extract = {\n\t/**\n\t * Return a WKT string representing atomic (point) geometry\n\t * @param   point   {Object}    An object with x and y properties\n\t * @return          {String}    The WKT representation\n\t * @memberof this.Wkt.Wkt.extract\n\t * @instance\n\t */\n\tpoint: function (point) {\n\t\treturn String(point.x) + this.delimiter + String(point.y);\n\t},\n\n\t/**\n\t * Return a WKT string representing multiple atoms (points)\n\t * @param   multipoint  {Array}     Multiple x-and-y objects\n\t * @return              {String}    The WKT representation\n\t * @memberof this.Wkt.Wkt.extract\n\t * @instance\n\t */\n\tmultipoint: function (multipoint) {\n\t\tvar i, parts = [],\n\t\t\ts;\n\n\t\tfor (i = 0; i < multipoint.length; i += 1) {\n\t\t\ts = this.extract.point.apply(this, [multipoint[i]]);\n\n\t\t\tif (this.wrapVertices) {\n\t\t\t\ts = '(' + s + ')';\n\t\t\t}\n\n\t\t\tparts.push(s);\n\t\t}\n\n\t\treturn parts.join(',');\n\t},\n\n\t/**\n\t * Return a WKT string representing a chain (linestring) of atoms\n\t * @param   linestring  {Array}     Multiple x-and-y objects\n\t * @return              {String}    The WKT representation\n\t * @memberof this.Wkt.Wkt.extract\n\t * @instance\n\t */\n\tlinestring: function (linestring) {\n\t\t// Extraction of linestrings is the same as for points\n\t\treturn this.extract.point.apply(this, [linestring]);\n\t},\n\n\t/**\n\t * Return a WKT string representing multiple chains (multilinestring) of atoms\n\t * @param   multilinestring {Array}     Multiple of multiple x-and-y objects\n\t * @return                  {String}    The WKT representation\n\t * @memberof this.Wkt.Wkt.extract\n\t * @instance\n\t */\n\tmultilinestring: function (multilinestring) {\n\t\tvar i, parts = [];\n\n\t\tif (multilinestring.length) {\n\t\t\tfor (i = 0; i < multilinestring.length; i += 1) {\n\t\t\t\tparts.push(this.extract.linestring.apply(this, [multilinestring[i]]));\n\t\t\t}\n\t\t} else {\n\t\t\tparts.push(this.extract.point.apply(this, [multilinestring]));\n\t\t}\n\n\t\treturn parts.join(',');\n\t},\n\n\t/**\n\t * Return a WKT string representing multiple atoms in closed series (polygon)\n\t * @param   polygon {Array}     Collection of ordered x-and-y objects\n\t * @return          {String}    The WKT representation\n\t * @memberof this.Wkt.Wkt.extract\n\t * @instance\n\t */\n\tpolygon: function (polygon) {\n\t\t// Extraction of polygons is the same as for multilinestrings\n\t\treturn this.extract.multilinestring.apply(this, [polygon]);\n\t},\n\n\t/**\n\t * Return a WKT string representing multiple closed series (multipolygons) of multiple atoms\n\t * @param   multipolygon    {Array}     Collection of ordered x-and-y objects\n\t * @return                  {String}    The WKT representation\n\t * @memberof this.Wkt.Wkt.extract\n\t * @instance\n\t */\n\tmultipolygon: function (multipolygon) {\n\t\tvar i, parts = [];\n\t\tfor (i = 0; i < multipolygon.length; i += 1) {\n\t\t\tparts.push('(' + this.extract.polygon.apply(this, [multipolygon[i]]) + ')');\n\t\t}\n\t\treturn parts.join(',');\n\t},\n\n\t/**\n\t * Return a WKT string representing a 2DBox\n\t * @param   multipolygon    {Array}     Collection of ordered x-and-y objects\n\t * @return                  {String}    The WKT representation\n\t * @memberof this.Wkt.Wkt.extract\n\t * @instance\n\t */\n\tbox: function (box) {\n\t\treturn this.extract.linestring.apply(this, [box]);\n\t},\n\n\tgeometrycollection: function (str) {\n\t\tconsole.log('The geometrycollection WKT type is not yet supported.');\n\t}\n};\n\n/**\n * This object contains functions as property names that ingest WKT\n * strings into the internal representation.\n * @memberof this.Wkt.Wkt\n * @namespace this.Wkt.Wkt.ingest\n * @instance\n */\nWkt.Wkt.prototype.ingest = {\n\n\t/**\n\t * Return point feature given a point WKT fragment.\n\t * @param   str {String}    A WKT fragment representing the point\n\t * @memberof this.Wkt.Wkt.ingest\n\t * @instance\n\t */\n\tpoint: function (str) {\n\t\tvar coords = Wkt.trim(str).split(this.regExes.spaces);\n\t\t// In case a parenthetical group of coordinates is passed...\n\t\treturn [{ // ...Search for numeric substrings\n\t\t\tx: parseFloat(this.regExes.numeric.exec(coords[0])[0]),\n\t\t\ty: parseFloat(this.regExes.numeric.exec(coords[1])[0])\n\t\t}];\n\t},\n\n\t/**\n\t * Return a multipoint feature given a multipoint WKT fragment.\n\t * @param   str {String}    A WKT fragment representing the multipoint\n\t * @memberof this.Wkt.Wkt.ingest\n\t * @instance\n\t */\n\tmultipoint: function (str) {\n\t\tvar i, components, points;\n\t\tcomponents = [];\n\t\tpoints = Wkt.trim(str).split(this.regExes.comma);\n\t\tfor (i = 0; i < points.length; i += 1) {\n\t\t\tcomponents.push(this.ingest.point.apply(this, [points[i]]));\n\t\t}\n\t\treturn components;\n\t},\n\n\t/**\n\t * Return a linestring feature given a linestring WKT fragment.\n\t * @param   str {String}    A WKT fragment representing the linestring\n\t * @memberof this.Wkt.Wkt.ingest\n\t * @instance\n\t */\n\tlinestring: function (str) {\n\t\tvar i, multipoints, components;\n\n\t\t// In our x-and-y representation of components, parsing\n\t\t//  multipoints is the same as parsing linestrings\n\t\tmultipoints = this.ingest.multipoint.apply(this, [str]);\n\n\t\t// However, the points need to be joined\n\t\tcomponents = [];\n\t\tfor (i = 0; i < multipoints.length; i += 1) {\n\t\t\tcomponents = components.concat(multipoints[i]);\n\t\t}\n\t\treturn components;\n\t},\n\n\t/**\n\t * Return a multilinestring feature given a multilinestring WKT fragment.\n\t * @param   str {String}    A WKT fragment representing the multilinestring\n\t * @memberof this.Wkt.Wkt.ingest\n\t * @instance\n\t */\n\tmultilinestring: function (str) {\n\t\tvar i, components, line, lines;\n\t\tcomponents = [];\n\n\t\tlines = Wkt.trim(str).split(this.regExes.doubleParenComma);\n\t\tif (lines.length === 1) { // If that didn't work...\n\t\t\tlines = Wkt.trim(str).split(this.regExes.parenComma);\n\t\t}\n\n\t\tfor (i = 0; i < lines.length; i += 1) {\n\t\t\tline = lines[i].replace(this.regExes.trimParens, '$1');\n\t\t\tcomponents.push(this.ingest.linestring.apply(this, [line]));\n\t\t}\n\n\t\treturn components;\n\t},\n\n\t/**\n\t * Return a polygon feature given a polygon WKT fragment.\n\t * @param   str {String}    A WKT fragment representing the polygon\n\t * @memberof this.Wkt.Wkt.ingest\n\t * @instance\n\t */\n\tpolygon: function (str) {\n\t\tvar i, j, components, subcomponents, ring, rings;\n\t\trings = Wkt.trim(str).split(this.regExes.parenComma);\n\t\tcomponents = []; // Holds one or more rings\n\t\tfor (i = 0; i < rings.length; i += 1) {\n\t\t\tring = rings[i].replace(this.regExes.trimParens, '$1').split(this.regExes.comma);\n\t\t\tsubcomponents = []; // Holds the outer ring and any inner rings (holes)\n\t\t\tfor (j = 0; j < ring.length; j += 1) {\n\t\t\t\t// Split on the empty space or '+' character (between coordinates)\n\t\t\t\tvar split = ring[j].split(this.regExes.spaces);\n\t\t\t\tif (split.length > 2) {\n\t\t\t\t\t//remove the elements which are blanks\n\t\t\t\t\tsplit = split.filter(function (n) {\n\t\t\t\t\t\treturn n != \"\"\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (split.length === 2) {\n\t\t\t\t\tvar x_cord = split[0];\n\t\t\t\t\tvar y_cord = split[1];\n\n\t\t\t\t\t//now push\n\t\t\t\t\tsubcomponents.push({\n\t\t\t\t\t\tx: parseFloat(x_cord),\n\t\t\t\t\t\ty: parseFloat(y_cord)\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\tcomponents.push(subcomponents);\n\t\t}\n\t\treturn components;\n\t},\n\n\t/**\n\t * Return box vertices (which would become the Rectangle bounds) given a Box WKT fragment.\n\t * @param   str {String}    A WKT fragment representing the box\n\t * @memberof this.Wkt.Wkt.ingest\n\t * @instance\n\t */\n\tbox: function (str) {\n\t\tvar i, multipoints, components;\n\n\t\t// In our x-and-y representation of components, parsing\n\t\t//  multipoints is the same as parsing linestrings\n\t\tmultipoints = this.ingest.multipoint.apply(this, [str]);\n\n\t\t// However, the points need to be joined\n\t\tcomponents = [];\n\t\tfor (i = 0; i < multipoints.length; i += 1) {\n\t\t\tcomponents = components.concat(multipoints[i]);\n\t\t}\n\n\t\treturn components;\n\t},\n\n\t/**\n\t * Return a multipolygon feature given a multipolygon WKT fragment.\n\t * @param   str {String}    A WKT fragment representing the multipolygon\n\t * @memberof this.Wkt.Wkt.ingest\n\t * @instance\n\t */\n\tmultipolygon: function (str) {\n\t\tvar i, components, polygon, polygons;\n\t\tcomponents = [];\n\t\tpolygons = Wkt.trim(str).split(this.regExes.doubleParenComma);\n\t\tfor (i = 0; i < polygons.length; i += 1) {\n\t\t\tpolygon = polygons[i].replace(this.regExes.trimParens, '$1');\n\t\t\tcomponents.push(this.ingest.polygon.apply(this, [polygon]));\n\t\t}\n\t\treturn components;\n\t},\n\n\t/**\n\t * Return an array of features given a geometrycollection WKT fragment.\n\t * @param   str {String}    A WKT fragment representing the geometry collection\n\t * @memberof this.Wkt.Wkt.ingest\n\t * @instance\n\t */\n\tgeometrycollection: function (str) {\n\t\tconsole.log('The geometrycollection WKT type is not yet supported.');\n\t}\n\n}; // eo ingest\n\n/**\n * @augments Wkt.Wkt\n * A framework-dependent flag, set for each Wkt.Wkt() instance, that indicates\n * whether or not a closed polygon geometry should be interpreted as a rectangle.\n */\nWkt.Wkt.prototype.isRectangle = false;\n\n/**\n * @augments Wkt.Wkt\n * An object of framework-dependent construction methods used to generate\n * objects belonging to the various geometry classes of the framework.\n */\nWkt.Wkt.prototype.construct = {\n\t/**\n\t * Creates the framework's equivalent point geometry object.\n\t * @param   config      {Object}    An optional properties hash the object should use\n\t * @param   component   {Object}    An optional component to build from\n\t * @return              {google.maps.Marker}\n\t */\n\tpoint: function (config, component) {\n\t\tvar c = component || this.components;\n\n\t\tconfig = config || {};\n\n\t\tconfig.position = new google.maps.LatLng(c[0].y, c[0].x);\n\n\t\treturn new google.maps.Marker(config);\n\t},\n\n\t/**\n\t * Creates the framework's equivalent multipoint geometry object.\n\t * @param   config  {Object}    An optional properties hash the object should use\n\t * @return          {Array}     Array containing multiple google.maps.Marker\n\t */\n\tmultipoint: function (config) {\n\t\tvar i, c, arr;\n\n\t\tc = this.components;\n\n\t\tconfig = config || {};\n\n\t\tarr = [];\n\n\t\tfor (i = 0; i < c.length; i += 1) {\n\t\t\tarr.push(this.construct.point(config, c[i]));\n\t\t}\n\n\t\treturn arr;\n\t},\n\n\t/**\n\t * Creates the framework's equivalent linestring geometry object.\n\t * @param   config      {Object}    An optional properties hash the object should use\n\t * @param   component   {Object}    An optional component to build from\n\t * @return              {google.maps.Polyline}\n\t */\n\tlinestring: function (config, component) {\n\t\tvar i, c;\n\n\t\tc = component || this.components;\n\n\t\tconfig = config || {\n\t\t\teditable: false\n\t\t};\n\n\t\tconfig.path = [];\n\n\t\tfor (i = 0; i < c.length; i += 1) {\n\t\t\tconfig.path.push(new google.maps.LatLng(c[i].y, c[i].x));\n\t\t}\n\n\t\treturn new google.maps.Polyline(config);\n\t},\n\n\t/**\n\t * Creates the framework's equivalent multilinestring geometry object.\n\t * @param   config  {Object}    An optional properties hash the object should use\n\t * @return          {Array}     Array containing multiple google.maps.Polyline instances\n\t */\n\tmultilinestring: function (config) {\n\t\tvar i, c, arr;\n\n\t\tc = this.components;\n\n\t\tconfig = config || {\n\t\t\teditable: false\n\t\t};\n\n\t\tconfig.path = [];\n\n\t\tarr = [];\n\n\t\tfor (i = 0; i < c.length; i += 1) {\n\t\t\tarr.push(this.construct.linestring(config, c[i]));\n\t\t}\n\n\t\treturn arr;\n\t},\n\n\t/**\n\t * Creates the framework's equivalent Box or Rectangle geometry object.\n\t * @param   config      {Object}    An optional properties hash the object should use\n\t * @param   component   {Object}    An optional component to build from\n\t * @return              {google.maps.Rectangle}\n\t */\n\tbox: function (config, component) {\n\t\tvar c = component || this.components;\n\n\t\tconfig = config || {};\n\n\t\tconfig.bounds = new google.maps.LatLngBounds(\n\t\t\tnew google.maps.LatLng(c[0].y, c[0].x),\n\t\t\tnew google.maps.LatLng(c[1].y, c[1].x));\n\n\t\treturn new google.maps.Rectangle(config);\n\t},\n\n\t/**\n\t * Creates the framework's equivalent polygon geometry object.\n\t * @param   config      {Object}    An optional properties hash the object should use\n\t * @param   component   {Object}    An optional component to build from\n\t * @return              {google.maps.Polygon}\n\t */\n\tpolygon: function (config, component) {\n\t\tvar j, k, c, rings, verts;\n\n\t\tvar polygonIsClockwise = function (coords) {\n\t\t\tvar area = 0,\n\t\t\t\tj = null,\n\t\t\t\ti = 0;\n\n\t\t\tfor (i = 0; i < coords.length; i++) {\n\t\t\t\tj = (i + 1) % coords.length;\n\t\t\t\tarea += coords[i].x * coords[j].x;\n\t\t\t\tarea -= coords[j].y * coords[i].y;\n\t\t\t}\n\n\t\t\treturn area > 0;\n\t\t};\n\n\t\tc = component || this.components;\n\n\t\tconfig = config || {\n\t\t\teditable: false // Editable geometry off by default\n\t\t};\n\n\t\tconfig.paths = [];\n\n\t\trings = [];\n\t\tfor (j = 0; j < c.length; j += 1) { // For each ring...\n\n\t\t\tverts = [];\n\t\t\t// NOTE: We iterate to one (1) less than the Array length to skip the last vertex\n\t\t\tfor (k = 0; k < c[j].length - 1; k += 1) { // For each vertex...\n\t\t\t\tverts.push(new google.maps.LatLng(c[j][k].y, c[j][k].x));\n\n\t\t\t} // eo for each vertex\n\n\t\t\tif (j !== 0) {\n\t\t\t\t// Orient inner rings correctly\n\t\t\t\tif (polygonIsClockwise(c[j]) && this.type == 'polygon') {\n\t\t\t\t\tverts.reverse();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\trings.push(verts);\n\t\t} // eo for each ring\n\n\t\tconfig.paths = config.paths.concat(rings);\n\n\t\tif (this.isRectangle) {\n\t\t\treturn (function () {\n\t\t\t\tvar bounds, v;\n\n\t\t\t\tbounds = new google.maps.LatLngBounds();\n\n\t\t\t\tfor (v in rings[0]) { // Ought to be only 1 ring in a Rectangle\n\t\t\t\t\tif (rings[0].hasOwnProperty(v)) {\n\t\t\t\t\t\tbounds.extend(rings[0][v]);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn new google.maps.Rectangle({\n\t\t\t\t\tbounds: bounds\n\t\t\t\t});\n\t\t\t}());\n\t\t} else {\n\t\t\treturn new google.maps.Polygon(config);\n\t\t}\n\t},\n\n\t/**\n\t * Creates the framework's equivalent multipolygon geometry object.\n\t * @param   config  {Object}    An optional properties hash the object should use\n\t * @return          {Array}     Array containing multiple google.maps.Polygon\n\t */\n\tmultipolygon: function (config) {\n\t\tvar i, c, arr;\n\n\t\tc = this.components;\n\n\t\tconfig = config || {\n\t\t\teditable: false\n\t\t};\n\n\t\tconfig.path = [];\n\n\t\tarr = [];\n\n\t\tfor (i = 0; i < c.length; i += 1) {\n\t\t\tarr.push(this.construct.polygon(config, c[i]));\n\t\t}\n\n\t\treturn arr;\n\t}\n\n};\n\n/**\n * @augments Wkt.Wkt\n * A framework-dependent deconstruction method used to generate internal\n * geometric representations from instances of framework geometry. This method\n * uses object detection to attempt to classify members of framework geometry\n * classes into the standard WKT types.\n * @param obj       {Object}    An instance of one of the framework's geometry classes\n * @param multiFlag {Boolean} If true, then the deconstructor will be forced to return a MultiGeometry (multipoint, multilinestring or multipolygon)\n * @return          {Object}    A hash of the 'type' and 'components' thus derived, plus the WKT string of the feature.\n */\nWkt.Wkt.prototype.deconstruct = function (obj, multiFlag) {\n\tvar features, i, j, multiFlag, verts, rings, sign, tmp, response, lat, lng, vertex, ring, linestrings, k;\n\n\t// Shortcut to signed area function (determines clockwise vs counter-clock)\n\tif (google.maps.geometry) {\n\t\tsign = google.maps.geometry.spherical.computeSignedArea;\n\t};\n\n\t// google.maps.LatLng //////////////////////////////////////////////////////\n\tif (obj.constructor === google.maps.LatLng) {\n\n\t\tresponse = {\n\t\t\ttype: 'point',\n\t\t\tcomponents: [{\n\t\t\t\tx: obj.lng(),\n\t\t\t\ty: obj.lat()\n\t\t\t}]\n\t\t};\n\t\treturn response;\n\t}\n\n\t// google.maps.Point //////////////////////////////////////////////////////\n\tif (obj.constructor === google.maps.Point) {\n\t\tresponse = {\n\t\t\ttype: 'point',\n\t\t\tcomponents: [{\n\t\t\t\tx: obj.x,\n\t\t\t\ty: obj.y\n\t\t\t}]\n\t\t};\n\t\treturn response;\n\t}\n\n\t// google.maps.Marker //////////////////////////////////////////////////////\n\tif (obj.constructor === google.maps.Marker) {\n\t\tresponse = {\n\t\t\ttype: 'point',\n\t\t\tcomponents: [{\n\t\t\t\tx: obj.getPosition().lng(),\n\t\t\t\ty: obj.getPosition().lat()\n\t\t\t}]\n\t\t};\n\t\treturn response;\n\t}\n\n\t// google.maps.Polyline ////////////////////////////////////////////////////\n\tif (obj.constructor === google.maps.Polyline) {\n\n\t\tverts = [];\n\t\tfor (i = 0; i < obj.getPath().length; i += 1) {\n\t\t\ttmp = obj.getPath().getAt(i);\n\t\t\tverts.push({\n\t\t\t\tx: tmp.lng(),\n\t\t\t\ty: tmp.lat()\n\t\t\t});\n\t\t}\n\t\tresponse = {\n\t\t\ttype: 'linestring',\n\t\t\tcomponents: verts\n\t\t};\n\t\treturn response;\n\n\t}\n\n\t// google.maps.Polygon /////////////////////////////////////////////////////\n\tif (obj.constructor === google.maps.Polygon) {\n\n\t\trings = [];\n\n\t\tif (multiFlag === undefined) {\n\t\t\tmultiFlag = (function () {\n\t\t\t\tvar areas, i, l;\n\n\t\t\t\tl = obj.getPaths().length;\n\t\t\t\tif (l <= 1) { // Trivial; this is a single polygon\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tif (l === 2) {\n\t\t\t\t\t// If clockwise*clockwise or counter*counter, i.e.\n\t\t\t\t\t//  (-1)*(-1) or (1)*(1), then result would be positive\n\t\t\t\t\tif (sign(obj.getPaths().getAt(0)) * sign(obj.getPaths().getAt(1)) < 0) {\n\t\t\t\t\t\treturn false; // Most likely single polygon with 1 hole\n\t\t\t\t\t}\n\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\t// Must be longer than 3 polygons at this point...\n\t\t\t\tareas = obj.getPaths().getArray().map(function (k) {\n\t\t\t\t\treturn sign(k) / Math.abs(sign(k)); // Unit normalization (outputs 1 or -1)\n\t\t\t\t});\n\n\t\t\t\t// If two clockwise or two counter-clockwise rings are found\n\t\t\t\t//  (at different indices)...\n\t\t\t\tif (areas.indexOf(areas[0]) !== areas.lastIndexOf(areas[0])) {\n\t\t\t\t\tmultiFlag = true; // Flag for holes in one or more polygons\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\n\t\t\t}());\n\t\t}\n\n\t\tfor (i = 0; i < obj.getPaths().length; i += 1) { // For each polygon (ring)...\n\t\t\ttmp = obj.getPaths().getAt(i);\n\t\t\tverts = [];\n\n\t\t\tfor (j = 0; j < obj.getPaths().getAt(i).length; j += 1) { // For each vertex...\n\t\t\t\tverts.push({\n\t\t\t\t\tx: tmp.getAt(j).lng(),\n\t\t\t\t\ty: tmp.getAt(j).lat()\n\t\t\t\t});\n\n\t\t\t}\n\n\t\t\tif (!tmp.getAt(tmp.length - 1).equals(tmp.getAt(0))) {\n\t\t\t\tif (i % 2 !== 0) { // In inner rings, coordinates are reversed...\n\n\t\t\t\t\tverts.push({ // Add the first coordinate again for closure\n\t\t\t\t\t\tx: tmp.getAt(0).lng(),\n\t\t\t\t\t\ty: tmp.getAt(0).lat()\n\t\t\t\t\t});\n\t\t\t\t\tverts.reverse();\n\n\t\t\t\t} else {\n\t\t\t\t\tverts.push({ // Add the first coordinate again for closure\n\t\t\t\t\t\tx: tmp.getAt(0).lng(),\n\t\t\t\t\t\ty: tmp.getAt(0).lat()\n\t\t\t\t\t});\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif (obj.getPaths().length > 1 && i > 0) {\n\t\t\t\t// If this and the last ring have the same signs...\n\t\t\t\tif (sign(obj.getPaths().getAt(i)) > 0 && sign(obj.getPaths().getAt(i - 1)) > 0 ||\n\t\t\t\t\tsign(obj.getPaths().getAt(i)) < 0 && sign(obj.getPaths().getAt(i - 1)) < 0 /*&& !multiFlag*/ ) {\n\t\t\t\t\t// ...They must both be inner rings (or both be outer rings, in a multipolygon)\n\t\t\t\t\tverts = [verts]; // Wrap multipolygons once more (collection)\n\t\t\t\t} else {\n\t\t\t\t\tverts.reverse();\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t//TODO This makes mistakes when a second polygon has holes; it sees them all as individual polygons\n\t\t\t/*if (i % 2 !== 0) { // In inner rings, coordinates are reversed...\n\t\t\t\tverts.reverse();\n\t\t\t}*/\n\n\t\t\trings.push(verts);\n\t\t}\n\n\t\tresponse = {\n\t\t\ttype: (multiFlag) ? 'multipolygon' : 'polygon',\n\t\t\tcomponents: rings\n\t\t};\n\t\treturn response;\n\n\t}\n\n\t// google.maps.Circle //////////////////////////////////////////////////////\n\tif (obj.constructor === google.maps.Circle) {\n\t\tvar point = obj.getCenter();\n\t\tvar radius = obj.getRadius();\n\t\tverts = [];\n\t\tvar d2r = Math.PI / 180; // degrees to radians\n\t\tvar r2d = 180 / Math.PI; // radians to degrees\n\t\tradius = radius / 1609; // meters to miles\n\t\tvar earthsradius = 3963; // 3963 is the radius of the earth in miles\n\t\tvar num_seg = 32; // number of segments used to approximate a circle\n\t\tvar rlat = (radius / earthsradius) * r2d;\n\t\tvar rlng = rlat / Math.cos(point.lat() * d2r);\n\n\t\tfor (var n = 0; n <= num_seg; n++) {\n\t\t\tvar theta = Math.PI * (n / (num_seg / 2));\n\t\t\tlng = point.lng() + (rlng * Math.cos(theta)); // center a + radius x * cos(theta)\n\t\t\tlat = point.lat() + (rlat * Math.sin(theta)); // center b + radius y * sin(theta)\n\t\t\tverts.push({\n\t\t\t\tx: lng,\n\t\t\t\ty: lat\n\t\t\t});\n\t\t}\n\n\t\tresponse = {\n\t\t\ttype: 'polygon',\n\t\t\tcomponents: [verts]\n\t\t};\n\n\t\treturn response;\n\n\t}\n\n\t// google.maps.LatLngBounds ///////////////////////////////////////////////////\n\tif (obj.constructor === google.maps.LatLngBounds) {\n\n\t\ttmp = obj;\n\t\tverts = [];\n\t\tverts.push({ // NW corner\n\t\t\tx: tmp.getSouthWest().lng(),\n\t\t\ty: tmp.getNorthEast().lat()\n\t\t});\n\n\t\tverts.push({ // NE corner\n\t\t\tx: tmp.getNorthEast().lng(),\n\t\t\ty: tmp.getNorthEast().lat()\n\t\t});\n\n\t\tverts.push({ // SE corner\n\t\t\tx: tmp.getNorthEast().lng(),\n\t\t\ty: tmp.getSouthWest().lat()\n\t\t});\n\n\t\tverts.push({ // SW corner\n\t\t\tx: tmp.getSouthWest().lng(),\n\t\t\ty: tmp.getSouthWest().lat()\n\t\t});\n\n\t\tverts.push({ // NW corner (again, for closure)\n\t\t\tx: tmp.getSouthWest().lng(),\n\t\t\ty: tmp.getNorthEast().lat()\n\t\t});\n\n\t\tresponse = {\n\t\t\ttype: 'polygon',\n\t\t\tisRectangle: true,\n\t\t\tcomponents: [verts]\n\t\t};\n\n\t\treturn response;\n\n\t}\n\n\t// google.maps.Rectangle ///////////////////////////////////////////////////\n\tif (obj.constructor === google.maps.Rectangle) {\n\n\t\ttmp = obj.getBounds();\n\t\tverts = [];\n\t\tverts.push({ // NW corner\n\t\t\tx: tmp.getSouthWest().lng(),\n\t\t\ty: tmp.getNorthEast().lat()\n\t\t});\n\n\t\tverts.push({ // NE corner\n\t\t\tx: tmp.getNorthEast().lng(),\n\t\t\ty: tmp.getNorthEast().lat()\n\t\t});\n\n\t\tverts.push({ // SE corner\n\t\t\tx: tmp.getNorthEast().lng(),\n\t\t\ty: tmp.getSouthWest().lat()\n\t\t});\n\n\t\tverts.push({ // SW corner\n\t\t\tx: tmp.getSouthWest().lng(),\n\t\t\ty: tmp.getSouthWest().lat()\n\t\t});\n\n\t\tverts.push({ // NW corner (again, for closure)\n\t\t\tx: tmp.getSouthWest().lng(),\n\t\t\ty: tmp.getNorthEast().lat()\n\t\t});\n\n\t\tresponse = {\n\t\t\ttype: 'polygon',\n\t\t\tisRectangle: true,\n\t\t\tcomponents: [verts]\n\t\t};\n\n\t\treturn response;\n\n\t}\n\n\t// google.maps.Data Geometry Types /////////////////////////////////////////////////////\n\n\t// google.maps.Data.Feature /////////////////////////////////////////////////////\n\tif (obj.constructor === google.maps.Data.Feature) {\n\t\treturn this.deconstruct.call(this, obj.getGeometry());\n\t}\n\n\t// google.maps.Data.Point /////////////////////////////////////////////////////\n\tif (obj.constructor === google.maps.Data.Point) {\n\t\t//console.log('It is a google.maps.Data.Point');\n\t\tresponse = {\n\t\t\ttype: 'point',\n\t\t\tcomponents: [{\n\t\t\t\tx: obj.get().lng(),\n\t\t\t\ty: obj.get().lat()\n\t\t\t}]\n\t\t};\n\t\treturn response;\n\t}\n\n\t// google.maps.Data.LineString /////////////////////////////////////////////////////\n\tif (obj.constructor === google.maps.Data.LineString) {\n\t\tverts = [];\n\t\t//console.log('It is a google.maps.Data.LineString');\n\t\tfor (i = 0; i < obj.getLength(); i += 1) {\n\t\t\tvertex = obj.getAt(i);\n\t\t\tverts.push({\n\t\t\t\tx: vertex.lng(),\n\t\t\t\ty: vertex.lat()\n\t\t\t});\n\t\t}\n\t\tresponse = {\n\t\t\ttype: 'linestring',\n\t\t\tcomponents: verts\n\t\t};\n\t\treturn response;\n\t}\n\n\t// google.maps.Data.Polygon /////////////////////////////////////////////////////\n\tif (obj.constructor === google.maps.Data.Polygon) {\n\t\tvar rings = [];\n\t\t//console.log('It is a google.maps.Data.Polygon');\n\t\tfor (i = 0; i < obj.getLength(); i += 1) { // For each ring...\n\t\t\tring = obj.getAt(i);\n\t\t\tvar verts = [];\n\t\t\tfor (j = 0; j < ring.getLength(); j += 1) { // For each vertex...\n\t\t\t\tvertex = ring.getAt(j);\n\t\t\t\tverts.push({\n\t\t\t\t\tx: vertex.lng(),\n\t\t\t\t\ty: vertex.lat()\n\t\t\t\t});\n\t\t\t}\n\t\t\tverts.push({\n\t\t\t\tx: ring.getAt(0).lng(),\n\t\t\t\ty: ring.getAt(0).lat()\n\t\t\t});\n\n\t\t\trings.push(verts);\n\t\t}\n\t\tresponse = {\n\t\t\ttype: 'polygon',\n\t\t\tcomponents: rings\n\t\t};\n\n\t\treturn response;\n\t}\n\n\t// google.maps.Data.MultiPoint /////////////////////////////////////////////////////\n\tif (obj.constructor === google.maps.Data.MultiPoint) {\n\t\tverts = [];\n\t\tfor (i = 0; i < obj.getLength(); i += 1) {\n\t\t\tvertex = obj.getAt(i);\n\t\t\tverts.push([{\n\t\t\t\tx: vertex.lng(),\n\t\t\t\ty: vertex.lat()\n\t\t\t}]);\n\t\t}\n\t\tresponse = {\n\t\t\ttype: 'multipoint',\n\t\t\tcomponents: verts\n\t\t};\n\t\treturn response;\n\t}\n\n\t// google.maps.Data.MultiLineString /////////////////////////////////////////////////////\n\tif (obj.constructor === google.maps.Data.MultiLineString) {\n\t\tlinestrings = []\n\t\tfor (i = 0; i < obj.getLength(); i += 1) {\n\t\t\tverts = [];\n\t\t\tvar linestring = obj.getAt(i);\n\t\t\tfor (j = 0; j < linestring.getLength(); j += 1) {\n\t\t\t\tvertex = linestring.getAt(j);\n\t\t\t\tverts.push({\n\t\t\t\t\tx: vertex.lng(),\n\t\t\t\t\ty: vertex.lat()\n\t\t\t\t});\n\t\t\t}\n\t\t\tlinestrings.push(verts);\n\t\t}\n\t\tresponse = {\n\t\t\ttype: 'multilinestring',\n\t\t\tcomponents: linestrings\n\t\t};\n\t\treturn response;\n\t}\n\n\t// google.maps.Data.MultiPolygon /////////////////////////////////////////////////////\n\tif (obj.constructor === google.maps.Data.MultiPolygon) {\n\n\t\tvar polygons = [];\n\n\t\t//console.log('It is a google.maps.Data.MultiPolygon');\n\t\tfor (k = 0; k < obj.getLength(); k += 1) { // For each multipolygon\n\t\t\tvar polygon = obj.getAt(k);\n\t\t\tvar rings = [];\n\t\t\tfor (i = 0; i < polygon.getLength(); i += 1) { // For each ring...\n\t\t\t\tring = polygon.getAt(i);\n\t\t\t\tvar verts = [];\n\t\t\t\tfor (j = 0; j < ring.getLength(); j += 1) { // For each vertex...\n\t\t\t\t\tvertex = ring.getAt(j);\n\t\t\t\t\tverts.push({\n\t\t\t\t\t\tx: vertex.lng(),\n\t\t\t\t\t\ty: vertex.lat()\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tverts.push({\n\t\t\t\t\tx: ring.getAt(0).lng(),\n\t\t\t\t\ty: ring.getAt(0).lat()\n\t\t\t\t});\n\n\t\t\t\trings.push(verts);\n\t\t\t}\n\t\t\tpolygons.push(rings);\n\t\t}\n\n\t\tresponse = {\n\t\t\ttype: 'multipolygon',\n\t\t\tcomponents: polygons\n\t\t};\n\t\treturn response;\n\t}\n\n\t// google.maps.Data.GeometryCollection /////////////////////////////////////////////////////\n\tif (obj.constructor === google.maps.Data.GeometryCollection) {\n\n\t\tvar objects = [];\n\t\tfor (k = 0; k < obj.getLength(); k += 1) { // For each multipolygon\n\t\t\tvar object = obj.getAt(k);\n\t\t\tobjects.push(this.deconstruct.call(this, object));\n\t\t}\n\t\t//console.log('It is a google.maps.Data.GeometryCollection', objects);\n\t\tresponse = {\n\t\t\ttype: 'geometrycollection',\n\t\t\tcomponents: objects\n\t\t};\n\t\treturn response;\n\t}\n\n\t// Array ///////////////////////////////////////////////////////////////////\n\tif (Wkt.isArray(obj)) {\n\t\tfeatures = [];\n\n\t\tfor (i = 0; i < obj.length; i += 1) {\n\t\t\tfeatures.push(this.deconstruct.call(this, obj[i], true));\n\t\t}\n\n\t\tresponse = {\n\n\t\t\ttype: (function () {\n\t\t\t\tvar k, type = obj[0].constructor;\n\n\t\t\t\tfor (k = 0; k < obj.length; k += 1) {\n\t\t\t\t\t// Check that all items have the same constructor as the first item\n\t\t\t\t\tif (obj[k].constructor !== type) {\n\t\t\t\t\t\t// If they don't, type is heterogeneous geometry collection\n\t\t\t\t\t\treturn 'geometrycollection';\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tswitch (type) {\n\t\t\t\tcase google.maps.Marker:\n\t\t\t\t\treturn 'multipoint';\n\t\t\t\tcase google.maps.Polyline:\n\t\t\t\t\treturn 'multilinestring';\n\t\t\t\tcase google.maps.Polygon:\n\t\t\t\t\treturn 'multipolygon';\n\t\t\t\tdefault:\n\t\t\t\t\treturn 'geometrycollection';\n\t\t\t\t}\n\n\t\t\t}()),\n\t\t\tcomponents: (function () {\n\t\t\t\t// Pluck the components from each Wkt\n\t\t\t\tvar i, comps;\n\n\t\t\t\tcomps = [];\n\t\t\t\tfor (i = 0; i < features.length; i += 1) {\n\t\t\t\t\tif (features[i].components) {\n\t\t\t\t\t\tcomps.push(features[i].components);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\tcomps: comps\n\t\t\t\t};\n\t\t\t}())\n\n\t\t};\n\t\tresponse.components = response.components.comps;\n\t\treturn response;\n\n\t}\n\n\tconsole.log('The passed object does not have any recognizable properties.');\n\n};\n\nexport {\n\tWkt\n};\nexport function Wicket() {\n\treturn new Wkt.Wkt();\n};\n\nexport function WKT2Object(WKT) {\n\tvar wkt = new Wkt.Wkt();\n\ttry {\n\t\twkt.read(WKT);\n\t} catch (e) {\n\t\tconsole.zlog('Imposible leer geometría', WKT);\n\t\treturn false;\n\t}\n\ttry {\n\t\tvar obj = wkt.toObject({\n\t\t\treverseInnerPolygons: true\n\t\t}); // Make an object\n\t\tobj.wkt = wkt;\n\t\treturn obj;\n\t} catch (e) {\n\t\tconsole.warn('Imposible exportar geometría', WKT);\n\t\treturn false;\n\t}\n\n};\n","import $ from 'jquery';\n\nvar jqContainerLoading = null,\n\tremoveEvent = null;\nvar preloaderFN = function (id_selector) {\n\tvar preloader = $('<div class=\"preloader\">'),\n\t\tloading = $('<div class=\"preloader-wrapper big active\" id=\"loading\">'),\n\t\tspinnerlayer = $('<div class=\"spinner-layer spinner-blue-only\">')\n\t\t.append('<div class=\"circle-clipper left\"><div class=\"circle\"></div></div>')\n\t\t.append('<div class=\"gap-patch\"><div class=\"circle\"></div></div>')\n\t\t.append('<div class=\"circle-clipper right\"><div class=\"circle\"></div>')\n\t\t.appendTo(loading);\n\n\tpreloader.append(loading).append('<div id=\"preload_text\">');\n\tpreloader.attr('id', id_selector.replace('#', ''));\n\treturn preloader;\n};\n/**\n * Muestra un div con una animación de \"cargando\"\n * @param  {integer} timeout   segundos de timeout o un flag (0,1,2)\n * @param  {string} message mensaje a desplegar\n * @param  {string} container  selector CSS del contenedor\n * @return {void}\n */\nexport function loadingcircle(timeout, message, container) {\n\n\tvar theGlobalvars = window.globalvars || {};\n\ttheGlobalvars.containerIds = theGlobalvars.containerIds || {};\n\n\tvar loadingcircleId = theGlobalvars.containerIds.loadingcircleId || '#preloader';\n\tjqContainerLoading = jqContainerLoading || $(loadingcircleId);\n\n\tmessage = message || '';\n\n\tif (jqContainerLoading.length === 0) {\n\t\tjqContainerLoading = preloaderFN(loadingcircleId);\n\t}\n\n\tvar removeContainer = function removeContainer(delay) {\n\n\t\treturn window.setTimeout(function () {\n\t\t\tjqContainerLoading.addClass('animated fadeOut');\n\t\t\twindow.setTimeout(function () {\n\t\t\t\tjqContainerLoading.detach();\n\t\t\t\tvar garbagedivs = $('body').find(loadingcircleId);\n\t\t\t\tgarbagedivs.detach();\n\t\t\t}, 1000);\n\t\t}, delay);\n\t};\n\tif (removeEvent) {\n\t\t//console.log('clearTimeout', removeEvent);\n\t\twindow.clearTimeout(removeEvent);\n\t} else {\n\t\t//console.log('no remove event detected');\n\t}\n\n\tjqContainerLoading.attr('class', 'preloader');\n\n\tif (timeout === 0) {\n\t\tremoveEvent = removeContainer(500);\n\t} else {\n\n\t\tif (container) {\n\t\t\tjqContainerLoading.addClass('preloader_padding_container');\n\t\t} else {\n\t\t\tjqContainerLoading.addClass('preloader_padding');\n\t\t\tcontainer = 'body';\n\t\t}\n\t\t$(container).append(jqContainerLoading);\n\t\t$('#preload_text').html(message);\n\n\t\tif (timeout >= 2) {\n\t\t\ttimeout = Math.max(timeout, 1000);\n\t\t\tremoveEvent = removeContainer(timeout);\n\t\t}\n\t}\n\treturn jqContainerLoading;\n\n}\n","import $ from 'jquery';\n\nexport {\n\tCollectionUtils\n}\nfrom './collection_helper.js';\n\nimport {\n\tMarkerFactory as ButtonFactory\n} from 'ig_markerfactory';\n\nimport {\n\tWkt,\n\tWicket,\n\tWKT2Object\n}\nfrom './wicket_helper.js';\nimport {\n\tloadingcircle\n}\nfrom './loadingcircle.js';\nimport {\n\tcolorset\n}\nfrom './colorset.js';\n\nvar root = (typeof self == 'object' && self.self === self && self) ||\n\t(typeof global == 'object' && global.global === global && global);\n\n/**\n * Sets the modal class.\n *\n * @param      {string}    cls      The cls\n * @param      {<type>}    options  The options\n * @return     {Function}  { description_of_the_return_value }\n */\nfunction setModalClass(cls, options) {\n\n\toptions = options || {\n\t\tfooter: true\n\t};\n\tvar modal = $('#dialogomodal'),\n\t\tmodal_body = $('.modal-body'),\n\t\tmodal_footer = $('.modal-footer');\n\n\tmodal.attr('style', '');\n\tmodal.attr('class', cls + ' modal');\n\tmodal_body.attr('style', '');\n\n\tif (options.footer === false) {\n\t\tmodal_footer.addClass('invisible');\n\t} else {\n\t\tmodal_footer.removeClass('invisible');\n\t}\n\n\treturn modal;\n}\n\n/**\n * Determines if array.\n *\n * @param      {<type>}   obj     The object\n * @return     {boolean}  True if array, False otherwise.\n */\nfunction isArray(obj) {\n\treturn Object.prototype.toString.call(obj) === \"[object Array]\";\n}\n\nfunction spaceString(str) {\n\tvar cleanstr = String(str).replace(/[_]/g, ' ');\n\treturn cleanstr;\n}\n\n/**\n * Method for cleaning special chars\n * @param  {String} str   source string\n * @param  {Boolean} strict if true, will replace even underscores\n * @return {String}        Clean string\n */\nfunction cleanString(str, strict) {\n\tvar cleanstr = String(str).replace(/[,.\\-& ]/g, '_');\n\tif (strict) {\n\t\tcleanstr = cleanstr.replace(/[_-]/g, '').toLowerCase();\n\t}\n\tcleanstr = cleanstr.replace(/[ÀÁÂÃÄÅ]/g, \"A\");\n\tcleanstr = cleanstr.replace(/[àáâãäå]/g, \"a\");\n\tcleanstr = cleanstr.replace(/[ÈÉÊË]/g, \"E\");\n\tcleanstr = cleanstr.replace(/[é]/g, \"e\");\n\tcleanstr = cleanstr.replace(/[Í]/g, \"I\");\n\tcleanstr = cleanstr.replace(/[í]/g, \"i\");\n\tcleanstr = cleanstr.replace(/[Ó]/g, \"O\");\n\tcleanstr = cleanstr.replace(/(ó|ó)/g, \"o\");\n\tcleanstr = cleanstr.replace(/[Ú]/g, \"U\");\n\tcleanstr = cleanstr.replace(/[ú]/g, \"u\");\n\tcleanstr = cleanstr.replace(/[Ñ]/g, \"N\");\n\tcleanstr = cleanstr.replace(/[ñ]/g, \"n\");\n\tcleanstr = cleanstr.replace(/(__)+/g, '_');\n\n\tcleanstr = cleanstr.replace(/\\'/g, '');\n\treturn cleanstr;\n}\n\n/**\n * { function_description }\n *\n * @param      {number}  limit   The limit\n * @return     {string}  { description_of_the_return_value }\n */\nfunction randomname(limit) {\n\tlimit = limit || 5;\n\tvar text = \"\";\n\tvar possible = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n\n\tfor (var i = 0; i < limit; i++) {\n\t\ttext += possible.charAt(Math.floor(Math.random() * possible.length));\n\t}\n\n\treturn text;\n}\n/**\n * Gets the cookie.\n *\n * @param      {string}    name    The name\n * @return     {Function}  The cookie.\n */\nfunction getCookie(name) {\n\tvar match = root.document.cookie.match(new RegExp(name + '=([^;]+)'));\n\tif (match) {\n\t\treturn match[1];\n\t}\n}\nexport {\n\tButtonFactory,\n\tWkt,\n\tWicket,\n\tWKT2Object,\n\tloadingcircle,\n\tcolorset,\n\tsetModalClass,\n\tisArray,\n\tspaceString,\n\tcleanString,\n\trandomname,\n\tgetCookie\n};\nexport default {\n\tButtonFactory: ButtonFactory,\n\tWkt: Wkt,\n\tWicket: Wicket,\n\tWKT2Object: WKT2Object,\n\tloadingcircle: loadingcircle,\n\tcolorset: colorset,\n\tsetModalClass: setModalClass,\n\tisArray: isArray,\n\tspaceString: spaceString,\n\tcleanString: cleanString,\n\trandomname: randomname,\n\tgetCookie: getCookie\n};\n","import $ from 'jquery';\nimport _ from 'underscore';\n\n/**\n * Campos que no deben tomarse en cuenta a la hora de reconocer las características de un dataset\n * @type {Array}\n */\nvar blacklistedfields = [\n\t'id',\n\t'strokeOpacity',\n\t'clickable',\n\t'strokeWeight',\n\t'fillOpacity',\n\t'shape',\n\t'The_Radio_google',\n\t'the_geom_google',\n\t'the_radio_google',\n\t'geocoding_address',\n\t'gm_accessors_',\n\t'gm_bindings_',\n\t'icon',\n\t'position',\n\t'lat_google',\n\t'lon_google',\n\t'weight',\n\t'id_dataset',\n\t'id_instagis',\n\t'location',\n\t'point',\n\t'center',\n\t'value'\n];\n\nvar CollectionUtils = function (DataSet) {\n\n\tthis.DataSet = DataSet;\n\tthis.DataSet.type = this.DataSet.type || this.DataSet.category;\n\treturn this;\n};\n\nCollectionUtils.prototype.addGeometricBoundaries = function () {\n\tvar element = this.DataSet,\n\t\thtml = '<h5 for=\"boundaries_' + element.domid + '\">Filter By Boundaries</h5>';\n\n\thtml += '<div class=\"span11  boundariescontainer\" data-theproperty=\"boundaries\">';\n\n\thtml += '<select id=\"boundaries_' + element.domid + '\" class=\"boundaries small span11\">';\n\thtml += '<option value=\"0\">Any place</option>';\n\thtml += '<option value=\"1\">Within Visible Zone</option>';\n\n\tglobalvars.mapModel.Polygons.each(function (Polygon) {\n\t\thtml += _.template('<option value=\"{{id}}\">Within {{name}}</option>')(Polygon.attributes);\n\t});\n\n\thtml += '</select>';\n\thtml += '</div>';\n\treturn html;\n};\n\n/**\n * Recorre una colección y devuelve sus campos\n * @param  {gmaps.FeatureCollection | gmaps.MVCArray | gmaps.Data} [DataSet] la colección a recorrer\n * si no se especifica, usará el DataSet asignado al instanciar.\n * @return {Object}    Los campos del Dataset\n */\nCollectionUtils.prototype.findFields = function (DataSet, callback) {\n\tvar _this = this;\n\tvar fields = {},\n\t\telemento;\n\tif (!DataSet) {\n\t\tDataSet = _this.DataSet;\n\t}\n\n\tif (!DataSet) {\n\t\treturn fields;\n\t}\n\treturn new Promise(function (resolve, reject) {\n\n\t\tif (DataSet.fieldsFound !== true || DataSet.fields === undefined || _.isEmpty(DataSet.fields)) {\n\n\t\t\t//console.info('getting fields for FeatureCollection');\n\n\t\t\telemento = _.uniq(_.flatten(_.map(DataSet.getArray(), function (item) {\n\t\t\t\tvar properties = item.getProperties ? item.getProperties() : item.properties;\n\t\t\t\tvar keys = _.keys(properties);\n\t\t\t\treturn keys;\n\t\t\t})), false);\n\n\t\t\t//console.zlog('field Keys', elemento);\n\n\t\t\tvar finalkeys = _.chain(elemento).reduce(function (memo, propiedad) {\n\t\t\t\tmemo[propiedad] = {\n\t\t\t\t\tlabel: propiedad,\n\t\t\t\t\tvalue: propiedad\n\t\t\t\t};\n\t\t\t\treturn memo;\n\t\t\t}, {}).omit(blacklistedfields).value();\n\n\t\t\t//DataSet.fields = finalkeys;\n\t\t\t/*_.each(finalkeys, function (attrs, fieldname) {\n\t\t\t\tconsole.zlog('fieldname', fieldname, attrs);\n\t\t\t\tconsole.zlog('Before DataSet.fields[', fieldname, ']', DataSet.fields, DataSet.fields[fieldname]);\n\t\t\t\tconsole.zlog('After DataSet.fields[', fieldname, ']', DataSet.fields, DataSet.fields[fieldname]);\n\t\t\t});*/\n\n\t\t\tDataSet.fields = finalkeys;\n\n\t\t\t//console.zlog('finalkeys Object', finalkeys, 'Datasetfields', DataSet.fields);\n\n\t\t\tDataSet.fieldsFound = true;\n\t\t}\n\n\t\tif (DataSet.Model && DataSet.Model.columns) {\n\t\t\tDataSet.Model.columns.each(function (column) {\n\t\t\t\tDataSet.fields[column.get('nombre_fisico')] = {\n\t\t\t\t\tvalue: column.get('nombre_fisico'),\n\t\t\t\t\tlabel: column.get('alias')\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\n\t\tif (callback) {\n\t\t\tcallback(null, DataSet.fields);\n\t\t}\n\t\tresolve(DataSet.fields);\n\t});\n\n};\n\n/**\n * Synchronous: Recorre una colección y devuelve sus campos no numéricos\n * @param  {gmaps.FeatureCollection | gmaps.MVCArray | gmaps.Data} [DataSet] la colección a recorrer\n * si no se especifica, usará el DataSet asignado al instanciar.\n * @return {Object}    Los campos no numéricos del Dataset\n */\nCollectionUtils.prototype.findQualityFields = function (DataSet) {\n\tvar _this = this;\n\tvar qualityfilters = {};\n\tif (!DataSet) {\n\t\tDataSet = _this.DataSet;\n\t}\n\tif (!DataSet.getArray || DataSet.getArray().length === 0) {\n\t\tconsole.zwarn('empty dataset');\n\t\treturn qualityfilters;\n\t}\n\n\t_.each(DataSet.fields, function (propiedadObj, propiedad) {\n\n\t\t//console.zlog(propiedadObj, propiedad); return;\n\t\tif (propiedadObj && propiedadObj.value) {\n\t\t\tvar arraypropiedad = _.map(DataSet.getArray(), function (element) {\n\t\t\t\treturn element.get ? element.get(propiedadObj.value) : element[propiedadObj.value]; // || element['properties']['gse_preponderante'];\n\t\t\t});\n\n\t\t\tif (DataSet.backend_grouped) {\n\t\t\t\tarraypropiedad = _.flatten(arraypropiedad);\n\t\t\t}\n\t\t\tvar registros_numericos = _.filter(arraypropiedad, Number),\n\t\t\t\tregistros_totales = _.compact(arraypropiedad);\n\n\t\t\t// si menos de la mitad de los registros son numéricos\n\t\t\tif (registros_numericos.length < registros_totales.length / 2) {\n\t\t\t\t/*console.zdebug('QUALITYFILTERS ES NO NUMERICO', {\n\t\t\t\t\t\tpropiedad: propiedadObj.value,\n\t\t\t\t\t\tregistros_numericos: registros_numericos,\n\t\t\t\t\t\tregistros_totales: registros_totales,\n\t\t\t\t\t\t//arraypropiedad: arraypropiedad,\n\t\t\t\t\t});*/\n\n\t\t\t\tvar data = _.map(_.groupBy(arraypropiedad), function (c, d) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tname: d,\n\t\t\t\t\t\tcount: c.length\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t\tqualityfilters[propiedad] = {\n\t\t\t\t\tlabel: propiedadObj.label ? propiedadObj.label : propiedad,\n\t\t\t\t\tvalue: propiedadObj.value ? propiedadObj.value : propiedad,\n\t\t\t\t\tdata: data\n\t\t\t\t};\n\n\t\t\t} else {\n\t\t\t\t//delete(DataSet.qualityfilters[propiedad]);\n\t\t\t\t/*console.zdebug('QUALITYFILTERS ES NUMERICO', {\n\t\t\t\t\t\tpropiedad: propiedadObj.value,\n\t\t\t\t\t\tregistros_numericos: registros_numericos,\n\t\t\t\t\t\tregistros_totales: registros_totales,\n\t\t\t\t\t\t//arraypropiedad: arraypropiedad,\n\t\t\t\t\t});*/\n\n\t\t\t}\n\t\t}\n\t});\n\tDataSet.qualityfilters = qualityfilters;\n\t//console.zdebug('DataSet qualityfilters are', qualityfilters);\n\treturn qualityfilters;\n};\n\n/**\n * Synchronous:  Recorre una colección y devuelve sus campos numéricos\n * @param  {gmaps.FeatureCollection | gmaps.MVCArray | gmaps.Data} [DataSet] la colección a recorrer\n * si no se especifica, usará el DataSet asignado al instanciar.\n * @return {Object}    Los campos numéricos del Dataset\n */\nCollectionUtils.prototype.findQuantityFields = function (DataSet) {\n\tvar _this = this,\n\t\tquantityfilters = {\n\t\t\tcount: {\n\t\t\t\tvalue: 'count',\n\t\t\t\tlabel: 'count',\n\t\t\t\tmin: 1,\n\t\t\t\tmax: 1\n\t\t\t}\n\t\t};\n\tif (!DataSet) {\n\t\tDataSet = _this.DataSet;\n\t}\n\n\tif (!DataSet.getArray || !DataSet.getArray() || DataSet.getArray().length === 0) {\n\t\t//console.zdebug('empty dataset');\n\t\treturn quantityfilters;\n\t}\n\n\t_.each(DataSet.fields, function (propiedadObj, propiedad) {\n\t\tif (propiedadObj && propiedadObj.value !== null && propiedadObj.value !== undefined) {\n\t\t\tvar arraypropiedad = _.map(DataSet.getArray(), function (element) {\n\t\t\t\tif (element.get) {\n\t\t\t\t\treturn element.get(propiedadObj.value);\n\t\t\t\t} else if (element.properties) {\n\t\t\t\t\treturn element.properties[propiedadObj.value];\n\t\t\t\t} else {\n\t\t\t\t\treturn element[propiedadObj.value];\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (DataSet.backend_grouped) {\n\t\t\t\tarraypropiedad = _.flatten(arraypropiedad);\n\t\t\t}\n\n\t\t\tvar registros_numericos = _.filter(arraypropiedad, Number),\n\t\t\t\tregistros_totales = _.compact(arraypropiedad);\n\n\t\t\t// si al menos un quinto de los registros son numéricos para esta propiedad\n\t\t\tif (registros_numericos.length > registros_totales.length / 5) {\n\n\t\t\t\t/*console.zdebug('QUANTITYFILTERS: NUMERICO', {\n\t\t\t\t\t\tpropiedad: propiedadObj.value,\n\t\t\t\t\t\tregistros_numericos: registros_numericos,\n\t\t\t\t\t\tregistros_totales: registros_totales,\n\t\t\t\t\t\t//arraypropiedad: arraypropiedad,\n\t\t\t\t\t});*/\n\n\t\t\t\tvar localmin = Number(_.min(_.filter(arraypropiedad, Number))),\n\t\t\t\t\tlocalmax = Number(_.max(_.filter(arraypropiedad, Number)));\n\n\t\t\t\tquantityfilters[propiedad] = {\n\t\t\t\t\tmin: Math.min(localmin, localmax),\n\t\t\t\t\tmax: Math.max(localmin, localmax),\n\t\t\t\t\tlabel: propiedadObj.label ? propiedadObj.label : propiedad,\n\t\t\t\t\tvalue: propiedadObj.value ? propiedadObj.value : propiedad\n\t\t\t\t};\n\n\t\t\t} else {\n\t\t\t\t/*console.zdebug('QUANTITYFILTERS: NO NUMERICO', {\n\t\t\t\t\t\tpropiedad: propiedadObj.value,\n\t\t\t\t\t\tregistros_numericos: registros_numericos,\n\t\t\t\t\t\tregistros_totales: registros_totales,\n\t\t\t\t\t\t//arraypropiedad: arraypropiedad,\n\t\t\t\t\t});*/\n\t\t\t\t//delete(DataSet.quantityfilters[propiedad]);\n\t\t\t}\n\n\t\t} else {\n\t\t\t//console.zlog('Not value', propiedad, propiedadObj);\n\t\t}\n\t});\n\n\tDataSet.quantityfilters = quantityfilters;\n\t//console.zdebug('DataSet quantityfilters are', quantityfilters);\n\n\treturn quantityfilters;\n};\n\n/**\n * Asynchronous: traverses the collection discriminating each field as quantityfilter or qualityfilder\n * @return {Promise}    A promise that resolves as a hash {qualityfilters,quantityfilters}\n */\nCollectionUtils.prototype.discriminateFields = function () {\n\tvar _this = this,\n\t\tqualityfilters = {},\n\t\tquantityfilters = {\n\t\t\tcount: {\n\t\t\t\tvalue: 'count',\n\t\t\t\tlabel: 'count',\n\t\t\t\tmin: 1,\n\t\t\t\tmax: 1\n\t\t\t}\n\t\t},\n\t\tDataSet = _this.DataSet;\n\n\tif (!DataSet.getArray || DataSet.getArray().length === 0) {\n\t\tconsole.zwarn('empty dataset');\n\t\treturn Promise.resolve({\n\t\t\tquantityfilters: quantityfilters,\n\t\t\tqualityfilters: qualityfilters\n\t\t});\n\t}\n\treturn new Promise(function (resolve, reject) {\n\n\t\t_.each(DataSet.fields, function (propiedadObj, propiedad) {\n\t\t\tif (propiedadObj && propiedadObj.value !== null && propiedadObj.value !== undefined) {\n\t\t\t\tvar arraypropiedad = _.map(DataSet.getArray(), function (element) {\n\t\t\t\t\tif (element.get) {\n\t\t\t\t\t\treturn element.get(propiedadObj.value);\n\t\t\t\t\t} else if (element.properties) {\n\t\t\t\t\t\treturn element.properties[propiedadObj.value];\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn element[propiedadObj.value];\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif (DataSet.backend_grouped) {\n\t\t\t\t\tarraypropiedad = _.flatten(arraypropiedad);\n\t\t\t\t}\n\n\t\t\t\tvar registros_numericos = _.filter(arraypropiedad, Number),\n\t\t\t\t\tregistros_totales = _.compact(arraypropiedad);\n\n\t\t\t\t// si al menos un quinto de los registros son numéricos para esta propiedad\n\t\t\t\tif (registros_numericos.length > registros_totales.length / 5) {\n\n\t\t\t\t\tvar localmin = Number(_.min(_.filter(arraypropiedad, Number))),\n\t\t\t\t\t\tlocalmax = Number(_.max(_.filter(arraypropiedad, Number)));\n\n\t\t\t\t\tquantityfilters[propiedad] = {\n\t\t\t\t\t\tmin: Math.min(localmin, localmax),\n\t\t\t\t\t\tmax: Math.max(localmin, localmax),\n\t\t\t\t\t\tlabel: propiedadObj.label ? propiedadObj.label : propiedad,\n\t\t\t\t\t\tvalue: propiedadObj.value ? propiedadObj.value : propiedad\n\t\t\t\t\t};\n\n\t\t\t\t} else {\n\t\t\t\t\tvar data = _.map(_.groupBy(arraypropiedad), function (c, d) {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tname: d,\n\t\t\t\t\t\t\tcount: c.length\n\t\t\t\t\t\t};\n\t\t\t\t\t});\n\t\t\t\t\tqualityfilters[propiedad] = {\n\t\t\t\t\t\tlabel: propiedadObj.label ? propiedadObj.label : propiedad,\n\t\t\t\t\t\tvalue: propiedadObj.value ? propiedadObj.value : propiedad,\n\t\t\t\t\t\tdata: data\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t}\n\t\t});\n\n\t\tDataSet.quantityfilters = quantityfilters;\n\t\tDataSet.qualityfilters = qualityfilters;\n\t\t//console.zdebug('DataSet qualityfilters are', qualityfilters);\n\t\tresolve({\n\t\t\tquantityfilters: quantityfilters,\n\t\t\tqualityfilters: qualityfilters\n\t\t});\n\n\t});\n};\n\nexport {\n\tCollectionUtils\n};\n","export var colorset = {\n\t\"polygon_mycolor\": {\n\t\t\"rows\": 4,\n\t\t\"cols\": 9,\n\t\t\"subThemeColors\": [\"f2f2f2\", \"ddd9c3\", \"c6d9f0\", \"dbe5f1\", \"f2dcdb\", \"ebf1dd\", \"e5e0ec\", \"dbeef3\", \"fdeada\", \"d8d8d8\", \"c4bd97\", \"8db3e2\", \"b8cce4\", \"e5b9b7\", \"d7e3bc\",\n\t\t\t\"ccc1d9\",\n\t\t\t\"b7dde8\", \"fbd5b5\", \"bfbfbf\", \"938953\", \"548dd4\", \"95b3d7\", \"d99694\", \"c3d69b\", \"b2a2c7\", \"92cddc\", \"fac08f\", \"a5a5a5\", \"494429\", \"17365d\", \"366092\", \"953734\", \"76923c\",\n\t\t\t\"5f497a\", \"31859b\", \"e36c09\", \"7f7f7f\", \"1d1b10\", \"0f243e\", \"244061\", \"632423\", \"4f6128\", \"3f3151\", \"205867\", \"974806\"\n\t\t]\n\t},\n\t\"marker_mycolor\": {\n\t\t\"rows\": 4,\n\t\t\"cols\": 8,\n\t\t\"subThemeColors\": [\"000099\", \"990099\", \"990000\", \"FF3300\", \"333300\", \"006600\", \"006666\", \"666666\", \"0000CC\", \"CC00CC\", \"CC0000\", \"FF6600\", \"666600\", \"66BB66\", \"009999\",\n\t\t\t\"999999\",\n\t\t\t\"0000FF\", \"AA88CC\", \"FF0000\", \"FF9900\", \"CCCC00\", \"00CC00\", \"00CCCC\", \"CCCCCC\", \"5599CC\", \"CCBBDD\", \"FFAAAA\", \"FFCC99\", \"FFFF00\", \"AAEEAA\", \"00FFFF\", \"CCDDEE\"\n\t\t]\n\t},\n\t\"gradient_mycolor\": {\n\t\t\"rows\": 6,\n\t\t\"cols\": 8,\n\t\t\"subThemeColors\": [\n\t\t\t[\"brown\", [\n\t\t\t\t\"hsla(50,48%,41%,0.1)\",\n\t\t\t\t\"hsla(64,60%,82%,0.7)\",\n\t\t\t\t\"hsla(62,60%,80%,0.8)\",\n\t\t\t\t\"hsla(60,60%,78%,0.9)\",\n\t\t\t\t\"hsl(58,60%,76%)\",\n\t\t\t\t\"hsl(56,60%,74%)\",\n\t\t\t\t\"hsl(54,60%,72%)\",\n\t\t\t\t\"hsl(52,60%,70%)\",\n\t\t\t\t\"hsl(49,60%,68%)\",\n\t\t\t\t\"hsl(46,60%,66%)\",\n\t\t\t\t\"hsl(43,60%,64%)\",\n\t\t\t\t\"hsl(40,60%,62%)\",\n\t\t\t\t\"hsl(37,60%,60%)\",\n\t\t\t\t\"hsl(34,60%,58%)\",\n\t\t\t\t\"hsl(31,61%,56%)\",\n\t\t\t\t\"hsl(28,62%,54%)\",\n\t\t\t\t\"hsl(25,63%,52%)\",\n\t\t\t\t\"hsl(22,64%,50%)\",\n\t\t\t\t\"hsl(19,65%,48%)\",\n\t\t\t\t\"hsl(16,66%,46%)\",\n\t\t\t\t\"hsl(13,67%,44%)\",\n\t\t\t\t\"hsl(10,68%,42%)\",\n\t\t\t\t\"hsl(7,69%,40%)\",\n\t\t\t\t\"hsl(4,70%,38%)\",\n\t\t\t\t\"hsl(1,71%,36%)\",\n\t\t\t\t\"hsl(358,72%,34%)\",\n\t\t\t\t\"hsl(355,73%,32%)\",\n\t\t\t\t\"hsl(352,74%,30%)\",\n\t\t\t\t\"hsl(349,75%,28%)\",\n\t\t\t\t\"hsl(346,76%,26%)\",\n\t\t\t\t\"hsl(343,77%,24%)\"\n\t\t\t]],\n\n\t\t\t[\"green\", [\n\t\t\t\t\"hsla(50,48%,41%,0.1)\",\n\t\t\t\t\"hsla(50,60%,82%,0.7)\",\n\t\t\t\t\"hsla(53,60%,80%,0.8)\",\n\t\t\t\t\"hsla(56,60%,78%,0.9)\",\n\t\t\t\t\"hsl(59,60%,76%)\",\n\t\t\t\t\"hsl(62,60%,74%)\",\n\t\t\t\t\"hsl(65,60%,72%)\",\n\t\t\t\t\"hsl(68,60%,70%)\",\n\t\t\t\t\"hsl(71,60%,68%)\",\n\t\t\t\t\"hsl(74,60%,66%)\",\n\t\t\t\t\"hsl(77,60%,64%)\",\n\t\t\t\t\"hsl(80,60%,62%)\",\n\t\t\t\t\"hsl(83,60%,60%)\",\n\t\t\t\t\"hsl(86,60%,58%)\",\n\t\t\t\t\"hsl(89,61%,56%)\",\n\t\t\t\t\"hsl(92,62%,54%)\",\n\t\t\t\t\"hsl(95,63%,52%)\",\n\t\t\t\t\"hsl(98,64%,50%)\",\n\t\t\t\t\"hsl(101,65%,48%)\",\n\t\t\t\t\"hsl(104,66%,46%)\",\n\t\t\t\t\"hsl(106,67%,44%)\",\n\t\t\t\t\"hsl(108,68%,42%)\",\n\t\t\t\t\"hsl(110,69%,40%)\",\n\t\t\t\t\"hsl(112,70%,38%)\",\n\t\t\t\t\"hsl(114,71%,36%)\",\n\t\t\t\t\"hsl(116,72%,34%)\",\n\t\t\t\t\"hsl(118,73%,32%)\",\n\t\t\t\t\"hsl(120,74%,30%)\",\n\t\t\t\t\"hsl(122,75%,28%)\",\n\t\t\t\t\"hsl(124,76%,26%)\",\n\t\t\t\t\"hsl(126,77%,24%)\"\n\n\t\t\t]],\n\t\t\t[\"blue\", [\n\t\t\t\t\"hsla(260,8%,64%,0.1)\",\n\t\t\t\t\"hsla(185,60%,82%,0.7)\",\n\t\t\t\t\"hsla(186,60%,80%,0.8)\",\n\t\t\t\t\"hsla(187,60%,78%,0.9)\",\n\t\t\t\t\"hsl(188,60%,76%)\",\n\t\t\t\t\"hsl(189,60%,74%)\",\n\t\t\t\t\"hsl(190,60%,72%)\",\n\t\t\t\t\"hsl(191,60%,70%)\",\n\t\t\t\t\"hsl(192,60%,68%)\",\n\t\t\t\t\"hsl(193,60%,66%)\",\n\t\t\t\t\"hsl(194,60%,64%)\",\n\t\t\t\t\"hsl(195,60%,62%)\",\n\t\t\t\t\"hsl(196,60%,60%)\",\n\t\t\t\t\"hsl(197,60%,58%)\",\n\t\t\t\t\"hsl(198,61%,56%)\",\n\t\t\t\t\"hsl(199,62%,54%)\",\n\t\t\t\t\"hsl(200,63%,52%)\",\n\t\t\t\t\"hsl(201,64%,50%)\",\n\t\t\t\t\"hsl(202,65%,48%)\",\n\t\t\t\t\"hsl(203,66%,46%)\",\n\t\t\t\t\"hsl(204,67%,44%)\",\n\t\t\t\t\"hsl(205,68%,42%)\",\n\t\t\t\t\"hsl(206,69%,40%)\",\n\t\t\t\t\"hsl(207,70%,38%)\",\n\t\t\t\t\"hsl(208,71%,36%)\",\n\t\t\t\t\"hsl(209,72%,34%)\",\n\t\t\t\t\"hsl(210,73%,32%)\",\n\t\t\t\t\"hsl(211,74%,30%)\",\n\t\t\t\t\"hsl(212,75%,28%)\",\n\t\t\t\t\"hsl(213,76%,26%)\",\n\t\t\t\t\"hsl(214,77%,24%)\"\n\t\t\t]],\n\n\t\t\t[\"purple\", [\n\t\t\t\t\"hsla(204,13%,62%,0.1)\",\n\t\t\t\t\"hsla(190,47%,82%,0.7)\",\n\t\t\t\t\"hsla(194,48%,80%,0.8)\",\n\t\t\t\t\"hsla(198,49%,78%,0.9)\",\n\t\t\t\t\"hsl(202,50%,76%)\",\n\t\t\t\t\"hsl(206,51%,74%)\",\n\t\t\t\t\"hsl(210,52%,72%)\",\n\t\t\t\t\"hsl(214,53%,70%)\",\n\t\t\t\t\"hsl(218,54%,68%)\",\n\t\t\t\t\"hsl(222,55%,66%)\",\n\t\t\t\t\"hsl(226,56%,64%)\",\n\t\t\t\t\"hsl(230,57%,62%)\",\n\t\t\t\t\"hsl(234,58%,60%)\",\n\t\t\t\t\"hsl(238,59%,58%)\",\n\t\t\t\t\"hsl(242,61%,56%)\",\n\t\t\t\t\"hsl(246,62%,54%)\",\n\t\t\t\t\"hsl(250,63%,52%)\",\n\t\t\t\t\"hsl(254,64%,50%)\",\n\t\t\t\t\"hsl(258,65%,48%)\",\n\t\t\t\t\"hsl(262,66%,46%)\",\n\t\t\t\t\"hsl(266,67%,44%)\",\n\t\t\t\t\"hsl(270,68%,42%)\",\n\t\t\t\t\"hsl(274,69%,40%)\",\n\t\t\t\t\"hsl(278,70%,38%)\",\n\t\t\t\t\"hsl(282,71%,36%)\",\n\t\t\t\t\"hsl(286,72%,34%)\",\n\t\t\t\t\"hsl(290,73%,32%)\",\n\t\t\t\t\"hsl(294,74%,30%)\",\n\t\t\t\t\"hsl(298,75%,28%)\",\n\t\t\t\t\"hsl(302,76%,26%)\",\n\t\t\t\t\"hsl(306,77%,24%)\"\n\t\t\t]],\n\n\t\t\t[\"greenred\", [\n\t\t\t\t\"hsla(120,52%,45%,0.1)\",\n\t\t\t\t\"hsla(120,60%,50%,0.7)\",\n\t\t\t\t\"hsla(115,60%,59%,0.8)\",\n\t\t\t\t\"hsla(110,60%,50%,0.9)\",\n\t\t\t\t\"hsl(105,60%,51%)\",\n\t\t\t\t\"hsl(100,60%,52%)\",\n\t\t\t\t\"hsl(95,60%,53%)\",\n\t\t\t\t\"hsl(90,60%,54%)\",\n\t\t\t\t\"hsl(85,60%,55%)\",\n\t\t\t\t\"hsl(80,61%,56%)\",\n\t\t\t\t\"hsl(75,62%,57%)\",\n\t\t\t\t\"hsl(70,63%,58%)\",\n\t\t\t\t\"hsl(67,64%,59%)\",\n\t\t\t\t\"hsl(64,65%,58%)\",\n\t\t\t\t\"hsl(59,65%,56%)\",\n\t\t\t\t\"hsl(56,65%,54%)\",\n\t\t\t\t\"hsl(53,65%,52%)\",\n\t\t\t\t\"hsl(50,65%,50%)\",\n\t\t\t\t\"hsl(47,65%,50%)\",\n\t\t\t\t\"hsl(44,66%,50%)\",\n\t\t\t\t\"hsl(41,67%,50%)\",\n\t\t\t\t\"hsl(38,68%,50%)\",\n\t\t\t\t\"hsl(35,69%,50%)\",\n\t\t\t\t\"hsl(32,70%,50%)\",\n\t\t\t\t\"hsl(28,71%,50%)\",\n\t\t\t\t\"hsl(24,72%,50%)\",\n\t\t\t\t\"hsl(20,73%,50%)\",\n\t\t\t\t\"hsl(16,74%,50%)\",\n\t\t\t\t\"hsl(12,75%,50%)\",\n\t\t\t\t\"hsl(8,76%,50%)\",\n\t\t\t\t\"hsl(0,77%,50%)\"\n\t\t\t]],\n\n\t\t\t[\"divergent\", [\n\t\t\t\t\"hsla(120,52%,45%,0.1)\",\n\t\t\t\t\"hsl(12,70%,50%)\",\n\t\t\t\t\"hsl(24,70%,50%)\",\n\t\t\t\t\"hsl(36,70%,50%)\",\n\t\t\t\t\"hsl(48,70%,50%)\",\n\t\t\t\t\"hsl(60,70%,50%)\",\n\t\t\t\t\"hsl(72,70%,50%)\",\n\t\t\t\t\"hsl(84,70%,50%)\",\n\t\t\t\t\"hsl(96,70%,50%)\",\n\t\t\t\t\"hsl(108,70%,50%)\",\n\t\t\t\t\"hsl(120,70%,50%)\",\n\t\t\t\t\"hsl(132,70%,50%)\",\n\t\t\t\t\"hsl(144,70%,50%)\",\n\t\t\t\t\"hsl(156,70%,50%)\",\n\t\t\t\t\"hsl(168,70%,50%)\",\n\t\t\t\t\"hsl(180,70%,50%)\",\n\t\t\t\t\"hsl(192,70%,50%)\",\n\t\t\t\t\"hsl(204,70%,50%)\",\n\t\t\t\t\"hsl(216,70%,50%)\",\n\t\t\t\t\"hsl(228,70%,50%)\",\n\t\t\t\t\"hsl(240,70%,50%)\",\n\t\t\t\t\"hsl(252,70%,50%)\",\n\t\t\t\t\"hsl(264,70%,50%)\",\n\t\t\t\t\"hsl(276,70%,50%)\",\n\t\t\t\t\"hsl(288,70%,50%)\",\n\t\t\t\t\"hsl(300,70%,50%)\",\n\t\t\t\t\"hsl(312,70%,50%)\",\n\t\t\t\t\"hsl(324,70%,50%)\",\n\t\t\t\t\"hsl(336,70%,50%)\",\n\t\t\t\t\"hsl(348,70%,50%)\",\n\t\t\t\t\"hsl(0,70%,50%)\"\n\t\t\t]],\n\t\t\t[\"venta\", [\n\t\t\t\t\"rgba(233,255,233,0.1)\",\n\t\t\t\t\"#FF0000\",\n\t\t\t\t\"#FF0000\",\n\t\t\t\t\"#FF0000\",\n\t\t\t\t\"#FF0000\",\n\t\t\t\t\"#FF0000\",\n\t\t\t\t\"#FF0000\",\n\t\t\t\t\"#FF0000\",\n\t\t\t\t\"#FF0000\",\n\t\t\t\t\"#FF0000\",\n\t\t\t\t\"#FF0000\",\n\t\t\t\t\"#FF0000\",\n\t\t\t\t\"#FF0000\",\n\t\t\t\t\"#FFDB14\",\n\t\t\t\t\"#FFDB14\",\n\t\t\t\t\"#FFDB14\",\n\t\t\t\t\"#FFDB14\",\n\t\t\t\t\"#FFDB14\",\n\t\t\t\t\"#FFDB14\",\n\t\t\t\t\"#FFDB14\",\n\t\t\t\t\"#008000\",\n\t\t\t\t\"#008000\",\n\t\t\t\t\"#008000\",\n\t\t\t\t\"#008000\",\n\t\t\t\t\"#008000\",\n\t\t\t\t\"#008000\",\n\t\t\t\t\"#008000\",\n\t\t\t\t\"#008000\",\n\t\t\t\t\"#008000\",\n\t\t\t\t\"#008000\",\n\t\t\t\t\"#008000\"\n\t\t\t]],\n\n\t\t\t[\"stock\", [\n\t\t\t\t\"rgba(233,255,233,0.1)\",\n\t\t\t\t\"#FF0000\",\n\t\t\t\t\"#FF0000\",\n\t\t\t\t\"#FF0000\",\n\t\t\t\t\"#FF0000\",\n\t\t\t\t\"#FF0000\",\n\t\t\t\t\"#FF0000\",\n\t\t\t\t\"#FF0000\",\n\t\t\t\t\"#FF0000\",\n\t\t\t\t\"#FF0000\",\n\t\t\t\t\"#008000\",\n\t\t\t\t\"#008000\",\n\t\t\t\t\"#008000\",\n\t\t\t\t\"#008000\",\n\t\t\t\t\"#008000\",\n\t\t\t\t\"#008000\",\n\t\t\t\t\"#008000\",\n\t\t\t\t\"#008000\",\n\t\t\t\t\"#008000\",\n\t\t\t\t\"#008000\",\n\t\t\t\t\"#7C0000\",\n\t\t\t\t\"#7C0000\",\n\t\t\t\t\"#7C0000\",\n\t\t\t\t\"#7C0000\",\n\t\t\t\t\"#7C0000\",\n\t\t\t\t\"#7C0000\",\n\t\t\t\t\"#7C0000\",\n\t\t\t\t\"#7C0000\",\n\t\t\t\t\"#7C0000\",\n\t\t\t\t\"#7C0000\",\n\t\t\t\t\"#7C0000\"\n\t\t\t]]\n\t\t],\n\t\t\"RGBColors\": [\n\t\t\t[\"brown\", [\"rgba(155,155,55,0.1)\", \"rgba(255,255,204,0.6)\", \"rgba(255,255,204,0.6)\", \"rgb(255,237,160)\", \"rgb(254,217,118)\", \"rgb(254,217,118)\", \"rgb(254,178,76)\",\n\t\t\t\t\"rgb(254,178,76)\", \"rgb(253,141,60)\", \"rgb(253,141,60)\", \"rgb(252,78,42)\", \"rgb(252,78,42)\", \"rgb(227,26,28)\", \"rgb(227,26,28)\", \"rgb(177,0,38)\", \"rgb(177,0,38)\"\n\t\t\t]],\n\t\t\t[\"green\", [\"rgba(155,155,55,0.1)\", \"rgba(247,252,245,0.6)\", \"rgba(247,252,245,0.6)\", \"rgba(229,245,224,0.7)\", \"rgba(199,233,192,0.8)\", \"rgba(199,233,192,0.8)\",\n\t\t\t\t\"rgba(161,217,155,0.9)\", \"rgba(161,217,155,0.9)\", \"rgb(116,196,118)\", \"rgb(116,196,118)\", \"rgb(65,171,93)\", \"rgb(65,171,93)\", \"rgb(35,139,69)\", \"rgb(35,139,69)\",\n\t\t\t\t\"rgb(0,90,50)\", \"rgb(0,90,50)\"\n\t\t\t]],\n\t\t\t[\"blue\", [\"rgba(160,155,170,0.1)\", \"rgba(247,251,255,0.6)\", \"rgba(247,251,255,0.6)\", \"rgb(222,235,247)\", \"rgb(198,219,239)\", \"rgb(198,219,239)\", \"rgb(158,202,225)\",\n\t\t\t\t\"rgb(158,202,225)\", \"rgb(107,174,214)\", \"rgb(107,174,214)\", \"rgb(66,146,198)\", \"rgb(66,146,198)\", \"rgb(33,113,181)\", \"rgb(33,113,181)\", \"rgb(8,69,148)\", \"rgb(8,69,148)\"\n\t\t\t]],\n\t\t\t[\"purple\", [\"rgba(145,160,170,0.1)\", \"rgba(247,252,253,0.6)\", \"rgba(247,252,253,0.6)\", \"rgb(224,236,244)\", \"rgb(191,211,230)\", \"rgb(191,211,230)\", \"rgb(158,188,218)\",\n\t\t\t\t\"rgb(158,188,218)\", \"rgb(140,150,198)\", \"rgb(140,150,198)\", \"rgb(140,107,177)\", \"rgb(140,107,177)\", \"rgb(136,65,157)\", \"rgb(136,65,157)\", \"rgb(110,1,107)\",\n\t\t\t\t\"rgb(110,1,107)\"\n\t\t\t]],\n\t\t\t[\"greenred\", [\"rgba(55,175,55,0.1)\", \"rgba(224,255,224,0.6)\", \"rgba(224,255,224,0.6)\", \"rgba(166,217,106,0.7)\", \"rgba(217,239,139,0.8)\", \"rgba(217,239,139,0.8)\",\n\t\t\t\t\"rgba(246,246,102,0.9)\", \"rgba(246,246,102,0.9)\", \"rgba(254,224,139,1)\", \"rgba(254,224,139,1)\", \"rgba(253,174,97,1)\", \"rgba(253,174,97,1)\", \"rgba(244,109,67,1)\",\n\t\t\t\t\"rgba(244,109,67,1)\", \"rgba(227,40,39,1)\", \"rgba(227,40,39,1)\"\n\t\t\t]],\n\t\t\t[\"divergent\", [\"rgba(200,155,133,0.1)\", \"rgba(178,24,43,0.6)\", \"rgba(178,24,43,0.6)\", \"rgb(214,96,77)\", \"rgb(244,165,130)\", \"rgb(244,165,130)\", \"rgb(253,219,199)\",\n\t\t\t\t\"rgb(253,219,199)\", \"rgb(209,229,240)\", \"rgb(209,229,240)\", \"rgb(146,197,222)\", \"rgb(146,197,222)\", \"rgb(67,147,195)\", \"rgb(67,147,195)\", \"rgb(33,102,172)\",\n\t\t\t\t\"rgb(33,102,172)\"\n\t\t\t]],\n\t\t\t[\"venta\", [\"rgba(233,255,233,0.1)\", \"#FF0000\", \"#FF0000\", \"#FF0000\", \"#FF0000\", \"#FF0000\", \"#FF0000\", \"#FFDB14\", \"#FFDB14\", \"#FFDB14\", \"#008000\", \"#008000\", \"#008000\",\n\t\t\t\t\"#008000\", \"#008000\", \"#008000\"\n\t\t\t]],\n\t\t\t[\"stock\", [\"rgba(233,255,233,0.1)\", \"#FF0000\", \"#FF0000\", \"#FF0000\", \"#FF0000\", \"#008000\", \"#008000\", \"#008000\", \"#008000\", \"#7C0000\", \"#7C0000\", \"#7C0000\", \"#7C0000\",\n\t\t\t\t\"#7C0000\", \"#7C0000\", \"#7C0000\"\n\t\t\t]]\n\t\t]\n\t},\n\t\"filter_mycolor\": {\n\t\t\"rows\": 4,\n\t\t\"cols\": 8,\n\t\t\"subThemeColors\": [\"000066\", \"660066\", \"660000\", \"CC3300\", \"666600\", \"006600\", \"006666\", \"333333\", \"000099\", \"990099\", \"990000\", \"FF3300\", \"999900\", \"009900\", \"009999\",\n\t\t\t\"666666\",\n\t\t\t\"0000CC\", \"CC00CC\", \"CC0000\", \"FF6600\", \"CCCC00\", \"00CC00\", \"00CCCC\", \"999999\", \"0000FF\", \"FF00FF\", \"FF0000\", \"FF9900\", \"FFFF00\", \"00FF00\", \"00FFFF\", \"CCCCCC\"\n\t\t]\n\t}\n};\n"],"names":["hslaString","hslcolor","undefined","a","h","s","l","parseFloat","rgbaString","hexcolor","r","g","b","parseHalf","foo","parseInt","compact","array","index","length","resIndex","result","value","omit","obj","fn","target","i","Object","prototype","hasOwnProperty","call","IconObject","url","fillColor","markerOpts","this","assign","window","google","maps","origin","Point","x","y","anchor","size","Size","width","height","scaledSize","parseHex","hexstring","opacity","darkenfactor","hex","replace","isNaN","substring","strokeColor","join","rgb","parseHSL","hslstring","hslcolor_stroke","hslparts","split","hsl","parseRGB","rgbstring","rgbcolor","rgbparts","hue2rgb","p","q","t","getColors","options","color0","color1","count","val","range","Math","floor","getColor","deccolor","stringcolor","parsedcolor","indexOf","toDecColor","color","factor","darkercolor","darken","padHex","str_in","String","Wicket","Wkt","WKT2Object","WKT","wkt","read","e","console","zlog","toObject","reverseInnerPolygons","warn","loadingcircle","timeout","message","container","theGlobalvars","globalvars","containerIds","loadingcircleId","jqContainerLoading","$","preloaderFN","removeContainer","delay","setTimeout","addClass","detach","find","removeEvent","clearTimeout","attr","append","html","max","setModalClass","cls","footer","modal","modal_body","modal_footer","removeClass","isArray","toString","spaceString","str","cleanString","strict","cleanstr","toLowerCase","randomname","limit","text","possible","charAt","random","getCookie","name","match","root","document","cookie","RegExp","blacklistedfields","CollectionUtils","DataSet","type","category","addGeometricBoundaries","element","domid","mapModel","Polygons","each","Polygon","_","template","attributes","findFields","callback","elemento","Promise","resolve","reject","fieldsFound","fields","isEmpty","uniq","flatten","map","getArray","item","properties","getProperties","keys","finalkeys","chain","reduce","memo","propiedad","label","Model","columns","column","get","findQualityFields","qualityfilters","propiedadObj","arraypropiedad","backend_grouped","registros_numericos","filter","Number","registros_totales","data","groupBy","c","d","zwarn","findQuantityFields","quantityfilters","min","localmin","localmax","discriminateFields","toJSON","serialized","prop","generateClusterCanvas","canvas","createElement","radius","anchorX","font","fontsize","context","getContext","anchorY","clearRect","moveTo","labelvalue","setLineDash","beginPath","arc","PI","fillStyle","strokeStyle","lineWidth","fill","stroke","textBaseline","textWidth","measureText","text_x","label_x","label_y","fillText","generateCanvas","ancho","cx","cy","grad","createLinearGradient","colors","addColorStop","rect","generateFatCanvas","lineTo","unicodelabel","generateGroupedCanvas","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","strokeText","generateTransparentCanvas","textmetric","MarkerFactory","createTransparentMarkerIcon","theoptions","scale","markerCanvas","toDataURL","createFatMarkerIcon","createTextMarker","createClusterIcon","createGroupedIcon","readCache","cacheKey","no_cache","cached","sessionStorage","getItem","cachedObj","JSON","parse","key","setCache","iconObj","setItem","stringify","generateAutoicon","generatorFN","is_icon","shadow","transparent_background","cleanOptions","sortedOpts","entries","sort","serializeOptions","parseColorString","somecolor","original","round","hslToRGB","in_r","in_g","in_b","in_a","sum","diff","rgbToHSL","rgba","hsla","autoIcon","slice","fromCharCode","_wrapped","delimiter","constructor","Array","trim","sub","beginsWith","endsWith","initializer","wrapVertices","regExes","typeStr","spaces","numeric","comma","parenComma","coord","doubleParenComma","trimParens","ogcTypes","crudeJson","components","fromObject","isCollection","sameCoords","fromJson","deconstruct","isRectangle","config","construct","write","j","k","coords","iring","oring","geometry","coordinates","push","toJson","cs","json","ring","rings","exec","toUpperCase","bbox","concat","merge","prefix","TypeError","matches","base","ingest","apply","test","log","pieces","extract","point","multipoint","parts","linestring","multilinestring","polygon","multipolygon","box","geometrycollection","points","multipoints","line","lines","subcomponents","n","x_cord","y_cord","polygons","component","position","LatLng","Marker","arr","editable","path","Polyline","bounds","LatLngBounds","Rectangle","verts","paths","area","polygonIsClockwise","reverse","v","extend","multiFlag","features","sign","tmp","response","lat","lng","vertex","linestrings","spherical","computeSignedArea","getPosition","getPath","getAt","areas","getPaths","abs","lastIndexOf","equals","Circle","getCenter","getRadius","d2r","rlat","rlng","cos","theta","sin","getSouthWest","getNorthEast","getBounds","Data","Feature","getGeometry","LineString","getLength","MultiPoint","MultiLineString","MultiPolygon","GeometryCollection","objects","object","comps","id_selector","preloader","loading","appendTo","colorset","polygon_mycolor","rows","cols","subThemeColors","marker_mycolor","gradient_mycolor","RGBColors","filter_mycolor","self","global","ButtonFactory"],"mappings":"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GfGG,UACVC,iBACCC,KAAQ,EACRC,KAAQ,EACRC,gBAAmB,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAC9J,SACA,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAChK,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,WAGhHC,gBACCH,KAAQ,EACRC,KAAQ,EACRC,gBAAmB,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAC9J,SACA,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,WAGxJE,kBACCJ,KAAQ,EACRC,KAAQ,EACRC,iBACE,SACA,uBACA,uBACA,uBACA,uBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,iBACA,iBACA,iBACA,mBACA,mBACA,mBACA,mBACA,mBACA,sBAGA,SACA,uBACA,uBACA,uBACA,uBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,sBAGA,QACA,uBACA,wBACA,wBACA,wBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,sBAGA,UACA,wBACA,wBACA,wBACA,wBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,sBAGA,YACA,wBACA,wBACA,wBACA,wBACA,mBACA,mBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,iBACA,oBAGA,aACA,wBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,oBAEA,SACA,wBACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,aAGA,SACA,wBACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,aAGFG,YACE,SAAU,uBAAwB,wBAAyB,wBAAyB,mBAAoB,mBAAoB,mBAAoB,kBAChJ,kBAAmB,kBAAmB,kBAAmB,iBAAkB,iBAAkB,iBAAkB,iBAAkB,gBAAiB,mBAElJ,SAAU,uBAAwB,wBAAyB,wBAAyB,wBAAyB,wBAAyB,wBACtI,wBAAyB,wBAAyB,mBAAoB,mBAAoB,iBAAkB,iBAAkB,iBAAkB,iBAChJ,eAAgB,kBAEhB,QAAS,wBAAyB,wBAAyB,wBAAyB,mBAAoB,mBAAoB,mBAAoB,mBAChJ,mBAAoB,mBAAoB,mBAAoB,kBAAmB,kBAAmB,kBAAmB,kBAAmB,gBAAiB,mBAEzJ,UAAW,wBAAyB,wBAAyB,wBAAyB,mBAAoB,mBAAoB,mBAAoB,mBAClJ,mBAAoB,mBAAoB,mBAAoB,mBAAoB,mBAAoB,kBAAmB,kBAAmB,iBAC1I,oBAEA,YAAa,sBAAuB,wBAAyB,wBAAyB,wBAAyB,wBAAyB,wBACxI,wBAAyB,wBAAyB,sBAAuB,sBAAuB,qBAAsB,qBAAsB,qBAC5I,qBAAsB,oBAAqB,uBAE3C,aAAc,wBAAyB,sBAAuB,sBAAuB,iBAAkB,mBAAoB,mBAAoB,mBAC/I,mBAAoB,mBAAoB,mBAAoB,mBAAoB,mBAAoB,kBAAmB,kBAAmB,kBAC1I,qBAEA,SAAU,wBAAyB,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAC5J,UAAW,UAAW,aAEtB,SAAU,wBAAyB,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAC5J,UAAW,UAAW,cAIzBC,gBACCN,KAAQ,EACRC,KAAQ,EACRC,gBAAmB,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAC9J,SACA,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,YF/SrJ3T,KAAuB,iBAARgU,MAAoBA,KAAKA,OAASA,MAAQA,MAC1C,iBAAVC,QAAsBA,OAAOA,SAAWA,QAAUA,kBAuH1DC,cAAeA,cACf5X,IAAKA,IACLD,OAAQA,OACRE,WAAYA,WACZU,cAAeA,cACfsW,SAAUA,SACV/U,cAAeA,cACfO,QAASA,QACTE,YAAaA,YACbE,YAAaA,YACbI,WAAYA,WACZM,UAAWA"}