{"version":3,"file":"ig_helper.min.js","sources":["../node_modules/ig_markerfactory/dist/markerfactory.es6.js","../src/wicket_helper.js","../src/loadingcircle.js","../src/ig_helper.js","../src/collection_helper.js","../src/colorset.js"],"sourcesContent":["function IconObject(canvas, markerOpts) {\n\tthis.url = canvas.toDataURL();\n\tthis.fillColor = canvas.fillColor;\n\tthis.markerOpts = markerOpts;\n\tObject.assign(this, markerOpts);\n\treturn this;\n}\n\nIconObject.prototype.toJSON = function() {\n\treturn {\n\t\turl: null,\n\t\tmarkerOpts: this.markerOpts\n\t};\n};\n\n/** global: google */\n\nfunction createClusterIcon(theoptions) {\n    var generateClusterCanvas = function(options) {\n        var canvas = options.canvas || document.createElement(\"canvas\"),\n            anchorX = 27,\n            anchorY = 53,\n            radius = anchorX - 9,\n            color1,\n            font = options.font || \"fontello\",\n            fontsize = options.fontsize || 14,\n            context = canvas.getContext(\"2d\");\n\n        canvas.width = anchorX * 2;\n        canvas.height = anchorY + 1;\n\n        context.clearRect(0, 0, canvas.width, canvas.height);\n        context.moveTo(anchorX, anchorY);\n\n        var labelvalue = parseInt(options.label, 10);\n        if (labelvalue < 10) {\n            color1 = \"orange\";\n            fontsize = 14;\n        } else if (labelvalue < 30) {\n            color1 = \"red\";\n            fontsize = 15;\n        } else {\n            color1 = \"purple\";\n            fontsize = 16;\n        }\n        if (labelvalue > 99) {\n            radius = radius + 3;\n            context.setLineDash([5, 5]);\n            context.beginPath();\n            context.arc(\n                anchorX,\n                2 + 0.5 * anchorY,\n                radius + 7,\n                0,\n                2 * Math.PI,\n                false\n            );\n            context.fillStyle = \"transparent\";\n            context.strokeStyle = color1;\n            context.lineWidth = 2;\n            context.fill();\n            context.stroke();\n        }\n\n        context.setLineDash([5, 5]);\n        context.beginPath();\n        context.arc(\n            anchorX,\n            2 + 0.5 * anchorY,\n            radius + 2,\n            0,\n            2 * Math.PI,\n            false\n        );\n        context.fillStyle = \"transparent\";\n        context.strokeStyle = color1;\n        context.lineWidth = 2;\n        context.fill();\n        context.stroke();\n\n        // Círculo blanco\n        context.setLineDash([5, 0]);\n        context.beginPath();\n        context.arc(\n            anchorX,\n            2 + 0.5 * anchorY,\n            radius - 3,\n            0,\n            2 * Math.PI,\n            false\n        );\n        context.fillStyle = \"white\";\n        context.strokeStyle = color1;\n        context.lineWidth = 4;\n        context.fill();\n        context.stroke();\n\n        context.beginPath();\n\n        context.font = \"normal normal normal \" + fontsize + \"px \" + font;\n        context.fillStyle = \"#333\";\n        context.textBaseline = \"top\";\n\n        var textWidth = context.measureText(options.label),\n            text_x = options.label,\n            label_x = Math.floor(canvas.width / 2 - textWidth.width / 2),\n            label_y = 1 + Math.floor(canvas.height / 2 - fontsize / 2);\n\n        // centre the text.\n        context.fillText(text_x, label_x, label_y);\n\n        return canvas;\n    };\n    theoptions.scale = theoptions.scale || 1;\n    var markerCanvas = generateClusterCanvas(theoptions),\n        markerOpts = {},\n        scale = theoptions.scale;\n\n    Object.assign(markerOpts, theoptions);\n\n    if (window && window.google && window.google.maps) {\n        Object.assign(markerOpts, {\n            size: new google.maps.Size(54, 48),\n            origin: new google.maps.Point(0, 0),\n            anchor: new google.maps.Point(27 * scale, 24 * scale),\n            scaledSize: new google.maps.Size(54 * scale, 48 * scale)\n        });\n    }\n\n    var iconObj = new IconObject(markerCanvas, markerOpts);\n\n    return iconObj;\n}\n\nfunction hslaString(hslcolor) {\n\tif (hslcolor.a) {\n\t\treturn (\n\t\t\t\"hsla(\" +\n\t\t\thslcolor.h +\n\t\t\t\",\" +\n\t\t\thslcolor.s +\n\t\t\t\"%,\" +\n\t\t\thslcolor.l +\n\t\t\t\"%,\" +\n\t\t\thslcolor.a +\n\t\t\t\")\"\n\t\t);\n\t}\n\treturn \"hsl(\" + hslcolor.h + \",\" + hslcolor.s + \"%,\" + hslcolor.l + \"%)\";\n}\n\nfunction rgbaString(hexcolor) {\n\tif (hexcolor.a) {\n\t\treturn (\n\t\t\t\"rgba(\" +\n\t\t\thexcolor.r +\n\t\t\t\",\" +\n\t\t\thexcolor.g +\n\t\t\t\",\" +\n\t\t\thexcolor.b +\n\t\t\t\",\" +\n\t\t\thexcolor.a +\n\t\t\t\")\"\n\t\t);\n\t}\n\treturn \"rgb(\" + hexcolor.r + \",\" + hexcolor.g + \",\" + hexcolor.b + \")\";\n}\n\nfunction parseHalf(foo) {\n\treturn parseInt(foo / 2, 10);\n}\n\nfunction compact(array) {\n\tvar index = -1,\n\t\tlength = array ? array.length : 0,\n\t\tresIndex = 0,\n\t\tresult = [];\n\n\twhile (++index < length) {\n\t\tvar value = array[index];\n\t\tif (value) {\n\t\t\tresult[resIndex++] = value;\n\t\t}\n\t}\n\treturn result;\n}\n\n/** global: google, r, g, b */\n\nfunction parseHex(hexstring, opacity, darkenfactor) {\n    var hexcolor = {\n        hex: hexstring\n    };\n    darkenfactor = darkenfactor || 1;\n\n    hexstring = hexstring.replace(\"#\", \"\");\n    if (hexstring.length === 3) {\n        hexstring =\n            hexstring[0] +\n            hexstring[0] +\n            hexstring[1] +\n            hexstring[1] +\n            hexstring[2] +\n            hexstring[2];\n    }\n    if (isNaN(parseFloat(opacity, 10))) {\n        opacity = 1;\n    }\n\n    hexcolor.r = parseInt(\n        darkenfactor * parseInt(hexstring.substring(0, 2), 16),\n        10\n    );\n    hexcolor.g = parseInt(\n        darkenfactor * parseInt(hexstring.substring(2, 4), 16),\n        10\n    );\n    hexcolor.b = parseInt(\n        darkenfactor * parseInt(hexstring.substring(4, 6), 16),\n        10\n    );\n    hexcolor.a = opacity;\n    hexcolor.fillColor = rgbaString(hexcolor);\n    hexcolor.strokeColor = [\n        \"rgba(\" + parseHalf(hexcolor.r),\n        parseHalf(hexcolor.g),\n        parseHalf(hexcolor.b),\n        hexcolor.a + \")\"\n    ].join(\",\");\n    hexcolor.rgb = hexcolor.fillColor;\n    return hexcolor;\n}\n\nfunction parseHSL(hslstring, opacity) {\n    var hslcolor = {},\n        hslcolor_stroke = {},\n        hslparts = compact(hslstring.split(/hsla?\\(|,|\\)|%/));\n\n    if (hslparts[3] === undefined) {\n        hslparts[3] = 1;\n    }\n    if (isNaN(parseFloat(opacity, 10))) {\n        opacity = 1;\n    }\n\n    hslcolor.h = hslcolor_stroke.h = parseFloat(hslparts[0], 10);\n    hslcolor.s = hslcolor_stroke.s = parseFloat(hslparts[1], 10);\n    hslcolor.l = parseFloat(hslparts[2], 10);\n    hslcolor.a = hslcolor_stroke.a = parseFloat(opacity * hslparts[3], 10);\n    hslcolor_stroke.l = parseInt(hslcolor.l / 2, 10);\n\n    hslcolor.fillColor = hslaString(hslcolor);\n    hslcolor.strokeColor = hslaString(hslcolor_stroke);\n    hslcolor.hsl = hslcolor.fillColor;\n    return hslcolor;\n}\n\nfunction parseRGB(rgbstring, opacity, darkenfactor) {\n    var rgbcolor = {},\n        rgbparts = compact(rgbstring.split(/rgba?\\(|,|\\)/));\n\n    darkenfactor = darkenfactor || 1;\n\n    if (rgbparts[3] === undefined) {\n        rgbparts[3] = 1;\n    }\n\n    if (isNaN(parseFloat(opacity, 10))) {\n        opacity = 1;\n    }\n\n    rgbcolor.r = parseInt(darkenfactor * (parseInt(rgbparts[0], 10) % 256), 10);\n    rgbcolor.g = parseInt(darkenfactor * (parseInt(rgbparts[1], 10) % 256), 10);\n    rgbcolor.b = parseInt(darkenfactor * (parseInt(rgbparts[2], 10) % 256), 10);\n    rgbcolor.a = parseFloat(opacity * rgbparts[3], 10);\n    rgbcolor.fillColor = rgbaString(rgbcolor);\n    rgbcolor.strokeColor =\n        \"rgba(\" +\n        rgbcolor.r / 2 +\n        \",\" +\n        rgbcolor.g / 2 +\n        \",\" +\n        rgbcolor.b / 2 +\n        \",\" +\n        rgbcolor.a +\n        \")\";\n    rgbcolor.rgb = rgbcolor.fillColor;\n    return rgbcolor;\n}\n\nfunction hue2rgb(p, q, t) {\n    if (t < 0) {\n        t += 1;\n    }\n    if (t > 1) {\n        t -= 1;\n    }\n    if (t < 1 / 6) {\n        return p + (q - p) * 6 * t;\n    }\n    if (t < 1 / 2) {\n        return q;\n    }\n    if (t < 2 / 3) {\n        return p + (q - p) * (2 / 3 - t) * 6;\n    }\n    return p;\n}\n\nfunction hslToRGB(h, s, l, a, darkenfactor) {\n    var r, g, b;\n\n    darkenfactor = darkenfactor || 1;\n    h = parseFloat(h, 10) / 360;\n    s = parseFloat(s, 10) / 100;\n    l = parseFloat(l, 10) / 100;\n    if (a === undefined) {\n        a = 1;\n    }\n    if (s === 0) {\n        r = g = b = l; // achromatic\n    } else {\n        var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n        var p = 2 * l - q;\n        r = hue2rgb(p, q, h + 1 / 3);\n        g = hue2rgb(p, q, h);\n        b = hue2rgb(p, q, h - 1 / 3);\n    }\n\n    if (a === undefined) {\n        a = 1;\n    }\n\n    var rgb = {\n        r: Math.round(r * 255 * darkenfactor),\n        g: Math.round(g * 255 * darkenfactor),\n        b: Math.round(b * 255 * darkenfactor),\n        a: parseFloat(a, 10)\n    };\n\n    rgb.fillColor = rgbaString(rgb);\n\n    return rgb;\n}\n\nfunction rgbToHSL(in_r, in_g, in_b, in_a) {\n    var h,\n        r = (in_r % 256) / 255,\n        g = (in_g % 256) / 255,\n        b = (in_b % 256) / 255,\n        a = in_a === undefined ? 1 : in_a,\n        max = Math.max(r, g, b),\n        min = Math.min(r, g, b),\n        sum = max + min,\n        diff = max - min,\n        s = sum > 1 ? diff / (2 - sum) : diff / sum;\n\n    switch (max) {\n        case r:\n            h = (g - b) / diff + (g < b ? 6 : 0);\n            break;\n        case g:\n            h = (b - r) / diff + 2;\n            break;\n        case b:\n            h = (r - g) / diff + 4;\n            break;\n        default:\n            h = 0;\n            break;\n    }\n\n    h /= 6;\n\n    if (diff === 0) {\n        h = s = 0; // achromatic\n    }\n\n    var hsl = {\n        h: Math.round(360 * h),\n        s: Math.round(100 * s),\n        l: Math.round(50 * sum),\n        a: Math.round(100 * a) / 100\n    };\n\n    hsl.fillColor = hslaString(hsl);\n\n    return hsl;\n}\n\nfunction toDecColor(stringcolor) {\n    var parsedcolor = {};\n    if (!stringcolor) {\n        parsedcolor.fillColor = \"rgba(100,250,50,0.99)\";\n    } else if (stringcolor.indexOf(\"rgb\") !== -1) {\n        parsedcolor = parseRGB(stringcolor);\n    } else if (stringcolor.indexOf(\"hsl\") !== -1) {\n        parsedcolor = parseHSL(stringcolor);\n    } else {\n        parsedcolor = parseHex(stringcolor);\n    }\n\n    return parsedcolor;\n}\n\nfunction getColor(val, range) {\n    var defaults = {\n        h: Math.floor((360 / range) * val),\n        s: 78, // constant saturation\n        l: 63, // constant luminance\n        a: 1\n    };\n\n    return hslaString(defaults);\n}\n\nfunction getColor1() {\n    var defaults1 = {\n        h: 1,\n        s: 78, // constant saturation\n        l: 33, // constant luminance\n        a: 1\n    };\n    return hslaString(defaults1);\n}\n\nfunction darken(stringcolor, factor) {\n    var darkercolor = {};\n    if (!factor) {\n        factor = 1;\n    }\n    if (stringcolor.fillColor.indexOf(\"rgb\") !== -1) {\n        darkercolor.r = factor * parseHalf(stringcolor.r);\n        darkercolor.g = factor * parseHalf(stringcolor.g);\n        darkercolor.b = factor * parseHalf(stringcolor.b);\n        darkercolor.a = 0.99;\n        darkercolor.fillColor = rgbaString(darkercolor);\n    } else if (stringcolor.fillColor.indexOf(\"hsl\") !== -1) {\n        darkercolor.h = stringcolor.h;\n        darkercolor.s = stringcolor.s;\n        darkercolor.l = factor * stringcolor.l - 30;\n        darkercolor.fillColor = hslaString(darkercolor);\n    }\n\n    return darkercolor;\n}\n\nfunction getColors(options) {\n    var color0, color1;\n    if (options.index !== undefined && options.count > 0) {\n        color0 = getColor(options.index, options.count);\n        color1 = getColor1();\n    } else {\n        var deccolor = toDecColor(options.color);\n        color0 = deccolor.fillColor;\n        color1 = darken(deccolor).fillColor;\n    }\n    return [color0, color1];\n}\n\n/** global: google */\n\nfunction createTextMarker(theoptions) {\n    var generateCanvas = function(options) {\n        var canvas = document.createElement(\"canvas\");\n        var ancho = 30,\n            alto = 40;\n        canvas.width = ancho + 18;\n        canvas.height = alto;\n        var x = canvas.width / 2,\n            y = canvas.height - 2,\n            radius = ancho / 2,\n            angulo = 0.6;\n\n        var font = \"'\" + options.font + \"'\" || \"Arial\";\n        var fontsize = options.fontsize || 11;\n\n        var context = canvas.getContext(\"2d\");\n\n        context.clearRect(0, 0, canvas.width, canvas.height);\n\n        var radius0 = 2 * radius,\n            cx = x + 0.95 * radius0,\n            cy = y + 0.45 * radius0;\n\n        var grad = context.createLinearGradient(0, 0, 0, canvas.height),\n            colors = getColors(options),\n            color0 = colors[0],\n            color1 = colors[1];\n\n        grad.addColorStop(0, color0);\n        grad.addColorStop(1, color1);\n\n        context.fillStyle = grad;\n        context.strokeStyle = \"rgba(200,200,200,0.7)\";\n\n        context.beginPath();\n\n        //arco izquierdo\n        context.arc(\n            cx - 1,\n            cy,\n            radius0,\n            (9 * Math.PI) / 8,\n            (-6 * Math.PI) / 8,\n            false\n        );\n\n        // arco superior\n        context.arc(x, (y - 7) / 2, radius, angulo, Math.PI - angulo, true);\n\n        //arco derecho\n        context.arc(\n            2 * x - cx + 1,\n            cy,\n            radius0,\n            (-0.95 * Math.PI) / 3,\n            -Math.PI / 8,\n            false\n        );\n        context.fill();\n        context.stroke();\n\n        context.beginPath();\n        context.arc(x, 0.4 * y, (2 * radius) / 3, 0, 2 * Math.PI, false);\n        context.fillStyle = \"white\";\n        context.fill();\n\n        context.beginPath();\n\n        // Render Label\n        //context.font = \"11pt Arial\";\n        context.font = fontsize + \"pt \" + font;\n        context.textBaseline = \"top\";\n\n        var textWidth = context.measureText(options.label);\n\n        if (textWidth.width > ancho || String(options.label).length > 3) {\n            context.rect(\n                x - 2 - textWidth.width / 2,\n                y - 30,\n                x - 2 + textWidth.width / 2,\n                y - 23\n            );\n            context.fillStyle = \"#F7F0F0\";\n            context.fill();\n            context.stroke();\n        }\n\n        context.fillStyle = \"black\";\n        context.strokeStyle = \"black\";\n        // centre the text.\n        context.fillText(\n            options.label,\n            1 + Math.floor(canvas.width / 2 - textWidth.width / 2),\n            8\n        );\n\n        return canvas;\n    };\n    theoptions.scale = theoptions.scale || 0.75;\n    var markerCanvas = generateCanvas(theoptions),\n        markerOpts = {};\n\n    theoptions.type = \"textmarker\";\n\n    Object.assign(markerOpts, theoptions);\n\n    if (window && window.google && window.google.maps) {\n        Object.assign(markerOpts, {\n            size: new google.maps.Size(48, 40),\n            origin: new google.maps.Point(0, 0),\n            anchor: new google.maps.Point(\n                24 * theoptions.scale,\n                40 * theoptions.scale\n            ),\n            scaledSize: new google.maps.Size(\n                48 * theoptions.scale,\n                40 * theoptions.scale\n            )\n        });\n    }\n    var iconObj = new IconObject(markerCanvas, markerOpts);\n\n    return iconObj;\n}\n\n/** global: google */\n\nfunction createFatMarkerIcon(theoptions) {\n\tvar generateFatCanvas = function(options) {\n\t\tvar canvas = options.canvas || document.createElement(\"canvas\"),\n\t\t\tanchorX = 27,\n\t\t\tanchorY = 53,\n\t\t\tradius = anchorX - 9,\n\t\t\tangulo = 1.1,\n\t\t\tfont = options.font || \"fontello\",\n\t\t\tfontsize = options.fontsize || 14,\n\t\t\tcontext = canvas.getContext(\"2d\"),\n\t\t\tgrad = context.createLinearGradient(0, 0, 0, anchorY);\n\n\t\tcanvas.width = anchorX * 2;\n\t\tcanvas.height = anchorY + 1;\n\n\t\tvar colors = getColors(options),\n\t\t\tcolor0 = colors[0],\n\t\t\tcolor1 = colors[1];\n\n\t\tcontext.clearRect(0, 0, canvas.width, canvas.height);\n\n\t\tgrad.addColorStop(0, color0);\n\t\tgrad.addColorStop(1, color1);\n\n\t\tcontext.fillStyle = grad;\n\t\tcontext.strokeStyle = color1;\n\t\tcontext.beginPath();\n\n\t\tcontext.moveTo(anchorX, anchorY);\n\n\t\t// arco superior\n\t\tcontext.arc(\n\t\t\tanchorX,\n\t\t\t2 + 0.5 * anchorY,\n\t\t\tradius,\n\t\t\tangulo,\n\t\t\tMath.PI - angulo,\n\t\t\ttrue\n\t\t);\n\n\t\t//punta inferior\n\t\tcontext.lineTo(anchorX, anchorY);\n\n\t\tcontext.fill();\n\t\tcontext.stroke();\n\n\t\t// Círculo blanco\n\t\tcontext.beginPath();\n\t\tcontext.arc(\n\t\t\tanchorX,\n\t\t\t2 + 0.5 * anchorY,\n\t\t\tradius - 3,\n\t\t\t0,\n\t\t\t2 * Math.PI,\n\t\t\tfalse\n\t\t);\n\t\tcontext.fillStyle = \"white\";\n\t\tcontext.fill();\n\n\t\tcontext.beginPath();\n\n\t\tcontext.font = \"normal normal normal \" + fontsize + \"px \" + font;\n\t\t//console.log('context font', context.font);\n\t\tcontext.fillStyle = color1;\n\t\tcontext.textBaseline = \"top\";\n\n\t\tvar textWidth = context.measureText(options.unicodelabel),\n\t\t\ttext_x = options.unicodelabel,\n\t\t\tlabel_x = Math.floor(canvas.width / 2 - textWidth.width / 2),\n\t\t\tlabel_y = 1 + Math.floor(canvas.height / 2 - fontsize / 2);\n\n\t\t// centre the text.\n\t\tcontext.fillText(text_x, label_x, label_y);\n\t\tcanvas.fillColor = color0;\n\t\treturn canvas;\n\t};\n\n\tvar scale = theoptions.scale || 1,\n\t\tmarkerCanvas = generateFatCanvas(theoptions),\n\t\tmarkerOpts = {};\n\n\ttheoptions.type = \"fatmarker\";\n\n\tObject.assign(markerOpts, theoptions);\n\n\tif (window && window.google && window.google.maps) {\n\t\tObject.assign(markerOpts, {\n\t\t\tsize: new google.maps.Size(54, 48),\n\t\t\torigin: new google.maps.Point(0, 0),\n\t\t\tanchor: new google.maps.Point(21 * scale, 36 * scale),\n\t\t\tscaledSize: new google.maps.Size(42 * scale, 36 * scale),\n\t\t\tscale: scale\n\t\t});\n\t}\n\tvar iconObj = new IconObject(markerCanvas, markerOpts);\n\treturn iconObj;\n}\n\n/** global: google */\n\nfunction createTransparentMarkerIcon(theoptions) {\n    var generateTransparentCanvas = function(options) {\n        var text_x,\n            canvas = options.canvas || document.createElement(\"canvas\"),\n            context = canvas.getContext(\"2d\"),\n            font = options.font || \"fontello\",\n            fontsize = options.fontsize || 26;\n\n        canvas.width = 54;\n        canvas.height = 48;\n        context.clearRect(0, 0, canvas.width, canvas.height);\n\n        var colors = getColors(options),\n            color0 = colors[0],\n            color1 = colors[1];\n        context.beginPath();\n\n        if (options.shadow) {\n            context.font = \"normal normal normal \" + fontsize + \"px \" + font;\n\n            context.textBaseline = \"top\";\n            var textWidth = context.measureText(options.unicodelabel);\n            text_x = Math.floor(canvas.width / 2 - textWidth.width / 2);\n\n            context.shadowOffsetX = -2;\n            context.shadowOffsetY = -2;\n            context.shadowBlur = 0;\n\n            context.fillStyle = \"#FFFFFF\";\n            context.shadowColor = \"#666666\";\n\n            context.fillText(options.unicodelabel, text_x - 4, 2);\n            context.fillText(options.unicodelabel, text_x, 5);\n            context.fillStyle = color0;\n            context.fillText(options.unicodelabel, text_x + 4, 8);\n\n            context.strokeStyle = \"#FFFFFF\";\n            context.strokeText(options.unicodelabel, text_x + 4, 8);\n        } else {\n            context.font =\n                \"normal normal normal \" + (fontsize - 3) + \"px \" + font;\n\n            context.textBaseline = \"top\";\n            var textmetric = context.measureText(options.unicodelabel);\n            text_x = Math.floor(canvas.width / 2 - textmetric.width / 2);\n\n            //console.debug('textmetric', textmetric);\n\n            context.shadowOffsetX = 2;\n            context.shadowOffsetY = 2;\n            context.shadowBlur = 0;\n            context.shadowColor = \"#FFFFFF\";\n            context.fillStyle = color0;\n            context.fillText(options.unicodelabel, text_x + 1, 6);\n\n            context.shadowOffsetX = 2;\n            context.shadowOffsetY = 2;\n            context.shadowBlur = 1;\n            context.shadowColor = \"#FFFFFF\";\n            context.strokeStyle = color1;\n            context.strokeText(options.unicodelabel, text_x + 1, 6);\n        }\n\n        canvas.fillColor = color0;\n\n        return canvas;\n    };\n\n    theoptions.scale = theoptions.scale || 1;\n    theoptions.fontsize = theoptions.fontsize || 26;\n\n    var markerCanvas = generateTransparentCanvas(theoptions),\n        markerOpts = {};\n\n    var scale = theoptions.scale;\n\n    theoptions.type = \"transparent\";\n\n    Object.assign(markerOpts, theoptions);\n\n    if (window.google && window.google.maps) {\n        Object.assign(markerOpts, {\n            size: new google.maps.Size(54 * scale, 48 * scale),\n            origin: new google.maps.Point(0, 0),\n            anchor: new google.maps.Point(27 * scale, 24 * scale),\n            scaledSize: new google.maps.Size(54 * scale, 48 * scale)\n        });\n    }\n    var iconObj = new IconObject(markerCanvas, markerOpts);\n\n    return iconObj;\n}\n\n/** global: google, r, g, b */\n\nfunction padHex(str_in) {\n    if ((\"\" + str_in).length === 1) {\n        return \"0\" + String(str_in);\n    } else {\n        return String(str_in);\n    }\n}\n\nvar MarkerFactory = {\n    createTransparentMarkerIcon: createTransparentMarkerIcon,\n    createFatMarkerIcon: createFatMarkerIcon,\n    createTextMarker: createTextMarker,\n    createClusterIcon: createClusterIcon,\n\n    generateAutoicon: function(options) {\n        var cacheKey = JSON.stringify(options);\n\n        var iconObj = window.sessionStorage.getItem(cacheKey);\n        if (iconObj !== null && !options.no_cache) {\n            return JSON.parse(iconObj);\n        }\n        if (!options.is_icon) {\n            iconObj = MarkerFactory.createTextMarker(options);\n        } else if (options.transparent_background) {\n            //console.log(\"createTransparentMarkerIcon\", options.font);\n            iconObj = MarkerFactory.createTransparentMarkerIcon(options);\n        } else {\n            //console.log(\"createFatMarkerIcon\", options.font);\n            iconObj = MarkerFactory.createFatMarkerIcon(options);\n        }\n        if (!options.no_cache) {\n            var cached = iconObj.toJSON();\n            cached.url = iconObj.url;\n            window.sessionStorage.setItem(cacheKey, JSON.stringify(cached));\n        }\n        return iconObj;\n    },\n    /**\n     * Receives a color string rgb(a), hsl(a) or hex, returns its components\n     * in rgba and hsla, with optional transparency\n     * plus a darkened version (default is half of each RGB component) and a\n     *\n     * @param {string} somecolor    - A color string in  rgb(a), hsl(a) or hex format\n     * @param {Number} opacity      - Opacity to apply to the color. Optional, default 1\n     * @param {Number} darkenfactor - How much darker should the resulting color be. Optional, default 1\n     *\n     * @return     {Object}  input color parsed and modified as requested\n     */\n    parseColorString: function(somecolor, opacity, darkenfactor) {\n        var parsedcolor = {\n                original: somecolor\n            },\n            hsl,\n            rgb;\n\n        darkenfactor = darkenfactor || 1;\n        opacity = opacity || 1;\n\n        if (somecolor.indexOf(\"hsl\") !== -1) {\n            hsl = parseHSL(somecolor, opacity);\n            rgb = hslToRGB(hsl.h, hsl.s, hsl.l, hsl.a, darkenfactor);\n        } else if (somecolor.indexOf(\"rgb\") !== -1) {\n            rgb = parseRGB(somecolor, opacity, darkenfactor);\n        } else {\n            rgb = parseHex(somecolor, opacity, darkenfactor);\n        }\n\n        hsl = rgbToHSL(rgb.r, rgb.g, rgb.b, rgb.a);\n\n        parsedcolor.hsl = {\n            h: hsl.h,\n            s: hsl.s,\n            l: hsl.l,\n            a: hsl.a\n        };\n        parsedcolor.rgb = {\n            r: rgb.r,\n            g: rgb.g,\n            b: rgb.b,\n            a: rgb.a\n        };\n\n        parsedcolor.fillColor = rgb.fillColor;\n        parsedcolor.rgba = rgb.fillColor;\n        parsedcolor.hsla = hsl.fillColor;\n        parsedcolor.strokeColor = rgb.strokeColor;\n        parsedcolor.hex = [\n            \"#\",\n            padHex(rgb.r.toString(16)),\n            padHex(rgb.g.toString(16)),\n            padHex(rgb.b.toString(16))\n        ].join(\"\");\n        return parsedcolor;\n    },\n\n    /**\n     * Generates an google maps marker (or an image as dataurl from the given options)\n     *\n     * @param      {Object}  options  The options\n     * @return     {Object}  { description_of_the_return_value }\n     */\n    autoIcon: function(options) {\n        if (typeof options !== \"object\") {\n            console.warn(\"autoIcon expects an object as its only parameter\");\n            return null;\n        }\n        // unless explicitly set to false, the icon doesn't have a marker-like wrapper\n        options.transparent_background =\n            options.transparent_background !== false;\n        options.label = String(options.label || \"A\");\n        options.color = options.color || \"#FF0000\";\n\n        if (\n            options.label.length === 4 ||\n            options.label.substring(0, 2) === \"0x\"\n        ) {\n            options.font = options.font || \"fontello\";\n            options.label = (options.label || \"e836\").slice(-4);\n            options.unicodelabel = String.fromCharCode(\"0x\" + options.label);\n            options.scale = options.scale || 1;\n            options.is_icon = true;\n\n            return MarkerFactory.generateAutoicon(options);\n        } else if (options.shadow) {\n\n            return MarkerFactory.createClusterIcon(options);\n        } else {\n            options.scale = options.scale || 0.75;\n            options.label = String(options.label || \"A\");\n            options.fontsize = options.fontsize || 11;\n            options.font = options.font || \"Arial\";\n            // This is text I should print literally\n\n            return MarkerFactory.generateAutoicon(options);\n        }\n    }\n};\n\nexport { MarkerFactory };\n","/** @license\n *\n *  Copyright (C) 2012 K. Arthur Endsley (kaendsle@mtu.edu)\n *  Michigan Tech Research Institute (MTRI)\n *  3600 Green Court, Suite 100, Ann Arbor, MI, 48105\n *\n *  This program is free software: you can redistribute it and/or modify\n *  it under the terms of the GNU General Public License as published by\n *  the Free Software Foundation, either version 3 of the License, or\n *  (at your option) any later version.\n *\n *  This program is distributed in the hope that it will be useful,\n *  but WITHOUT ANY WARRANTY; without even the implied warranty of\n *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n *  GNU General Public License for more details.\n *\n *  You should have received a copy of the GNU General Public License\n *  along with this program.  If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\n/**\n * @desc The Wkt namespace.\n * @property    {String}    delimiter   - The default delimiter for separating components of atomic geometry (coordinates)\n * @namespace\n * @global\n */\nvar Wkt = function (obj) {\n\tif (obj instanceof Wkt) return obj;\n\tif (!(this instanceof Wkt)) return new Wkt(obj);\n\tthis._wrapped = obj;\n};\n\n/**\n * Returns true if the substring is found at the beginning of the string.\n * @param   str {String}    The String to search\n * @param   sub {String}    The substring of interest\n * @return      {Boolean}\n * @private\n */\nvar beginsWith = function (str, sub) {\n\treturn str.substring(0, sub.length) === sub;\n};\n\n/**\n * Returns true if the substring is found at the end of the string.\n * @param   str {String}    The String to search\n * @param   sub {String}    The substring of interest\n * @return      {Boolean}\n * @private\n */\nvar endsWith = function (str, sub) {\n\treturn str.substring(str.length - sub.length) === sub;\n};\n\n/**\n * The default delimiter for separating components of atomic geometry (coordinates)\n * @ignore\n */\nWkt.delimiter = ' ';\n\n/**\n * Determines whether or not the passed Object is an Array.\n * @param   obj {Object}    The Object in question\n * @return      {Boolean}\n * @member Wkt.isArray\n * @method\n */\nWkt.isArray = function (obj) {\n\treturn !!(obj && obj.constructor === Array);\n};\n\n/**\n * Removes given character String(s) from a String.\n * @param   str {String}    The String to search\n * @param   sub {String}    The String character(s) to trim\n * @return      {String}    The trimmed string\n * @member Wkt.trim\n * @method\n */\nWkt.trim = function (str, sub) {\n\tsub = sub || ' '; // Defaults to trimming spaces\n\t// Trim beginning spaces\n\twhile (beginsWith(str, sub)) {\n\t\tstr = str.substring(1);\n\t}\n\t// Trim ending spaces\n\twhile (endsWith(str, sub)) {\n\t\tstr = str.substring(0, str.length - 1);\n\t}\n\treturn str;\n};\n\n/**\n * An object for reading WKT strings and writing geographic features\n * @constructor this.Wkt.Wkt\n * @param   initializer {String}    An optional WKT string for immediate read\n * @property            {Array}     components      - Holder for atomic geometry objects (internal representation of geometric components)\n * @property            {String}    delimiter       - The default delimiter for separating components of atomic geometry (coordinates)\n * @property            {Object}    regExes         - Some regular expressions copied from OpenLayers.Format.WKT.js\n * @property            {String}    type            - The Well-Known Text name (e.g. 'point') of the geometry\n * @property            {Boolean}   wrapVerticies   - True to wrap vertices in MULTIPOINT geometries; If true: MULTIPOINT((30 10),(10 30),(40 40)); If false: MULTIPOINT(30 10,10 30,40 40)\n * @return              {this.Wkt.Wkt}\n * @memberof Wkt\n */\nWkt.Wkt = function (initializer) {\n\n\t/**\n\t * The default delimiter between X and Y coordinates.\n\t * @ignore\n\t */\n\tthis.delimiter = Wkt.delimiter || ' ';\n\n\t/**\n\t * Configuration parameter for controlling how Wicket seralizes\n\t * MULTIPOINT strings. Examples; both are valid WKT:\n\t * If true: MULTIPOINT((30 10),(10 30),(40 40))\n\t * If false: MULTIPOINT(30 10,10 30,40 40)\n\t * @ignore\n\t */\n\tthis.wrapVertices = true;\n\n\t/**\n\t * Some regular expressions copied from OpenLayers.Format.WKT.js\n\t * @ignore\n\t */\n\tthis.regExes = {\n\t\t'typeStr': /^\\s*(\\w+)\\s*\\(\\s*(.*)\\s*\\)\\s*$/,\n\t\t'spaces': /\\s+|\\+/, // Matches the '+' or the empty space\n\t\t'numeric': /-*\\d+(\\.*\\d+)?/,\n\t\t'comma': /\\s*,\\s*/,\n\t\t'parenComma': /\\)\\s*,\\s*\\(/,\n\t\t'coord': /-*\\d+\\.*\\d+ -*\\d+\\.*\\d+/, // e.g. \"24 -14\"\n\t\t'doubleParenComma': /\\)\\s*\\)\\s*,\\s*\\(\\s*\\(/,\n\t\t'trimParens': /^\\s*\\(?(.*?)\\)?\\s*$/,\n\t\t'ogcTypes': /^(multi)?(point|line|polygon|box)?(string)?$/i, // Captures e.g. \"Multi\",\"Line\",\"String\"\n\t\t'crudeJson': /^{.*\"(type|coordinates|geometries|features)\":.*}$/ // Attempts to recognize JSON strings\n\t};\n\n\t/**\n\t * The internal representation of geometry--the \"components\" of geometry.\n\t * @ignore\n\t */\n\tthis.components = undefined;\n\n\t// An initial WKT string may be provided\n\tif (initializer && typeof initializer === 'string') {\n\t\tthis.read(initializer);\n\t} else if (initializer && typeof initializer !== undefined) {\n\t\tthis.fromObject(initializer);\n\t}\n\n};\n\n/**\n * Returns true if the internal geometry is a collection of geometries.\n * @return  {Boolean}   Returns true when it is a collection\n * @memberof this.Wkt.Wkt\n * @method\n */\nWkt.Wkt.prototype.isCollection = function () {\n\tswitch (this.type.slice(0, 5)) {\n\tcase 'multi':\n\t\t// Trivial; any multi-geometry is a collection\n\t\treturn true;\n\tcase 'polyg':\n\t\t// Polygons with holes are \"collections\" of rings\n\t\treturn true;\n\tdefault:\n\t\t// Any other geometry is not a collection\n\t\treturn false;\n\t}\n};\n\n/**\n * Compares two x,y coordinates for equality.\n * @param   a   {Object}    An object with x and y properties\n * @param   b   {Object}    An object with x and y properties\n * @return      {Boolean}\n * @memberof this.Wkt.Wkt\n * @method\n */\nWkt.Wkt.prototype.sameCoords = function (a, b) {\n\treturn (a.x === b.x && a.y === b.y);\n};\n\n/**\n * Sets internal geometry (components) from framework geometry (e.g.\n * Google Polygon objects or google.maps.Polygon).\n * @param   obj {Object}    The framework-dependent geometry representation\n * @return      {this.Wkt.Wkt}   The object itself\n * @memberof this.Wkt.Wkt\n * @method\n */\nWkt.Wkt.prototype.fromObject = function (obj) {\n\tvar result;\n\n\tif (obj.hasOwnProperty('type') && obj.hasOwnProperty('coordinates')) {\n\t\tresult = this.fromJson(obj);\n\t} else {\n\t\tresult = this.deconstruct.call(this, obj);\n\t}\n\n\tthis.components = result.components;\n\tthis.isRectangle = result.isRectangle || false;\n\tthis.type = result.type;\n\treturn this;\n};\n\n/**\n * Creates external geometry objects based on a plug-in framework's\n * construction methods and available geometry classes.\n * @param   config  {Object}    An optional framework-dependent properties specification\n * @return          {Object}    The framework-dependent geometry representation\n * @memberof this.Wkt.Wkt\n * @method\n */\nWkt.Wkt.prototype.toObject = function (config) {\n\tvar obj = this.construct[this.type].call(this, config);\n\t// Don't assign the \"properties\" property to an Array\n\tif (typeof obj === 'object' && !Wkt.isArray(obj)) {\n\t\tobj.properties = this.properties;\n\t}\n\treturn obj;\n};\n\n/**\n * Returns the WKT string representation; the same as the write() method.\n * @memberof this.Wkt.Wkt\n * @method\n */\nWkt.Wkt.prototype.toString = function (config) {\n\treturn this.write();\n};\n\n/**\n * Parses a JSON representation as an Object.\n * @param\tobj\t{Object}\tAn Object with the GeoJSON schema\n * @return\t{this.Wkt.Wkt}\tThe object itself\n * @memberof this.Wkt.Wkt\n * @method\n */\nWkt.Wkt.prototype.fromJson = function (obj) {\n\tvar i, j, k, coords, iring, oring;\n\n\tthis.type = obj.type.toLowerCase();\n\tthis.components = [];\n\tif (obj.hasOwnProperty('geometry')) { //Feature\n\t\tthis.fromJson(obj.geometry);\n\t\tthis.properties = obj.properties;\n\t\treturn this;\n\t}\n\tcoords = obj.coordinates;\n\n\tif (!Wkt.isArray(coords[0])) { // Point\n\t\tthis.components.push({\n\t\t\tx: coords[0],\n\t\t\ty: coords[1]\n\t\t});\n\n\t} else {\n\n\t\tfor (i in coords) {\n\t\t\tif (coords.hasOwnProperty(i)) {\n\n\t\t\t\tif (!Wkt.isArray(coords[i][0])) { // LineString\n\n\t\t\t\t\tif (this.type === 'multipoint') { // MultiPoint\n\t\t\t\t\t\tthis.components.push([{\n\t\t\t\t\t\t\tx: coords[i][0],\n\t\t\t\t\t\t\ty: coords[i][1]\n\t\t\t\t\t\t}]);\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.components.push({\n\t\t\t\t\t\t\tx: coords[i][0],\n\t\t\t\t\t\t\ty: coords[i][1]\n\t\t\t\t\t\t});\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\toring = [];\n\t\t\t\t\tfor (j in coords[i]) {\n\t\t\t\t\t\tif (coords[i].hasOwnProperty(j)) {\n\n\t\t\t\t\t\t\tif (!Wkt.isArray(coords[i][j][0])) {\n\t\t\t\t\t\t\t\toring.push({\n\t\t\t\t\t\t\t\t\tx: coords[i][j][0],\n\t\t\t\t\t\t\t\t\ty: coords[i][j][1]\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tiring = [];\n\t\t\t\t\t\t\t\tfor (k in coords[i][j]) {\n\t\t\t\t\t\t\t\t\tif (coords[i][j].hasOwnProperty(k)) {\n\n\t\t\t\t\t\t\t\t\t\tiring.push({\n\t\t\t\t\t\t\t\t\t\t\tx: coords[i][j][k][0],\n\t\t\t\t\t\t\t\t\t\t\ty: coords[i][j][k][1]\n\t\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\toring.push(iring);\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.components.push(oring);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t}\n\n\treturn this;\n};\n\n/**\n * Creates a JSON representation, with the GeoJSON schema, of the geometry.\n * @return    {Object}    The corresponding GeoJSON representation\n * @memberof this.Wkt.Wkt\n * @method\n */\nWkt.Wkt.prototype.toJson = function () {\n\tvar cs, json, i, j, k, ring, rings;\n\n\tcs = this.components;\n\tjson = {\n\t\tcoordinates: [],\n\t\ttype: (function () {\n\t\t\tvar i, type, s;\n\n\t\t\ttype = this.regExes.ogcTypes.exec(this.type).slice(1);\n\t\t\ts = [];\n\n\t\t\tfor (i in type) {\n\t\t\t\tif (type.hasOwnProperty(i)) {\n\t\t\t\t\tif (type[i] !== undefined) {\n\t\t\t\t\t\ts.push(type[i].toLowerCase().slice(0, 1).toUpperCase() + type[i].toLowerCase().slice(1));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn s;\n\t\t}.call(this)).join('')\n\t}\n\n\t// Wkt BOX type gets a special bbox property in GeoJSON\n\tif (this.type.toLowerCase() === 'box') {\n\t\tjson.type = 'Polygon';\n\t\tjson.bbox = [];\n\n\t\tfor (i in cs) {\n\t\t\tif (cs.hasOwnProperty(i)) {\n\t\t\t\tjson.bbox = json.bbox.concat([cs[i].x, cs[i].y]);\n\t\t\t}\n\t\t}\n\n\t\tjson.coordinates = [\n\t\t\t[\n\t\t\t\t[cs[0].x, cs[0].y],\n\t\t\t\t[cs[0].x, cs[1].y],\n\t\t\t\t[cs[1].x, cs[1].y],\n\t\t\t\t[cs[1].x, cs[0].y],\n\t\t\t\t[cs[0].x, cs[0].y]\n\t\t\t]\n\t\t];\n\n\t\treturn json;\n\t}\n\n\t// For the coordinates of most simple features\n\tfor (i in cs) {\n\t\tif (cs.hasOwnProperty(i)) {\n\n\t\t\t// For those nested structures\n\t\t\tif (Wkt.isArray(cs[i])) {\n\t\t\t\trings = [];\n\n\t\t\t\tfor (j in cs[i]) {\n\t\t\t\t\tif (cs[i].hasOwnProperty(j)) {\n\n\t\t\t\t\t\tif (Wkt.isArray(cs[i][j])) { // MULTIPOLYGONS\n\t\t\t\t\t\t\tring = [];\n\n\t\t\t\t\t\t\tfor (k in cs[i][j]) {\n\t\t\t\t\t\t\t\tif (cs[i][j].hasOwnProperty(k)) {\n\t\t\t\t\t\t\t\t\tring.push([cs[i][j][k].x, cs[i][j][k].y]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\trings.push(ring);\n\n\t\t\t\t\t\t} else { // POLYGONS and MULTILINESTRINGS\n\n\t\t\t\t\t\t\tif (cs[i].length > 1) {\n\t\t\t\t\t\t\t\trings.push([cs[i][j].x, cs[i][j].y]);\n\n\t\t\t\t\t\t\t} else { // MULTIPOINTS\n\t\t\t\t\t\t\t\trings = rings.concat([cs[i][j].x, cs[i][j].y]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tjson.coordinates.push(rings);\n\n\t\t\t} else {\n\t\t\t\tif (cs.length > 1) { // For LINESTRING type\n\t\t\t\t\tjson.coordinates.push([cs[i].x, cs[i].y]);\n\n\t\t\t\t} else { // For POINT type\n\t\t\t\t\tjson.coordinates = json.coordinates.concat([cs[i].x, cs[i].y]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\t}\n\n\treturn json;\n};\n\n/**\n * Absorbs the geometry of another this.Wkt.Wkt instance, merging it with its own,\n * creating a collection (MULTI-geometry) based on their types, which must agree.\n * For example, creates a MULTIPOLYGON from a POLYGON type merged with another\n * POLYGON type, or adds a POLYGON instance to a MULTIPOLYGON instance.\n * @param   wkt {String}    A Wkt.Wkt object\n * @return\t{this.Wkt.Wkt}\tThe object itself\n * @memberof this.Wkt.Wkt\n * @method\n */\nWkt.Wkt.prototype.merge = function (wkt) {\n\tvar prefix = this.type.slice(0, 5);\n\n\tif (this.type !== wkt.type) {\n\t\tif (this.type.slice(5, this.type.length) !== wkt.type) {\n\t\t\tthrow TypeError('The input geometry types must agree or the calling this.Wkt.Wkt instance must be a multigeometry of the other');\n\t\t}\n\t}\n\n\tswitch (prefix) {\n\n\tcase 'point':\n\t\tthis.components = [this.components.concat(wkt.components)];\n\t\tbreak;\n\n\tcase 'multi':\n\t\tthis.components = this.components.concat((wkt.type.slice(0, 5) === 'multi') ? wkt.components : [wkt.components]);\n\t\tbreak;\n\n\tdefault:\n\t\tthis.components = [\n\t\t\tthis.components,\n\t\t\twkt.components\n\t\t];\n\t\tbreak;\n\n\t}\n\n\tif (prefix !== 'multi') {\n\t\tthis.type = 'multi' + this.type;\n\t}\n\treturn this;\n};\n\n/**\n * Reads a WKT string, validating and incorporating it.\n * @param   str {String}    A WKT or GeoJSON string\n * @return\t{this.Wkt.Wkt}\tThe object itself\n * @memberof this.Wkt.Wkt\n * @method\n */\nWkt.Wkt.prototype.read = function (str) {\n\tvar matches;\n\tmatches = this.regExes.typeStr.exec(str);\n\tif (matches) {\n\t\tthis.type = matches[1].toLowerCase();\n\t\tthis.base = matches[2];\n\t\tif (this.ingest[this.type]) {\n\t\t\tthis.components = this.ingest[this.type].apply(this, [this.base]);\n\t\t}\n\n\t} else {\n\t\tif (this.regExes.crudeJson.test(str)) {\n\t\t\tif (typeof JSON === 'object' && typeof JSON.parse === 'function') {\n\t\t\t\tthis.fromJson(JSON.parse(str));\n\n\t\t\t} else {\n\t\t\t\tconsole.log('JSON.parse() is not available; cannot parse GeoJSON strings');\n\t\t\t\tthrow {\n\t\t\t\t\tname: 'JSONError',\n\t\t\t\t\tmessage: 'JSON.parse() is not available; cannot parse GeoJSON strings'\n\t\t\t\t};\n\t\t\t}\n\n\t\t} else {\n\t\t\tconsole.log('Invalid WKT string provided to read()');\n\t\t\tthrow {\n\t\t\t\tname: 'WKTError',\n\t\t\t\tmessage: 'Invalid WKT string provided to read()'\n\t\t\t};\n\t\t}\n\t}\n\n\treturn this;\n}; // eo readWkt\n\n/**\n * Writes a WKT string.\n * @param   components  {Array}     An Array of internal geometry objects\n * @return              {String}    The corresponding WKT representation\n * @memberof this.Wkt.Wkt\n * @method\n */\nWkt.Wkt.prototype.write = function (components) {\n\tvar i, pieces, data;\n\n\tcomponents = components || this.components;\n\n\tpieces = [];\n\n\tpieces.push(this.type.toUpperCase() + '(');\n\n\tfor (i = 0; i < components.length; i += 1) {\n\t\tif (this.isCollection() && i > 0) {\n\t\t\tpieces.push(',');\n\t\t}\n\n\t\t// There should be an extract function for the named type\n\t\tif (!this.extract[this.type]) {\n\t\t\treturn null;\n\t\t}\n\n\t\tdata = this.extract[this.type].apply(this, [components[i]]);\n\t\tif (this.isCollection() && this.type !== 'multipoint') {\n\t\t\tpieces.push('(' + data + ')');\n\n\t\t} else {\n\t\t\tpieces.push(data);\n\n\t\t\t// If not at the end of the components, add a comma\n\t\t\tif (i !== (components.length - 1) && this.type !== 'multipoint') {\n\t\t\t\tpieces.push(',');\n\t\t\t}\n\n\t\t}\n\t}\n\n\tpieces.push(')');\n\n\treturn pieces.join('');\n};\n\n/**\n * This object contains functions as property names that extract WKT\n * strings from the internal representation.\n * @memberof this.Wkt.Wkt\n * @namespace this.Wkt.Wkt.extract\n * @instance\n */\nWkt.Wkt.prototype.extract = {\n\t/**\n\t * Return a WKT string representing atomic (point) geometry\n\t * @param   point   {Object}    An object with x and y properties\n\t * @return          {String}    The WKT representation\n\t * @memberof this.Wkt.Wkt.extract\n\t * @instance\n\t */\n\tpoint: function (point) {\n\t\treturn String(point.x) + this.delimiter + String(point.y);\n\t},\n\n\t/**\n\t * Return a WKT string representing multiple atoms (points)\n\t * @param   multipoint  {Array}     Multiple x-and-y objects\n\t * @return              {String}    The WKT representation\n\t * @memberof this.Wkt.Wkt.extract\n\t * @instance\n\t */\n\tmultipoint: function (multipoint) {\n\t\tvar i, parts = [],\n\t\t\ts;\n\n\t\tfor (i = 0; i < multipoint.length; i += 1) {\n\t\t\ts = this.extract.point.apply(this, [multipoint[i]]);\n\n\t\t\tif (this.wrapVertices) {\n\t\t\t\ts = '(' + s + ')';\n\t\t\t}\n\n\t\t\tparts.push(s);\n\t\t}\n\n\t\treturn parts.join(',');\n\t},\n\n\t/**\n\t * Return a WKT string representing a chain (linestring) of atoms\n\t * @param   linestring  {Array}     Multiple x-and-y objects\n\t * @return              {String}    The WKT representation\n\t * @memberof this.Wkt.Wkt.extract\n\t * @instance\n\t */\n\tlinestring: function (linestring) {\n\t\t// Extraction of linestrings is the same as for points\n\t\treturn this.extract.point.apply(this, [linestring]);\n\t},\n\n\t/**\n\t * Return a WKT string representing multiple chains (multilinestring) of atoms\n\t * @param   multilinestring {Array}     Multiple of multiple x-and-y objects\n\t * @return                  {String}    The WKT representation\n\t * @memberof this.Wkt.Wkt.extract\n\t * @instance\n\t */\n\tmultilinestring: function (multilinestring) {\n\t\tvar i, parts = [];\n\n\t\tif (multilinestring.length) {\n\t\t\tfor (i = 0; i < multilinestring.length; i += 1) {\n\t\t\t\tparts.push(this.extract.linestring.apply(this, [multilinestring[i]]));\n\t\t\t}\n\t\t} else {\n\t\t\tparts.push(this.extract.point.apply(this, [multilinestring]));\n\t\t}\n\n\t\treturn parts.join(',');\n\t},\n\n\t/**\n\t * Return a WKT string representing multiple atoms in closed series (polygon)\n\t * @param   polygon {Array}     Collection of ordered x-and-y objects\n\t * @return          {String}    The WKT representation\n\t * @memberof this.Wkt.Wkt.extract\n\t * @instance\n\t */\n\tpolygon: function (polygon) {\n\t\t// Extraction of polygons is the same as for multilinestrings\n\t\treturn this.extract.multilinestring.apply(this, [polygon]);\n\t},\n\n\t/**\n\t * Return a WKT string representing multiple closed series (multipolygons) of multiple atoms\n\t * @param   multipolygon    {Array}     Collection of ordered x-and-y objects\n\t * @return                  {String}    The WKT representation\n\t * @memberof this.Wkt.Wkt.extract\n\t * @instance\n\t */\n\tmultipolygon: function (multipolygon) {\n\t\tvar i, parts = [];\n\t\tfor (i = 0; i < multipolygon.length; i += 1) {\n\t\t\tparts.push('(' + this.extract.polygon.apply(this, [multipolygon[i]]) + ')');\n\t\t}\n\t\treturn parts.join(',');\n\t},\n\n\t/**\n\t * Return a WKT string representing a 2DBox\n\t * @param   multipolygon    {Array}     Collection of ordered x-and-y objects\n\t * @return                  {String}    The WKT representation\n\t * @memberof this.Wkt.Wkt.extract\n\t * @instance\n\t */\n\tbox: function (box) {\n\t\treturn this.extract.linestring.apply(this, [box]);\n\t},\n\n\tgeometrycollection: function (str) {\n\t\tconsole.log('The geometrycollection WKT type is not yet supported.');\n\t}\n};\n\n/**\n * This object contains functions as property names that ingest WKT\n * strings into the internal representation.\n * @memberof this.Wkt.Wkt\n * @namespace this.Wkt.Wkt.ingest\n * @instance\n */\nWkt.Wkt.prototype.ingest = {\n\n\t/**\n\t * Return point feature given a point WKT fragment.\n\t * @param   str {String}    A WKT fragment representing the point\n\t * @memberof this.Wkt.Wkt.ingest\n\t * @instance\n\t */\n\tpoint: function (str) {\n\t\tvar coords = Wkt.trim(str).split(this.regExes.spaces);\n\t\t// In case a parenthetical group of coordinates is passed...\n\t\treturn [{ // ...Search for numeric substrings\n\t\t\tx: parseFloat(this.regExes.numeric.exec(coords[0])[0]),\n\t\t\ty: parseFloat(this.regExes.numeric.exec(coords[1])[0])\n\t\t}];\n\t},\n\n\t/**\n\t * Return a multipoint feature given a multipoint WKT fragment.\n\t * @param   str {String}    A WKT fragment representing the multipoint\n\t * @memberof this.Wkt.Wkt.ingest\n\t * @instance\n\t */\n\tmultipoint: function (str) {\n\t\tvar i, components, points;\n\t\tcomponents = [];\n\t\tpoints = Wkt.trim(str).split(this.regExes.comma);\n\t\tfor (i = 0; i < points.length; i += 1) {\n\t\t\tcomponents.push(this.ingest.point.apply(this, [points[i]]));\n\t\t}\n\t\treturn components;\n\t},\n\n\t/**\n\t * Return a linestring feature given a linestring WKT fragment.\n\t * @param   str {String}    A WKT fragment representing the linestring\n\t * @memberof this.Wkt.Wkt.ingest\n\t * @instance\n\t */\n\tlinestring: function (str) {\n\t\tvar i, multipoints, components;\n\n\t\t// In our x-and-y representation of components, parsing\n\t\t//  multipoints is the same as parsing linestrings\n\t\tmultipoints = this.ingest.multipoint.apply(this, [str]);\n\n\t\t// However, the points need to be joined\n\t\tcomponents = [];\n\t\tfor (i = 0; i < multipoints.length; i += 1) {\n\t\t\tcomponents = components.concat(multipoints[i]);\n\t\t}\n\t\treturn components;\n\t},\n\n\t/**\n\t * Return a multilinestring feature given a multilinestring WKT fragment.\n\t * @param   str {String}    A WKT fragment representing the multilinestring\n\t * @memberof this.Wkt.Wkt.ingest\n\t * @instance\n\t */\n\tmultilinestring: function (str) {\n\t\tvar i, components, line, lines;\n\t\tcomponents = [];\n\n\t\tlines = Wkt.trim(str).split(this.regExes.doubleParenComma);\n\t\tif (lines.length === 1) { // If that didn't work...\n\t\t\tlines = Wkt.trim(str).split(this.regExes.parenComma);\n\t\t}\n\n\t\tfor (i = 0; i < lines.length; i += 1) {\n\t\t\tline = lines[i].replace(this.regExes.trimParens, '$1');\n\t\t\tcomponents.push(this.ingest.linestring.apply(this, [line]));\n\t\t}\n\n\t\treturn components;\n\t},\n\n\t/**\n\t * Return a polygon feature given a polygon WKT fragment.\n\t * @param   str {String}    A WKT fragment representing the polygon\n\t * @memberof this.Wkt.Wkt.ingest\n\t * @instance\n\t */\n\tpolygon: function (str) {\n\t\tvar i, j, components, subcomponents, ring, rings;\n\t\trings = Wkt.trim(str).split(this.regExes.parenComma);\n\t\tcomponents = []; // Holds one or more rings\n\t\tfor (i = 0; i < rings.length; i += 1) {\n\t\t\tring = rings[i].replace(this.regExes.trimParens, '$1').split(this.regExes.comma);\n\t\t\tsubcomponents = []; // Holds the outer ring and any inner rings (holes)\n\t\t\tfor (j = 0; j < ring.length; j += 1) {\n\t\t\t\t// Split on the empty space or '+' character (between coordinates)\n\t\t\t\tvar split = ring[j].split(this.regExes.spaces);\n\t\t\t\tif (split.length > 2) {\n\t\t\t\t\t//remove the elements which are blanks\n\t\t\t\t\tsplit = split.filter(function (n) {\n\t\t\t\t\t\treturn n != \"\"\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (split.length === 2) {\n\t\t\t\t\tvar x_cord = split[0];\n\t\t\t\t\tvar y_cord = split[1];\n\n\t\t\t\t\t//now push\n\t\t\t\t\tsubcomponents.push({\n\t\t\t\t\t\tx: parseFloat(x_cord),\n\t\t\t\t\t\ty: parseFloat(y_cord)\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\tcomponents.push(subcomponents);\n\t\t}\n\t\treturn components;\n\t},\n\n\t/**\n\t * Return box vertices (which would become the Rectangle bounds) given a Box WKT fragment.\n\t * @param   str {String}    A WKT fragment representing the box\n\t * @memberof this.Wkt.Wkt.ingest\n\t * @instance\n\t */\n\tbox: function (str) {\n\t\tvar i, multipoints, components;\n\n\t\t// In our x-and-y representation of components, parsing\n\t\t//  multipoints is the same as parsing linestrings\n\t\tmultipoints = this.ingest.multipoint.apply(this, [str]);\n\n\t\t// However, the points need to be joined\n\t\tcomponents = [];\n\t\tfor (i = 0; i < multipoints.length; i += 1) {\n\t\t\tcomponents = components.concat(multipoints[i]);\n\t\t}\n\n\t\treturn components;\n\t},\n\n\t/**\n\t * Return a multipolygon feature given a multipolygon WKT fragment.\n\t * @param   str {String}    A WKT fragment representing the multipolygon\n\t * @memberof this.Wkt.Wkt.ingest\n\t * @instance\n\t */\n\tmultipolygon: function (str) {\n\t\tvar i, components, polygon, polygons;\n\t\tcomponents = [];\n\t\tpolygons = Wkt.trim(str).split(this.regExes.doubleParenComma);\n\t\tfor (i = 0; i < polygons.length; i += 1) {\n\t\t\tpolygon = polygons[i].replace(this.regExes.trimParens, '$1');\n\t\t\tcomponents.push(this.ingest.polygon.apply(this, [polygon]));\n\t\t}\n\t\treturn components;\n\t},\n\n\t/**\n\t * Return an array of features given a geometrycollection WKT fragment.\n\t * @param   str {String}    A WKT fragment representing the geometry collection\n\t * @memberof this.Wkt.Wkt.ingest\n\t * @instance\n\t */\n\tgeometrycollection: function (str) {\n\t\tconsole.log('The geometrycollection WKT type is not yet supported.');\n\t}\n\n}; // eo ingest\n\n/**\n * @augments Wkt.Wkt\n * A framework-dependent flag, set for each Wkt.Wkt() instance, that indicates\n * whether or not a closed polygon geometry should be interpreted as a rectangle.\n */\nWkt.Wkt.prototype.isRectangle = false;\n\n/**\n * @augments Wkt.Wkt\n * An object of framework-dependent construction methods used to generate\n * objects belonging to the various geometry classes of the framework.\n */\nWkt.Wkt.prototype.construct = {\n\t/**\n\t * Creates the framework's equivalent point geometry object.\n\t * @param   config      {Object}    An optional properties hash the object should use\n\t * @param   component   {Object}    An optional component to build from\n\t * @return              {google.maps.Marker}\n\t */\n\tpoint: function (config, component) {\n\t\tvar c = component || this.components;\n\n\t\tconfig = config || {};\n\n\t\tconfig.position = new google.maps.LatLng(c[0].y, c[0].x);\n\n\t\treturn new google.maps.Marker(config);\n\t},\n\n\t/**\n\t * Creates the framework's equivalent multipoint geometry object.\n\t * @param   config  {Object}    An optional properties hash the object should use\n\t * @return          {Array}     Array containing multiple google.maps.Marker\n\t */\n\tmultipoint: function (config) {\n\t\tvar i, c, arr;\n\n\t\tc = this.components;\n\n\t\tconfig = config || {};\n\n\t\tarr = [];\n\n\t\tfor (i = 0; i < c.length; i += 1) {\n\t\t\tarr.push(this.construct.point(config, c[i]));\n\t\t}\n\n\t\treturn arr;\n\t},\n\n\t/**\n\t * Creates the framework's equivalent linestring geometry object.\n\t * @param   config      {Object}    An optional properties hash the object should use\n\t * @param   component   {Object}    An optional component to build from\n\t * @return              {google.maps.Polyline}\n\t */\n\tlinestring: function (config, component) {\n\t\tvar i, c;\n\n\t\tc = component || this.components;\n\n\t\tconfig = config || {\n\t\t\teditable: false\n\t\t};\n\n\t\tconfig.path = [];\n\n\t\tfor (i = 0; i < c.length; i += 1) {\n\t\t\tconfig.path.push(new google.maps.LatLng(c[i].y, c[i].x));\n\t\t}\n\n\t\treturn new google.maps.Polyline(config);\n\t},\n\n\t/**\n\t * Creates the framework's equivalent multilinestring geometry object.\n\t * @param   config  {Object}    An optional properties hash the object should use\n\t * @return          {Array}     Array containing multiple google.maps.Polyline instances\n\t */\n\tmultilinestring: function (config) {\n\t\tvar i, c, arr;\n\n\t\tc = this.components;\n\n\t\tconfig = config || {\n\t\t\teditable: false\n\t\t};\n\n\t\tconfig.path = [];\n\n\t\tarr = [];\n\n\t\tfor (i = 0; i < c.length; i += 1) {\n\t\t\tarr.push(this.construct.linestring(config, c[i]));\n\t\t}\n\n\t\treturn arr;\n\t},\n\n\t/**\n\t * Creates the framework's equivalent Box or Rectangle geometry object.\n\t * @param   config      {Object}    An optional properties hash the object should use\n\t * @param   component   {Object}    An optional component to build from\n\t * @return              {google.maps.Rectangle}\n\t */\n\tbox: function (config, component) {\n\t\tvar c = component || this.components;\n\n\t\tconfig = config || {};\n\n\t\tconfig.bounds = new google.maps.LatLngBounds(\n\t\t\tnew google.maps.LatLng(c[0].y, c[0].x),\n\t\t\tnew google.maps.LatLng(c[1].y, c[1].x));\n\n\t\treturn new google.maps.Rectangle(config);\n\t},\n\n\t/**\n\t * Creates the framework's equivalent polygon geometry object.\n\t * @param   config      {Object}    An optional properties hash the object should use\n\t * @param   component   {Object}    An optional component to build from\n\t * @return              {google.maps.Polygon}\n\t */\n\tpolygon: function (config, component) {\n\t\tvar j, k, c, rings, verts;\n\n\t\tvar polygonIsClockwise = function (coords) {\n\t\t\tvar area = 0,\n\t\t\t\tj = null,\n\t\t\t\ti = 0;\n\n\t\t\tfor (i = 0; i < coords.length; i++) {\n\t\t\t\tj = (i + 1) % coords.length;\n\t\t\t\tarea += coords[i].x * coords[j].x;\n\t\t\t\tarea -= coords[j].y * coords[i].y;\n\t\t\t}\n\n\t\t\treturn area > 0;\n\t\t};\n\n\t\tc = component || this.components;\n\n\t\tconfig = config || {\n\t\t\teditable: false // Editable geometry off by default\n\t\t};\n\n\t\tconfig.paths = [];\n\n\t\trings = [];\n\t\tfor (j = 0; j < c.length; j += 1) { // For each ring...\n\n\t\t\tverts = [];\n\t\t\t// NOTE: We iterate to one (1) less than the Array length to skip the last vertex\n\t\t\tfor (k = 0; k < c[j].length - 1; k += 1) { // For each vertex...\n\t\t\t\tverts.push(new google.maps.LatLng(c[j][k].y, c[j][k].x));\n\n\t\t\t} // eo for each vertex\n\n\t\t\tif (j !== 0) {\n\t\t\t\t// Orient inner rings correctly\n\t\t\t\tif (polygonIsClockwise(c[j]) && this.type == 'polygon') {\n\t\t\t\t\tverts.reverse();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\trings.push(verts);\n\t\t} // eo for each ring\n\n\t\tconfig.paths = config.paths.concat(rings);\n\n\t\tif (this.isRectangle) {\n\t\t\treturn (function () {\n\t\t\t\tvar bounds, v;\n\n\t\t\t\tbounds = new google.maps.LatLngBounds();\n\n\t\t\t\tfor (v in rings[0]) { // Ought to be only 1 ring in a Rectangle\n\t\t\t\t\tif (rings[0].hasOwnProperty(v)) {\n\t\t\t\t\t\tbounds.extend(rings[0][v]);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn new google.maps.Rectangle({\n\t\t\t\t\tbounds: bounds\n\t\t\t\t});\n\t\t\t}());\n\t\t} else {\n\t\t\treturn new google.maps.Polygon(config);\n\t\t}\n\t},\n\n\t/**\n\t * Creates the framework's equivalent multipolygon geometry object.\n\t * @param   config  {Object}    An optional properties hash the object should use\n\t * @return          {Array}     Array containing multiple google.maps.Polygon\n\t */\n\tmultipolygon: function (config) {\n\t\tvar i, c, arr;\n\n\t\tc = this.components;\n\n\t\tconfig = config || {\n\t\t\teditable: false\n\t\t};\n\n\t\tconfig.path = [];\n\n\t\tarr = [];\n\n\t\tfor (i = 0; i < c.length; i += 1) {\n\t\t\tarr.push(this.construct.polygon(config, c[i]));\n\t\t}\n\n\t\treturn arr;\n\t}\n\n};\n\n/**\n * @augments Wkt.Wkt\n * A framework-dependent deconstruction method used to generate internal\n * geometric representations from instances of framework geometry. This method\n * uses object detection to attempt to classify members of framework geometry\n * classes into the standard WKT types.\n * @param obj       {Object}    An instance of one of the framework's geometry classes\n * @param multiFlag {Boolean} If true, then the deconstructor will be forced to return a MultiGeometry (multipoint, multilinestring or multipolygon)\n * @return          {Object}    A hash of the 'type' and 'components' thus derived, plus the WKT string of the feature.\n */\nWkt.Wkt.prototype.deconstruct = function (obj, multiFlag) {\n\tvar features, i, j, multiFlag, verts, rings, sign, tmp, response, lat, lng, vertex, ring, linestrings, k;\n\n\t// Shortcut to signed area function (determines clockwise vs counter-clock)\n\tif (google.maps.geometry) {\n\t\tsign = google.maps.geometry.spherical.computeSignedArea;\n\t};\n\n\t// google.maps.LatLng //////////////////////////////////////////////////////\n\tif (obj.constructor === google.maps.LatLng) {\n\n\t\tresponse = {\n\t\t\ttype: 'point',\n\t\t\tcomponents: [{\n\t\t\t\tx: obj.lng(),\n\t\t\t\ty: obj.lat()\n\t\t\t}]\n\t\t};\n\t\treturn response;\n\t}\n\n\t// google.maps.Point //////////////////////////////////////////////////////\n\tif (obj.constructor === google.maps.Point) {\n\t\tresponse = {\n\t\t\ttype: 'point',\n\t\t\tcomponents: [{\n\t\t\t\tx: obj.x,\n\t\t\t\ty: obj.y\n\t\t\t}]\n\t\t};\n\t\treturn response;\n\t}\n\n\t// google.maps.Marker //////////////////////////////////////////////////////\n\tif (obj.constructor === google.maps.Marker) {\n\t\tresponse = {\n\t\t\ttype: 'point',\n\t\t\tcomponents: [{\n\t\t\t\tx: obj.getPosition().lng(),\n\t\t\t\ty: obj.getPosition().lat()\n\t\t\t}]\n\t\t};\n\t\treturn response;\n\t}\n\n\t// google.maps.Polyline ////////////////////////////////////////////////////\n\tif (obj.constructor === google.maps.Polyline) {\n\n\t\tverts = [];\n\t\tfor (i = 0; i < obj.getPath().length; i += 1) {\n\t\t\ttmp = obj.getPath().getAt(i);\n\t\t\tverts.push({\n\t\t\t\tx: tmp.lng(),\n\t\t\t\ty: tmp.lat()\n\t\t\t});\n\t\t}\n\t\tresponse = {\n\t\t\ttype: 'linestring',\n\t\t\tcomponents: verts\n\t\t};\n\t\treturn response;\n\n\t}\n\n\t// google.maps.Polygon /////////////////////////////////////////////////////\n\tif (obj.constructor === google.maps.Polygon) {\n\n\t\trings = [];\n\n\t\tif (multiFlag === undefined) {\n\t\t\tmultiFlag = (function () {\n\t\t\t\tvar areas, i, l;\n\n\t\t\t\tl = obj.getPaths().length;\n\t\t\t\tif (l <= 1) { // Trivial; this is a single polygon\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tif (l === 2) {\n\t\t\t\t\t// If clockwise*clockwise or counter*counter, i.e.\n\t\t\t\t\t//  (-1)*(-1) or (1)*(1), then result would be positive\n\t\t\t\t\tif (sign(obj.getPaths().getAt(0)) * sign(obj.getPaths().getAt(1)) < 0) {\n\t\t\t\t\t\treturn false; // Most likely single polygon with 1 hole\n\t\t\t\t\t}\n\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\t// Must be longer than 3 polygons at this point...\n\t\t\t\tareas = obj.getPaths().getArray().map(function (k) {\n\t\t\t\t\treturn sign(k) / Math.abs(sign(k)); // Unit normalization (outputs 1 or -1)\n\t\t\t\t});\n\n\t\t\t\t// If two clockwise or two counter-clockwise rings are found\n\t\t\t\t//  (at different indices)...\n\t\t\t\tif (areas.indexOf(areas[0]) !== areas.lastIndexOf(areas[0])) {\n\t\t\t\t\tmultiFlag = true; // Flag for holes in one or more polygons\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\n\t\t\t}());\n\t\t}\n\n\t\tfor (i = 0; i < obj.getPaths().length; i += 1) { // For each polygon (ring)...\n\t\t\ttmp = obj.getPaths().getAt(i);\n\t\t\tverts = [];\n\n\t\t\tfor (j = 0; j < obj.getPaths().getAt(i).length; j += 1) { // For each vertex...\n\t\t\t\tverts.push({\n\t\t\t\t\tx: tmp.getAt(j).lng(),\n\t\t\t\t\ty: tmp.getAt(j).lat()\n\t\t\t\t});\n\n\t\t\t}\n\n\t\t\tif (!tmp.getAt(tmp.length - 1).equals(tmp.getAt(0))) {\n\t\t\t\tif (i % 2 !== 0) { // In inner rings, coordinates are reversed...\n\n\t\t\t\t\tverts.push({ // Add the first coordinate again for closure\n\t\t\t\t\t\tx: tmp.getAt(0).lng(),\n\t\t\t\t\t\ty: tmp.getAt(0).lat()\n\t\t\t\t\t});\n\t\t\t\t\tverts.reverse();\n\n\t\t\t\t} else {\n\t\t\t\t\tverts.push({ // Add the first coordinate again for closure\n\t\t\t\t\t\tx: tmp.getAt(0).lng(),\n\t\t\t\t\t\ty: tmp.getAt(0).lat()\n\t\t\t\t\t});\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif (obj.getPaths().length > 1 && i > 0) {\n\t\t\t\t// If this and the last ring have the same signs...\n\t\t\t\tif (sign(obj.getPaths().getAt(i)) > 0 && sign(obj.getPaths().getAt(i - 1)) > 0 ||\n\t\t\t\t\tsign(obj.getPaths().getAt(i)) < 0 && sign(obj.getPaths().getAt(i - 1)) < 0 /*&& !multiFlag*/ ) {\n\t\t\t\t\t// ...They must both be inner rings (or both be outer rings, in a multipolygon)\n\t\t\t\t\tverts = [verts]; // Wrap multipolygons once more (collection)\n\t\t\t\t} else {\n\t\t\t\t\tverts.reverse();\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t//TODO This makes mistakes when a second polygon has holes; it sees them all as individual polygons\n\t\t\t/*if (i % 2 !== 0) { // In inner rings, coordinates are reversed...\n\t\t\t\tverts.reverse();\n\t\t\t}*/\n\n\t\t\trings.push(verts);\n\t\t}\n\n\t\tresponse = {\n\t\t\ttype: (multiFlag) ? 'multipolygon' : 'polygon',\n\t\t\tcomponents: rings\n\t\t};\n\t\treturn response;\n\n\t}\n\n\t// google.maps.Circle //////////////////////////////////////////////////////\n\tif (obj.constructor === google.maps.Circle) {\n\t\tvar point = obj.getCenter();\n\t\tvar radius = obj.getRadius();\n\t\tverts = [];\n\t\tvar d2r = Math.PI / 180; // degrees to radians\n\t\tvar r2d = 180 / Math.PI; // radians to degrees\n\t\tradius = radius / 1609; // meters to miles\n\t\tvar earthsradius = 3963; // 3963 is the radius of the earth in miles\n\t\tvar num_seg = 32; // number of segments used to approximate a circle\n\t\tvar rlat = (radius / earthsradius) * r2d;\n\t\tvar rlng = rlat / Math.cos(point.lat() * d2r);\n\n\t\tfor (var n = 0; n <= num_seg; n++) {\n\t\t\tvar theta = Math.PI * (n / (num_seg / 2));\n\t\t\tlng = point.lng() + (rlng * Math.cos(theta)); // center a + radius x * cos(theta)\n\t\t\tlat = point.lat() + (rlat * Math.sin(theta)); // center b + radius y * sin(theta)\n\t\t\tverts.push({\n\t\t\t\tx: lng,\n\t\t\t\ty: lat\n\t\t\t});\n\t\t}\n\n\t\tresponse = {\n\t\t\ttype: 'polygon',\n\t\t\tcomponents: [verts]\n\t\t};\n\n\t\treturn response;\n\n\t}\n\n\t// google.maps.LatLngBounds ///////////////////////////////////////////////////\n\tif (obj.constructor === google.maps.LatLngBounds) {\n\n\t\ttmp = obj;\n\t\tverts = [];\n\t\tverts.push({ // NW corner\n\t\t\tx: tmp.getSouthWest().lng(),\n\t\t\ty: tmp.getNorthEast().lat()\n\t\t});\n\n\t\tverts.push({ // NE corner\n\t\t\tx: tmp.getNorthEast().lng(),\n\t\t\ty: tmp.getNorthEast().lat()\n\t\t});\n\n\t\tverts.push({ // SE corner\n\t\t\tx: tmp.getNorthEast().lng(),\n\t\t\ty: tmp.getSouthWest().lat()\n\t\t});\n\n\t\tverts.push({ // SW corner\n\t\t\tx: tmp.getSouthWest().lng(),\n\t\t\ty: tmp.getSouthWest().lat()\n\t\t});\n\n\t\tverts.push({ // NW corner (again, for closure)\n\t\t\tx: tmp.getSouthWest().lng(),\n\t\t\ty: tmp.getNorthEast().lat()\n\t\t});\n\n\t\tresponse = {\n\t\t\ttype: 'polygon',\n\t\t\tisRectangle: true,\n\t\t\tcomponents: [verts]\n\t\t};\n\n\t\treturn response;\n\n\t}\n\n\t// google.maps.Rectangle ///////////////////////////////////////////////////\n\tif (obj.constructor === google.maps.Rectangle) {\n\n\t\ttmp = obj.getBounds();\n\t\tverts = [];\n\t\tverts.push({ // NW corner\n\t\t\tx: tmp.getSouthWest().lng(),\n\t\t\ty: tmp.getNorthEast().lat()\n\t\t});\n\n\t\tverts.push({ // NE corner\n\t\t\tx: tmp.getNorthEast().lng(),\n\t\t\ty: tmp.getNorthEast().lat()\n\t\t});\n\n\t\tverts.push({ // SE corner\n\t\t\tx: tmp.getNorthEast().lng(),\n\t\t\ty: tmp.getSouthWest().lat()\n\t\t});\n\n\t\tverts.push({ // SW corner\n\t\t\tx: tmp.getSouthWest().lng(),\n\t\t\ty: tmp.getSouthWest().lat()\n\t\t});\n\n\t\tverts.push({ // NW corner (again, for closure)\n\t\t\tx: tmp.getSouthWest().lng(),\n\t\t\ty: tmp.getNorthEast().lat()\n\t\t});\n\n\t\tresponse = {\n\t\t\ttype: 'polygon',\n\t\t\tisRectangle: true,\n\t\t\tcomponents: [verts]\n\t\t};\n\n\t\treturn response;\n\n\t}\n\n\t// google.maps.Data Geometry Types /////////////////////////////////////////////////////\n\n\t// google.maps.Data.Feature /////////////////////////////////////////////////////\n\tif (obj.constructor === google.maps.Data.Feature) {\n\t\treturn this.deconstruct.call(this, obj.getGeometry());\n\t}\n\n\t// google.maps.Data.Point /////////////////////////////////////////////////////\n\tif (obj.constructor === google.maps.Data.Point) {\n\t\t//console.log('It is a google.maps.Data.Point');\n\t\tresponse = {\n\t\t\ttype: 'point',\n\t\t\tcomponents: [{\n\t\t\t\tx: obj.get().lng(),\n\t\t\t\ty: obj.get().lat()\n\t\t\t}]\n\t\t};\n\t\treturn response;\n\t}\n\n\t// google.maps.Data.LineString /////////////////////////////////////////////////////\n\tif (obj.constructor === google.maps.Data.LineString) {\n\t\tverts = [];\n\t\t//console.log('It is a google.maps.Data.LineString');\n\t\tfor (i = 0; i < obj.getLength(); i += 1) {\n\t\t\tvertex = obj.getAt(i);\n\t\t\tverts.push({\n\t\t\t\tx: vertex.lng(),\n\t\t\t\ty: vertex.lat()\n\t\t\t});\n\t\t}\n\t\tresponse = {\n\t\t\ttype: 'linestring',\n\t\t\tcomponents: verts\n\t\t};\n\t\treturn response;\n\t}\n\n\t// google.maps.Data.Polygon /////////////////////////////////////////////////////\n\tif (obj.constructor === google.maps.Data.Polygon) {\n\t\tvar rings = [];\n\t\t//console.log('It is a google.maps.Data.Polygon');\n\t\tfor (i = 0; i < obj.getLength(); i += 1) { // For each ring...\n\t\t\tring = obj.getAt(i);\n\t\t\tvar verts = [];\n\t\t\tfor (j = 0; j < ring.getLength(); j += 1) { // For each vertex...\n\t\t\t\tvertex = ring.getAt(j);\n\t\t\t\tverts.push({\n\t\t\t\t\tx: vertex.lng(),\n\t\t\t\t\ty: vertex.lat()\n\t\t\t\t});\n\t\t\t}\n\t\t\tverts.push({\n\t\t\t\tx: ring.getAt(0).lng(),\n\t\t\t\ty: ring.getAt(0).lat()\n\t\t\t});\n\n\t\t\trings.push(verts);\n\t\t}\n\t\tresponse = {\n\t\t\ttype: 'polygon',\n\t\t\tcomponents: rings\n\t\t};\n\n\t\treturn response;\n\t}\n\n\t// google.maps.Data.MultiPoint /////////////////////////////////////////////////////\n\tif (obj.constructor === google.maps.Data.MultiPoint) {\n\t\tverts = [];\n\t\tfor (i = 0; i < obj.getLength(); i += 1) {\n\t\t\tvertex = obj.getAt(i);\n\t\t\tverts.push([{\n\t\t\t\tx: vertex.lng(),\n\t\t\t\ty: vertex.lat()\n\t\t\t}]);\n\t\t}\n\t\tresponse = {\n\t\t\ttype: 'multipoint',\n\t\t\tcomponents: verts\n\t\t};\n\t\treturn response;\n\t}\n\n\t// google.maps.Data.MultiLineString /////////////////////////////////////////////////////\n\tif (obj.constructor === google.maps.Data.MultiLineString) {\n\t\tlinestrings = []\n\t\tfor (i = 0; i < obj.getLength(); i += 1) {\n\t\t\tverts = [];\n\t\t\tvar linestring = obj.getAt(i);\n\t\t\tfor (j = 0; j < linestring.getLength(); j += 1) {\n\t\t\t\tvertex = linestring.getAt(j);\n\t\t\t\tverts.push({\n\t\t\t\t\tx: vertex.lng(),\n\t\t\t\t\ty: vertex.lat()\n\t\t\t\t});\n\t\t\t}\n\t\t\tlinestrings.push(verts);\n\t\t}\n\t\tresponse = {\n\t\t\ttype: 'multilinestring',\n\t\t\tcomponents: linestrings\n\t\t};\n\t\treturn response;\n\t}\n\n\t// google.maps.Data.MultiPolygon /////////////////////////////////////////////////////\n\tif (obj.constructor === google.maps.Data.MultiPolygon) {\n\n\t\tvar polygons = [];\n\n\t\t//console.log('It is a google.maps.Data.MultiPolygon');\n\t\tfor (k = 0; k < obj.getLength(); k += 1) { // For each multipolygon\n\t\t\tvar polygon = obj.getAt(k);\n\t\t\tvar rings = [];\n\t\t\tfor (i = 0; i < polygon.getLength(); i += 1) { // For each ring...\n\t\t\t\tring = polygon.getAt(i);\n\t\t\t\tvar verts = [];\n\t\t\t\tfor (j = 0; j < ring.getLength(); j += 1) { // For each vertex...\n\t\t\t\t\tvertex = ring.getAt(j);\n\t\t\t\t\tverts.push({\n\t\t\t\t\t\tx: vertex.lng(),\n\t\t\t\t\t\ty: vertex.lat()\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tverts.push({\n\t\t\t\t\tx: ring.getAt(0).lng(),\n\t\t\t\t\ty: ring.getAt(0).lat()\n\t\t\t\t});\n\n\t\t\t\trings.push(verts);\n\t\t\t}\n\t\t\tpolygons.push(rings);\n\t\t}\n\n\t\tresponse = {\n\t\t\ttype: 'multipolygon',\n\t\t\tcomponents: polygons\n\t\t};\n\t\treturn response;\n\t}\n\n\t// google.maps.Data.GeometryCollection /////////////////////////////////////////////////////\n\tif (obj.constructor === google.maps.Data.GeometryCollection) {\n\n\t\tvar objects = [];\n\t\tfor (k = 0; k < obj.getLength(); k += 1) { // For each multipolygon\n\t\t\tvar object = obj.getAt(k);\n\t\t\tobjects.push(this.deconstruct.call(this, object));\n\t\t}\n\t\t//console.log('It is a google.maps.Data.GeometryCollection', objects);\n\t\tresponse = {\n\t\t\ttype: 'geometrycollection',\n\t\t\tcomponents: objects\n\t\t};\n\t\treturn response;\n\t}\n\n\t// Array ///////////////////////////////////////////////////////////////////\n\tif (Wkt.isArray(obj)) {\n\t\tfeatures = [];\n\n\t\tfor (i = 0; i < obj.length; i += 1) {\n\t\t\tfeatures.push(this.deconstruct.call(this, obj[i], true));\n\t\t}\n\n\t\tresponse = {\n\n\t\t\ttype: (function () {\n\t\t\t\tvar k, type = obj[0].constructor;\n\n\t\t\t\tfor (k = 0; k < obj.length; k += 1) {\n\t\t\t\t\t// Check that all items have the same constructor as the first item\n\t\t\t\t\tif (obj[k].constructor !== type) {\n\t\t\t\t\t\t// If they don't, type is heterogeneous geometry collection\n\t\t\t\t\t\treturn 'geometrycollection';\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tswitch (type) {\n\t\t\t\tcase google.maps.Marker:\n\t\t\t\t\treturn 'multipoint';\n\t\t\t\tcase google.maps.Polyline:\n\t\t\t\t\treturn 'multilinestring';\n\t\t\t\tcase google.maps.Polygon:\n\t\t\t\t\treturn 'multipolygon';\n\t\t\t\tdefault:\n\t\t\t\t\treturn 'geometrycollection';\n\t\t\t\t}\n\n\t\t\t}()),\n\t\t\tcomponents: (function () {\n\t\t\t\t// Pluck the components from each Wkt\n\t\t\t\tvar i, comps;\n\n\t\t\t\tcomps = [];\n\t\t\t\tfor (i = 0; i < features.length; i += 1) {\n\t\t\t\t\tif (features[i].components) {\n\t\t\t\t\t\tcomps.push(features[i].components);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\tcomps: comps\n\t\t\t\t};\n\t\t\t}())\n\n\t\t};\n\t\tresponse.components = response.components.comps;\n\t\treturn response;\n\n\t}\n\n\tconsole.log('The passed object does not have any recognizable properties.');\n\n};\n\nexport {\n\tWkt\n};\nexport function Wicket() {\n\treturn new Wkt.Wkt();\n};\n\nexport function WKT2Object(WKT) {\n\tvar wkt = new Wkt.Wkt();\n\ttry {\n\t\twkt.read(WKT);\n\t} catch (e) {\n\t\tconsole.zlog('Imposible leer geometría', WKT);\n\t\treturn false;\n\t}\n\ttry {\n\t\tvar obj = wkt.toObject({\n\t\t\treverseInnerPolygons: true\n\t\t}); // Make an object\n\t\tobj.wkt = wkt;\n\t\treturn obj;\n\t} catch (e) {\n\t\tconsole.warn('Imposible exportar geometría', WKT);\n\t\treturn false;\n\t}\n\n};\n","import $ from 'jquery';\n\nvar jqContainerLoading = null,\n\tremoveEvent = null;\nvar preloaderFN = function (id_selector) {\n\tvar preloader = $('<div class=\"preloader\">'),\n\t\tloading = $('<div class=\"preloader-wrapper big active\" id=\"loading\">'),\n\t\tspinnerlayer = $('<div class=\"spinner-layer spinner-blue-only\">')\n\t\t.append('<div class=\"circle-clipper left\"><div class=\"circle\"></div></div>')\n\t\t.append('<div class=\"gap-patch\"><div class=\"circle\"></div></div>')\n\t\t.append('<div class=\"circle-clipper right\"><div class=\"circle\"></div>')\n\t\t.appendTo(loading);\n\n\tpreloader.append(loading).append('<div id=\"preload_text\">');\n\tpreloader.attr('id', id_selector.replace('#', ''));\n\treturn preloader;\n};\n/**\n * Muestra un div con una animación de \"cargando\"\n * @param  {integer} timeout   segundos de timeout o un flag (0,1,2)\n * @param  {string} message mensaje a desplegar\n * @param  {string} container  selector CSS del contenedor\n * @return {void}\n */\nexport function loadingcircle(timeout, message, container) {\n\n\tvar theGlobalvars = window.globalvars || {};\n\ttheGlobalvars.containerIds = theGlobalvars.containerIds || {};\n\n\tvar loadingcircleId = theGlobalvars.containerIds.loadingcircleId || '#preloader';\n\tjqContainerLoading = jqContainerLoading || $(loadingcircleId);\n\n\tmessage = message || '';\n\n\tif (jqContainerLoading.length === 0) {\n\t\tjqContainerLoading = preloaderFN(loadingcircleId);\n\t}\n\n\tvar removeContainer = function removeContainer(delay) {\n\n\t\treturn window.setTimeout(function () {\n\t\t\tjqContainerLoading.addClass('animated fadeOut');\n\t\t\twindow.setTimeout(function () {\n\t\t\t\tjqContainerLoading.detach();\n\t\t\t\tvar garbagedivs = $('body').find(loadingcircleId);\n\t\t\t\tgarbagedivs.detach();\n\t\t\t}, 1000);\n\t\t}, delay);\n\t};\n\tif (removeEvent) {\n\t\t//console.log('clearTimeout', removeEvent);\n\t\twindow.clearTimeout(removeEvent);\n\t} else {\n\t\t//console.log('no remove event detected');\n\t}\n\n\tjqContainerLoading.attr('class', 'preloader');\n\n\tif (timeout === 0) {\n\t\tremoveEvent = removeContainer(500);\n\t} else {\n\n\t\tif (container) {\n\t\t\tjqContainerLoading.addClass('preloader_padding_container');\n\t\t} else {\n\t\t\tjqContainerLoading.addClass('preloader_padding');\n\t\t\tcontainer = 'body';\n\t\t}\n\t\t$(container).append(jqContainerLoading);\n\t\t$('#preload_text').html(message);\n\n\t\tif (timeout >= 2) {\n\t\t\ttimeout = Math.max(timeout, 1000);\n\t\t\tremoveEvent = removeContainer(timeout);\n\t\t}\n\t}\n\treturn jqContainerLoading;\n\n}\n","import $ from 'jquery';\n\nexport {\n\tCollectionUtils\n}\nfrom './collection_helper.js';\n\nimport {\n\tMarkerFactory as ButtonFactory\n} from 'ig_markerfactory';\n\nimport {\n\tWkt,\n\tWicket,\n\tWKT2Object\n}\nfrom './wicket_helper.js';\nimport {\n\tloadingcircle\n}\nfrom './loadingcircle.js';\nimport {\n\tcolorset\n}\nfrom './colorset.js';\n\nvar root = (typeof self == 'object' && self.self === self && self) ||\n\t(typeof global == 'object' && global.global === global && global);\n\n/**\n * Sets the modal class.\n *\n * @param      {string}    cls      The cls\n * @param      {<type>}    options  The options\n * @return     {Function}  { description_of_the_return_value }\n */\nfunction setModalClass(cls, options) {\n\n\toptions = options || {\n\t\tfooter: true\n\t};\n\tvar modal = $('#dialogomodal'),\n\t\tmodal_body = $('.modal-body'),\n\t\tmodal_footer = $('.modal-footer');\n\n\tmodal.attr('style', '');\n\tmodal.attr('class', cls + ' modal');\n\tmodal_body.attr('style', '');\n\n\tif (options.footer === false) {\n\t\tmodal_footer.addClass('invisible');\n\t} else {\n\t\tmodal_footer.removeClass('invisible');\n\t}\n\n\treturn modal;\n}\n\n/**\n * Determines if array.\n *\n * @param      {<type>}   obj     The object\n * @return     {boolean}  True if array, False otherwise.\n */\nfunction isArray(obj) {\n\treturn Object.prototype.toString.call(obj) === \"[object Array]\";\n}\n\nfunction spaceString(str) {\n\tvar cleanstr = String(str).replace(/[_]/g, ' ');\n\treturn cleanstr;\n}\n\n/**\n * Method for cleaning special chars\n * @param  {String} str   source string\n * @param  {Boolean} strict if true, will replace even underscores\n * @return {String}        Clean string\n */\nfunction cleanString(str, strict) {\n\tvar cleanstr = String(str).replace(/[,.\\-& ]/g, '_');\n\tif (strict) {\n\t\tcleanstr = cleanstr.replace(/[_-]/g, '').toLowerCase();\n\t}\n\tcleanstr = cleanstr.replace(/[ÀÁÂÃÄÅ]/g, \"A\");\n\tcleanstr = cleanstr.replace(/[àáâãäå]/g, \"a\");\n\tcleanstr = cleanstr.replace(/[ÈÉÊË]/g, \"E\");\n\tcleanstr = cleanstr.replace(/[é]/g, \"e\");\n\tcleanstr = cleanstr.replace(/[Í]/g, \"I\");\n\tcleanstr = cleanstr.replace(/[í]/g, \"i\");\n\tcleanstr = cleanstr.replace(/[Ó]/g, \"O\");\n\tcleanstr = cleanstr.replace(/(ó|ó)/g, \"o\");\n\tcleanstr = cleanstr.replace(/[Ú]/g, \"U\");\n\tcleanstr = cleanstr.replace(/[ú]/g, \"u\");\n\tcleanstr = cleanstr.replace(/[Ñ]/g, \"N\");\n\tcleanstr = cleanstr.replace(/[ñ]/g, \"n\");\n\tcleanstr = cleanstr.replace(/(__)+/g, '_');\n\n\tcleanstr = cleanstr.replace(/\\'/g, '');\n\treturn cleanstr;\n}\n\n/**\n * { function_description }\n *\n * @param      {number}  limit   The limit\n * @return     {string}  { description_of_the_return_value }\n */\nfunction randomname(limit) {\n\tlimit = limit || 5;\n\tvar text = \"\";\n\tvar possible = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n\n\tfor (var i = 0; i < limit; i++) {\n\t\ttext += possible.charAt(Math.floor(Math.random() * possible.length));\n\t}\n\n\treturn text;\n}\n/**\n * Gets the cookie.\n *\n * @param      {string}    name    The name\n * @return     {Function}  The cookie.\n */\nfunction getCookie(name) {\n\tvar match = root.document.cookie.match(new RegExp(name + '=([^;]+)'));\n\tif (match) {\n\t\treturn match[1];\n\t}\n}\nexport {\n\tButtonFactory,\n\tWkt,\n\tWicket,\n\tWKT2Object,\n\tloadingcircle,\n\tcolorset,\n\tsetModalClass,\n\tisArray,\n\tspaceString,\n\tcleanString,\n\trandomname,\n\tgetCookie\n};\nexport default {\n\tButtonFactory: ButtonFactory,\n\tWkt: Wkt,\n\tWicket: Wicket,\n\tWKT2Object: WKT2Object,\n\tloadingcircle: loadingcircle,\n\tcolorset: colorset,\n\tsetModalClass: setModalClass,\n\tisArray: isArray,\n\tspaceString: spaceString,\n\tcleanString: cleanString,\n\trandomname: randomname,\n\tgetCookie: getCookie\n};\n","import $ from 'jquery';\nimport _ from 'underscore';\n\n/**\n * Campos que no deben tomarse en cuenta a la hora de reconocer las características de un dataset\n * @type {Array}\n */\nvar blacklistedfields = [\n\t'id',\n\t'strokeOpacity',\n\t'clickable',\n\t'strokeWeight',\n\t'fillOpacity',\n\t'shape',\n\t'The_Radio_google',\n\t'the_geom_google',\n\t'the_radio_google',\n\t'geocoding_address',\n\t'gm_accessors_',\n\t'gm_bindings_',\n\t'icon',\n\t'position',\n\t'lat_google',\n\t'lon_google',\n\t'weight',\n\t'id_dataset',\n\t'id_instagis',\n\t'location',\n\t'point',\n\t'center',\n\t'value'\n];\n\nvar CollectionUtils = function (DataSet) {\n\n\tthis.DataSet = DataSet;\n\tthis.DataSet.type = this.DataSet.type || this.DataSet.category;\n\treturn this;\n};\n\nCollectionUtils.prototype.addGeometricBoundaries = function () {\n\tvar element = this.DataSet,\n\t\thtml = '<h5 for=\"boundaries_' + element.domid + '\">Filter By Boundaries</h5>';\n\n\thtml += '<div class=\"span11  boundariescontainer\" data-theproperty=\"boundaries\">';\n\n\thtml += '<select id=\"boundaries_' + element.domid + '\" class=\"boundaries small span11\">';\n\thtml += '<option value=\"0\">Any place</option>';\n\thtml += '<option value=\"1\">Within Visible Zone</option>';\n\n\tglobalvars.mapModel.Polygons.each(function (Polygon) {\n\t\thtml += _.template('<option value=\"{{id}}\">Within {{name}}</option>')(Polygon.attributes);\n\t});\n\n\thtml += '</select>';\n\thtml += '</div>';\n\treturn html;\n};\n\n/**\n * Recorre una colección y devuelve sus campos\n * @param  {gmaps.FeatureCollection | gmaps.MVCArray | gmaps.Data} [DataSet] la colección a recorrer\n * si no se especifica, usará el DataSet asignado al instanciar.\n * @return {Object}    Los campos del Dataset\n */\nCollectionUtils.prototype.findFields = function (DataSet, callback) {\n\tvar _this = this;\n\tvar fields = {},\n\t\telemento;\n\tif (!DataSet) {\n\t\tDataSet = _this.DataSet;\n\t}\n\n\tif (!DataSet) {\n\t\treturn fields;\n\t}\n\treturn new Promise(function (resolve, reject) {\n\n\t\tif (DataSet.fieldsFound !== true || DataSet.fields === undefined || _.isEmpty(DataSet.fields)) {\n\n\t\t\t//console.info('getting fields for FeatureCollection');\n\n\t\t\telemento = _.uniq(_.flatten(_.map(DataSet.getArray(), function (item) {\n\t\t\t\tvar properties = item.getProperties ? item.getProperties() : item.properties;\n\t\t\t\tvar keys = _.keys(properties);\n\t\t\t\treturn keys;\n\t\t\t})), false);\n\n\t\t\t//console.zlog('field Keys', elemento);\n\n\t\t\tvar finalkeys = _.chain(elemento).reduce(function (memo, propiedad) {\n\t\t\t\tmemo[propiedad] = {\n\t\t\t\t\tlabel: propiedad,\n\t\t\t\t\tvalue: propiedad\n\t\t\t\t};\n\t\t\t\treturn memo;\n\t\t\t}, {}).omit(blacklistedfields).value();\n\n\t\t\t//DataSet.fields = finalkeys;\n\t\t\t/*_.each(finalkeys, function (attrs, fieldname) {\n\t\t\t\tconsole.zlog('fieldname', fieldname, attrs);\n\t\t\t\tconsole.zlog('Before DataSet.fields[', fieldname, ']', DataSet.fields, DataSet.fields[fieldname]);\n\t\t\t\tconsole.zlog('After DataSet.fields[', fieldname, ']', DataSet.fields, DataSet.fields[fieldname]);\n\t\t\t});*/\n\n\t\t\tDataSet.fields = finalkeys;\n\n\t\t\t//console.zlog('finalkeys Object', finalkeys, 'Datasetfields', DataSet.fields);\n\n\t\t\tDataSet.fieldsFound = true;\n\t\t}\n\n\t\tif (DataSet.Model && DataSet.Model.columns) {\n\t\t\tDataSet.Model.columns.each(function (column) {\n\t\t\t\tDataSet.fields[column.get('nombre_fisico')] = {\n\t\t\t\t\tvalue: column.get('nombre_fisico'),\n\t\t\t\t\tlabel: column.get('alias')\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\n\t\tif (callback) {\n\t\t\tcallback(null, DataSet.fields);\n\t\t}\n\t\tresolve(DataSet.fields);\n\t});\n\n};\n\n/**\n * Synchronous: Recorre una colección y devuelve sus campos no numéricos\n * @param  {gmaps.FeatureCollection | gmaps.MVCArray | gmaps.Data} [DataSet] la colección a recorrer\n * si no se especifica, usará el DataSet asignado al instanciar.\n * @return {Object}    Los campos no numéricos del Dataset\n */\nCollectionUtils.prototype.findQualityFields = function (DataSet) {\n\tvar _this = this;\n\tvar qualityfilters = {};\n\tif (!DataSet) {\n\t\tDataSet = _this.DataSet;\n\t}\n\tif (!DataSet.getArray || DataSet.getArray().length === 0) {\n\t\tconsole.zwarn('empty dataset');\n\t\treturn qualityfilters;\n\t}\n\n\t_.each(DataSet.fields, function (propiedadObj, propiedad) {\n\n\t\t//console.zlog(propiedadObj, propiedad); return;\n\t\tif (propiedadObj && propiedadObj.value) {\n\t\t\tvar arraypropiedad = _.map(DataSet.getArray(), function (element) {\n\t\t\t\treturn element.get ? element.get(propiedadObj.value) : element[propiedadObj.value]; // || element['properties']['gse_preponderante'];\n\t\t\t});\n\n\t\t\tif (DataSet.backend_grouped) {\n\t\t\t\tarraypropiedad = _.flatten(arraypropiedad);\n\t\t\t}\n\t\t\tvar registros_numericos = _.filter(arraypropiedad, Number),\n\t\t\t\tregistros_totales = _.compact(arraypropiedad);\n\n\t\t\t// si menos de la mitad de los registros son numéricos\n\t\t\tif (registros_numericos.length < registros_totales.length / 2) {\n\t\t\t\t/*console.zdebug('QUALITYFILTERS ES NO NUMERICO', {\n\t\t\t\t\t\tpropiedad: propiedadObj.value,\n\t\t\t\t\t\tregistros_numericos: registros_numericos,\n\t\t\t\t\t\tregistros_totales: registros_totales,\n\t\t\t\t\t\t//arraypropiedad: arraypropiedad,\n\t\t\t\t\t});*/\n\n\t\t\t\tvar data = _.map(_.groupBy(arraypropiedad), function (c, d) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tname: d,\n\t\t\t\t\t\tcount: c.length\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t\tqualityfilters[propiedad] = {\n\t\t\t\t\tlabel: propiedadObj.label ? propiedadObj.label : propiedad,\n\t\t\t\t\tvalue: propiedadObj.value ? propiedadObj.value : propiedad,\n\t\t\t\t\tdata: data\n\t\t\t\t};\n\n\t\t\t} else {\n\t\t\t\t//delete(DataSet.qualityfilters[propiedad]);\n\t\t\t\t/*console.zdebug('QUALITYFILTERS ES NUMERICO', {\n\t\t\t\t\t\tpropiedad: propiedadObj.value,\n\t\t\t\t\t\tregistros_numericos: registros_numericos,\n\t\t\t\t\t\tregistros_totales: registros_totales,\n\t\t\t\t\t\t//arraypropiedad: arraypropiedad,\n\t\t\t\t\t});*/\n\n\t\t\t}\n\t\t}\n\t});\n\tDataSet.qualityfilters = qualityfilters;\n\t//console.zdebug('DataSet qualityfilters are', qualityfilters);\n\treturn qualityfilters;\n};\n\n/**\n * Synchronous:  Recorre una colección y devuelve sus campos numéricos\n * @param  {gmaps.FeatureCollection | gmaps.MVCArray | gmaps.Data} [DataSet] la colección a recorrer\n * si no se especifica, usará el DataSet asignado al instanciar.\n * @return {Object}    Los campos numéricos del Dataset\n */\nCollectionUtils.prototype.findQuantityFields = function (DataSet) {\n\tvar _this = this,\n\t\tquantityfilters = {\n\t\t\tcount: {\n\t\t\t\tvalue: 'count',\n\t\t\t\tlabel: 'count',\n\t\t\t\tmin: 1,\n\t\t\t\tmax: 1\n\t\t\t}\n\t\t};\n\tif (!DataSet) {\n\t\tDataSet = _this.DataSet;\n\t}\n\n\tif (!DataSet.getArray || !DataSet.getArray() || DataSet.getArray().length === 0) {\n\t\t//console.zdebug('empty dataset');\n\t\treturn quantityfilters;\n\t}\n\n\t_.each(DataSet.fields, function (propiedadObj, propiedad) {\n\t\tif (propiedadObj && propiedadObj.value !== null && propiedadObj.value !== undefined) {\n\t\t\tvar arraypropiedad = _.map(DataSet.getArray(), function (element) {\n\t\t\t\tif (element.get) {\n\t\t\t\t\treturn element.get(propiedadObj.value);\n\t\t\t\t} else if (element.properties) {\n\t\t\t\t\treturn element.properties[propiedadObj.value];\n\t\t\t\t} else {\n\t\t\t\t\treturn element[propiedadObj.value];\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (DataSet.backend_grouped) {\n\t\t\t\tarraypropiedad = _.flatten(arraypropiedad);\n\t\t\t}\n\n\t\t\tvar registros_numericos = _.filter(arraypropiedad, Number),\n\t\t\t\tregistros_totales = _.compact(arraypropiedad);\n\n\t\t\t// si al menos un quinto de los registros son numéricos para esta propiedad\n\t\t\tif (registros_numericos.length > registros_totales.length / 5) {\n\n\t\t\t\t/*console.zdebug('QUANTITYFILTERS: NUMERICO', {\n\t\t\t\t\t\tpropiedad: propiedadObj.value,\n\t\t\t\t\t\tregistros_numericos: registros_numericos,\n\t\t\t\t\t\tregistros_totales: registros_totales,\n\t\t\t\t\t\t//arraypropiedad: arraypropiedad,\n\t\t\t\t\t});*/\n\n\t\t\t\tvar localmin = Number(_.min(_.filter(arraypropiedad, Number))),\n\t\t\t\t\tlocalmax = Number(_.max(_.filter(arraypropiedad, Number)));\n\n\t\t\t\tquantityfilters[propiedad] = {\n\t\t\t\t\tmin: Math.min(localmin, localmax),\n\t\t\t\t\tmax: Math.max(localmin, localmax),\n\t\t\t\t\tlabel: propiedadObj.label ? propiedadObj.label : propiedad,\n\t\t\t\t\tvalue: propiedadObj.value ? propiedadObj.value : propiedad\n\t\t\t\t};\n\n\t\t\t} else {\n\t\t\t\t/*console.zdebug('QUANTITYFILTERS: NO NUMERICO', {\n\t\t\t\t\t\tpropiedad: propiedadObj.value,\n\t\t\t\t\t\tregistros_numericos: registros_numericos,\n\t\t\t\t\t\tregistros_totales: registros_totales,\n\t\t\t\t\t\t//arraypropiedad: arraypropiedad,\n\t\t\t\t\t});*/\n\t\t\t\t//delete(DataSet.quantityfilters[propiedad]);\n\t\t\t}\n\n\t\t} else {\n\t\t\t//console.zlog('Not value', propiedad, propiedadObj);\n\t\t}\n\t});\n\n\tDataSet.quantityfilters = quantityfilters;\n\t//console.zdebug('DataSet quantityfilters are', quantityfilters);\n\n\treturn quantityfilters;\n};\n\n/**\n * Asynchronous: traverses the collection discriminating each field as quantityfilter or qualityfilder\n * @return {Promise}    A promise that resolves as a hash {qualityfilters,quantityfilters}\n */\nCollectionUtils.prototype.discriminateFields = function () {\n\tvar _this = this,\n\t\tqualityfilters = {},\n\t\tquantityfilters = {\n\t\t\tcount: {\n\t\t\t\tvalue: 'count',\n\t\t\t\tlabel: 'count',\n\t\t\t\tmin: 1,\n\t\t\t\tmax: 1\n\t\t\t}\n\t\t},\n\t\tDataSet = _this.DataSet;\n\n\tif (!DataSet.getArray || DataSet.getArray().length === 0) {\n\t\tconsole.zwarn('empty dataset');\n\t\treturn Promise.resolve({\n\t\t\tquantityfilters: quantityfilters,\n\t\t\tqualityfilters: qualityfilters\n\t\t});\n\t}\n\treturn new Promise(function (resolve, reject) {\n\n\t\t_.each(DataSet.fields, function (propiedadObj, propiedad) {\n\t\t\tif (propiedadObj && propiedadObj.value !== null && propiedadObj.value !== undefined) {\n\t\t\t\tvar arraypropiedad = _.map(DataSet.getArray(), function (element) {\n\t\t\t\t\tif (element.get) {\n\t\t\t\t\t\treturn element.get(propiedadObj.value);\n\t\t\t\t\t} else if (element.properties) {\n\t\t\t\t\t\treturn element.properties[propiedadObj.value];\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn element[propiedadObj.value];\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif (DataSet.backend_grouped) {\n\t\t\t\t\tarraypropiedad = _.flatten(arraypropiedad);\n\t\t\t\t}\n\n\t\t\t\tvar registros_numericos = _.filter(arraypropiedad, Number),\n\t\t\t\t\tregistros_totales = _.compact(arraypropiedad);\n\n\t\t\t\t// si al menos un quinto de los registros son numéricos para esta propiedad\n\t\t\t\tif (registros_numericos.length > registros_totales.length / 5) {\n\n\t\t\t\t\tvar localmin = Number(_.min(_.filter(arraypropiedad, Number))),\n\t\t\t\t\t\tlocalmax = Number(_.max(_.filter(arraypropiedad, Number)));\n\n\t\t\t\t\tquantityfilters[propiedad] = {\n\t\t\t\t\t\tmin: Math.min(localmin, localmax),\n\t\t\t\t\t\tmax: Math.max(localmin, localmax),\n\t\t\t\t\t\tlabel: propiedadObj.label ? propiedadObj.label : propiedad,\n\t\t\t\t\t\tvalue: propiedadObj.value ? propiedadObj.value : propiedad\n\t\t\t\t\t};\n\n\t\t\t\t} else {\n\t\t\t\t\tvar data = _.map(_.groupBy(arraypropiedad), function (c, d) {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tname: d,\n\t\t\t\t\t\t\tcount: c.length\n\t\t\t\t\t\t};\n\t\t\t\t\t});\n\t\t\t\t\tqualityfilters[propiedad] = {\n\t\t\t\t\t\tlabel: propiedadObj.label ? propiedadObj.label : propiedad,\n\t\t\t\t\t\tvalue: propiedadObj.value ? propiedadObj.value : propiedad,\n\t\t\t\t\t\tdata: data\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t}\n\t\t});\n\n\t\tDataSet.quantityfilters = quantityfilters;\n\t\tDataSet.qualityfilters = qualityfilters;\n\t\t//console.zdebug('DataSet qualityfilters are', qualityfilters);\n\t\tresolve({\n\t\t\tquantityfilters: quantityfilters,\n\t\t\tqualityfilters: qualityfilters\n\t\t});\n\n\t});\n};\n\nexport {\n\tCollectionUtils\n};\n","export var colorset = {\n\t\"polygon_mycolor\": {\n\t\t\"rows\": 4,\n\t\t\"cols\": 9,\n\t\t\"subThemeColors\": [\"f2f2f2\", \"ddd9c3\", \"c6d9f0\", \"dbe5f1\", \"f2dcdb\", \"ebf1dd\", \"e5e0ec\", \"dbeef3\", \"fdeada\", \"d8d8d8\", \"c4bd97\", \"8db3e2\", \"b8cce4\", \"e5b9b7\", \"d7e3bc\",\n\t\t\t\"ccc1d9\",\n\t\t\t\"b7dde8\", \"fbd5b5\", \"bfbfbf\", \"938953\", \"548dd4\", \"95b3d7\", \"d99694\", \"c3d69b\", \"b2a2c7\", \"92cddc\", \"fac08f\", \"a5a5a5\", \"494429\", \"17365d\", \"366092\", \"953734\", \"76923c\",\n\t\t\t\"5f497a\", \"31859b\", \"e36c09\", \"7f7f7f\", \"1d1b10\", \"0f243e\", \"244061\", \"632423\", \"4f6128\", \"3f3151\", \"205867\", \"974806\"\n\t\t]\n\t},\n\t\"marker_mycolor\": {\n\t\t\"rows\": 4,\n\t\t\"cols\": 8,\n\t\t\"subThemeColors\": [\"000099\", \"990099\", \"990000\", \"FF3300\", \"333300\", \"006600\", \"006666\", \"666666\", \"0000CC\", \"CC00CC\", \"CC0000\", \"FF6600\", \"666600\", \"66BB66\", \"009999\",\n\t\t\t\"999999\",\n\t\t\t\"0000FF\", \"AA88CC\", \"FF0000\", \"FF9900\", \"CCCC00\", \"00CC00\", \"00CCCC\", \"CCCCCC\", \"5599CC\", \"CCBBDD\", \"FFAAAA\", \"FFCC99\", \"FFFF00\", \"AAEEAA\", \"00FFFF\", \"CCDDEE\"\n\t\t]\n\t},\n\t\"gradient_mycolor\": {\n\t\t\"rows\": 6,\n\t\t\"cols\": 8,\n\t\t\"subThemeColors\": [\n\t\t\t[\"brown\", [\n\t\t\t\t\"hsla(50,48%,41%,0.1)\",\n\t\t\t\t\"hsla(64,60%,82%,0.7)\",\n\t\t\t\t\"hsla(62,60%,80%,0.8)\",\n\t\t\t\t\"hsla(60,60%,78%,0.9)\",\n\t\t\t\t\"hsl(58,60%,76%)\",\n\t\t\t\t\"hsl(56,60%,74%)\",\n\t\t\t\t\"hsl(54,60%,72%)\",\n\t\t\t\t\"hsl(52,60%,70%)\",\n\t\t\t\t\"hsl(49,60%,68%)\",\n\t\t\t\t\"hsl(46,60%,66%)\",\n\t\t\t\t\"hsl(43,60%,64%)\",\n\t\t\t\t\"hsl(40,60%,62%)\",\n\t\t\t\t\"hsl(37,60%,60%)\",\n\t\t\t\t\"hsl(34,60%,58%)\",\n\t\t\t\t\"hsl(31,61%,56%)\",\n\t\t\t\t\"hsl(28,62%,54%)\",\n\t\t\t\t\"hsl(25,63%,52%)\",\n\t\t\t\t\"hsl(22,64%,50%)\",\n\t\t\t\t\"hsl(19,65%,48%)\",\n\t\t\t\t\"hsl(16,66%,46%)\",\n\t\t\t\t\"hsl(13,67%,44%)\",\n\t\t\t\t\"hsl(10,68%,42%)\",\n\t\t\t\t\"hsl(7,69%,40%)\",\n\t\t\t\t\"hsl(4,70%,38%)\",\n\t\t\t\t\"hsl(1,71%,36%)\",\n\t\t\t\t\"hsl(358,72%,34%)\",\n\t\t\t\t\"hsl(355,73%,32%)\",\n\t\t\t\t\"hsl(352,74%,30%)\",\n\t\t\t\t\"hsl(349,75%,28%)\",\n\t\t\t\t\"hsl(346,76%,26%)\",\n\t\t\t\t\"hsl(343,77%,24%)\"\n\t\t\t]],\n\n\t\t\t[\"green\", [\n\t\t\t\t\"hsla(50,48%,41%,0.1)\",\n\t\t\t\t\"hsla(50,60%,82%,0.7)\",\n\t\t\t\t\"hsla(53,60%,80%,0.8)\",\n\t\t\t\t\"hsla(56,60%,78%,0.9)\",\n\t\t\t\t\"hsl(59,60%,76%)\",\n\t\t\t\t\"hsl(62,60%,74%)\",\n\t\t\t\t\"hsl(65,60%,72%)\",\n\t\t\t\t\"hsl(68,60%,70%)\",\n\t\t\t\t\"hsl(71,60%,68%)\",\n\t\t\t\t\"hsl(74,60%,66%)\",\n\t\t\t\t\"hsl(77,60%,64%)\",\n\t\t\t\t\"hsl(80,60%,62%)\",\n\t\t\t\t\"hsl(83,60%,60%)\",\n\t\t\t\t\"hsl(86,60%,58%)\",\n\t\t\t\t\"hsl(89,61%,56%)\",\n\t\t\t\t\"hsl(92,62%,54%)\",\n\t\t\t\t\"hsl(95,63%,52%)\",\n\t\t\t\t\"hsl(98,64%,50%)\",\n\t\t\t\t\"hsl(101,65%,48%)\",\n\t\t\t\t\"hsl(104,66%,46%)\",\n\t\t\t\t\"hsl(106,67%,44%)\",\n\t\t\t\t\"hsl(108,68%,42%)\",\n\t\t\t\t\"hsl(110,69%,40%)\",\n\t\t\t\t\"hsl(112,70%,38%)\",\n\t\t\t\t\"hsl(114,71%,36%)\",\n\t\t\t\t\"hsl(116,72%,34%)\",\n\t\t\t\t\"hsl(118,73%,32%)\",\n\t\t\t\t\"hsl(120,74%,30%)\",\n\t\t\t\t\"hsl(122,75%,28%)\",\n\t\t\t\t\"hsl(124,76%,26%)\",\n\t\t\t\t\"hsl(126,77%,24%)\"\n\n\t\t\t]],\n\t\t\t[\"blue\", [\n\t\t\t\t\"hsla(260,8%,64%,0.1)\",\n\t\t\t\t\"hsla(185,60%,82%,0.7)\",\n\t\t\t\t\"hsla(186,60%,80%,0.8)\",\n\t\t\t\t\"hsla(187,60%,78%,0.9)\",\n\t\t\t\t\"hsl(188,60%,76%)\",\n\t\t\t\t\"hsl(189,60%,74%)\",\n\t\t\t\t\"hsl(190,60%,72%)\",\n\t\t\t\t\"hsl(191,60%,70%)\",\n\t\t\t\t\"hsl(192,60%,68%)\",\n\t\t\t\t\"hsl(193,60%,66%)\",\n\t\t\t\t\"hsl(194,60%,64%)\",\n\t\t\t\t\"hsl(195,60%,62%)\",\n\t\t\t\t\"hsl(196,60%,60%)\",\n\t\t\t\t\"hsl(197,60%,58%)\",\n\t\t\t\t\"hsl(198,61%,56%)\",\n\t\t\t\t\"hsl(199,62%,54%)\",\n\t\t\t\t\"hsl(200,63%,52%)\",\n\t\t\t\t\"hsl(201,64%,50%)\",\n\t\t\t\t\"hsl(202,65%,48%)\",\n\t\t\t\t\"hsl(203,66%,46%)\",\n\t\t\t\t\"hsl(204,67%,44%)\",\n\t\t\t\t\"hsl(205,68%,42%)\",\n\t\t\t\t\"hsl(206,69%,40%)\",\n\t\t\t\t\"hsl(207,70%,38%)\",\n\t\t\t\t\"hsl(208,71%,36%)\",\n\t\t\t\t\"hsl(209,72%,34%)\",\n\t\t\t\t\"hsl(210,73%,32%)\",\n\t\t\t\t\"hsl(211,74%,30%)\",\n\t\t\t\t\"hsl(212,75%,28%)\",\n\t\t\t\t\"hsl(213,76%,26%)\",\n\t\t\t\t\"hsl(214,77%,24%)\"\n\t\t\t]],\n\n\t\t\t[\"purple\", [\n\t\t\t\t\"hsla(204,13%,62%,0.1)\",\n\t\t\t\t\"hsla(190,47%,82%,0.7)\",\n\t\t\t\t\"hsla(194,48%,80%,0.8)\",\n\t\t\t\t\"hsla(198,49%,78%,0.9)\",\n\t\t\t\t\"hsl(202,50%,76%)\",\n\t\t\t\t\"hsl(206,51%,74%)\",\n\t\t\t\t\"hsl(210,52%,72%)\",\n\t\t\t\t\"hsl(214,53%,70%)\",\n\t\t\t\t\"hsl(218,54%,68%)\",\n\t\t\t\t\"hsl(222,55%,66%)\",\n\t\t\t\t\"hsl(226,56%,64%)\",\n\t\t\t\t\"hsl(230,57%,62%)\",\n\t\t\t\t\"hsl(234,58%,60%)\",\n\t\t\t\t\"hsl(238,59%,58%)\",\n\t\t\t\t\"hsl(242,61%,56%)\",\n\t\t\t\t\"hsl(246,62%,54%)\",\n\t\t\t\t\"hsl(250,63%,52%)\",\n\t\t\t\t\"hsl(254,64%,50%)\",\n\t\t\t\t\"hsl(258,65%,48%)\",\n\t\t\t\t\"hsl(262,66%,46%)\",\n\t\t\t\t\"hsl(266,67%,44%)\",\n\t\t\t\t\"hsl(270,68%,42%)\",\n\t\t\t\t\"hsl(274,69%,40%)\",\n\t\t\t\t\"hsl(278,70%,38%)\",\n\t\t\t\t\"hsl(282,71%,36%)\",\n\t\t\t\t\"hsl(286,72%,34%)\",\n\t\t\t\t\"hsl(290,73%,32%)\",\n\t\t\t\t\"hsl(294,74%,30%)\",\n\t\t\t\t\"hsl(298,75%,28%)\",\n\t\t\t\t\"hsl(302,76%,26%)\",\n\t\t\t\t\"hsl(306,77%,24%)\"\n\t\t\t]],\n\n\t\t\t[\"greenred\", [\n\t\t\t\t\"hsla(120,52%,45%,0.1)\",\n\t\t\t\t\"hsla(120,60%,50%,0.7)\",\n\t\t\t\t\"hsla(115,60%,59%,0.8)\",\n\t\t\t\t\"hsla(110,60%,50%,0.9)\",\n\t\t\t\t\"hsl(105,60%,51%)\",\n\t\t\t\t\"hsl(100,60%,52%)\",\n\t\t\t\t\"hsl(95,60%,53%)\",\n\t\t\t\t\"hsl(90,60%,54%)\",\n\t\t\t\t\"hsl(85,60%,55%)\",\n\t\t\t\t\"hsl(80,61%,56%)\",\n\t\t\t\t\"hsl(75,62%,57%)\",\n\t\t\t\t\"hsl(70,63%,58%)\",\n\t\t\t\t\"hsl(67,64%,59%)\",\n\t\t\t\t\"hsl(64,65%,58%)\",\n\t\t\t\t\"hsl(59,65%,56%)\",\n\t\t\t\t\"hsl(56,65%,54%)\",\n\t\t\t\t\"hsl(53,65%,52%)\",\n\t\t\t\t\"hsl(50,65%,50%)\",\n\t\t\t\t\"hsl(47,65%,50%)\",\n\t\t\t\t\"hsl(44,66%,50%)\",\n\t\t\t\t\"hsl(41,67%,50%)\",\n\t\t\t\t\"hsl(38,68%,50%)\",\n\t\t\t\t\"hsl(35,69%,50%)\",\n\t\t\t\t\"hsl(32,70%,50%)\",\n\t\t\t\t\"hsl(28,71%,50%)\",\n\t\t\t\t\"hsl(24,72%,50%)\",\n\t\t\t\t\"hsl(20,73%,50%)\",\n\t\t\t\t\"hsl(16,74%,50%)\",\n\t\t\t\t\"hsl(12,75%,50%)\",\n\t\t\t\t\"hsl(8,76%,50%)\",\n\t\t\t\t\"hsl(0,77%,50%)\"\n\t\t\t]],\n\n\t\t\t[\"divergent\", [\n\t\t\t\t\"hsla(120,52%,45%,0.1)\",\n\t\t\t\t\"hsl(12,70%,50%)\",\n\t\t\t\t\"hsl(24,70%,50%)\",\n\t\t\t\t\"hsl(36,70%,50%)\",\n\t\t\t\t\"hsl(48,70%,50%)\",\n\t\t\t\t\"hsl(60,70%,50%)\",\n\t\t\t\t\"hsl(72,70%,50%)\",\n\t\t\t\t\"hsl(84,70%,50%)\",\n\t\t\t\t\"hsl(96,70%,50%)\",\n\t\t\t\t\"hsl(108,70%,50%)\",\n\t\t\t\t\"hsl(120,70%,50%)\",\n\t\t\t\t\"hsl(132,70%,50%)\",\n\t\t\t\t\"hsl(144,70%,50%)\",\n\t\t\t\t\"hsl(156,70%,50%)\",\n\t\t\t\t\"hsl(168,70%,50%)\",\n\t\t\t\t\"hsl(180,70%,50%)\",\n\t\t\t\t\"hsl(192,70%,50%)\",\n\t\t\t\t\"hsl(204,70%,50%)\",\n\t\t\t\t\"hsl(216,70%,50%)\",\n\t\t\t\t\"hsl(228,70%,50%)\",\n\t\t\t\t\"hsl(240,70%,50%)\",\n\t\t\t\t\"hsl(252,70%,50%)\",\n\t\t\t\t\"hsl(264,70%,50%)\",\n\t\t\t\t\"hsl(276,70%,50%)\",\n\t\t\t\t\"hsl(288,70%,50%)\",\n\t\t\t\t\"hsl(300,70%,50%)\",\n\t\t\t\t\"hsl(312,70%,50%)\",\n\t\t\t\t\"hsl(324,70%,50%)\",\n\t\t\t\t\"hsl(336,70%,50%)\",\n\t\t\t\t\"hsl(348,70%,50%)\",\n\t\t\t\t\"hsl(0,70%,50%)\"\n\t\t\t]],\n\t\t\t[\"venta\", [\n\t\t\t\t\"rgba(233,255,233,0.1)\",\n\t\t\t\t\"#FF0000\",\n\t\t\t\t\"#FF0000\",\n\t\t\t\t\"#FF0000\",\n\t\t\t\t\"#FF0000\",\n\t\t\t\t\"#FF0000\",\n\t\t\t\t\"#FF0000\",\n\t\t\t\t\"#FF0000\",\n\t\t\t\t\"#FF0000\",\n\t\t\t\t\"#FF0000\",\n\t\t\t\t\"#FF0000\",\n\t\t\t\t\"#FF0000\",\n\t\t\t\t\"#FF0000\",\n\t\t\t\t\"#FFDB14\",\n\t\t\t\t\"#FFDB14\",\n\t\t\t\t\"#FFDB14\",\n\t\t\t\t\"#FFDB14\",\n\t\t\t\t\"#FFDB14\",\n\t\t\t\t\"#FFDB14\",\n\t\t\t\t\"#FFDB14\",\n\t\t\t\t\"#008000\",\n\t\t\t\t\"#008000\",\n\t\t\t\t\"#008000\",\n\t\t\t\t\"#008000\",\n\t\t\t\t\"#008000\",\n\t\t\t\t\"#008000\",\n\t\t\t\t\"#008000\",\n\t\t\t\t\"#008000\",\n\t\t\t\t\"#008000\",\n\t\t\t\t\"#008000\",\n\t\t\t\t\"#008000\"\n\t\t\t]],\n\n\t\t\t[\"stock\", [\n\t\t\t\t\"rgba(233,255,233,0.1)\",\n\t\t\t\t\"#FF0000\",\n\t\t\t\t\"#FF0000\",\n\t\t\t\t\"#FF0000\",\n\t\t\t\t\"#FF0000\",\n\t\t\t\t\"#FF0000\",\n\t\t\t\t\"#FF0000\",\n\t\t\t\t\"#FF0000\",\n\t\t\t\t\"#FF0000\",\n\t\t\t\t\"#FF0000\",\n\t\t\t\t\"#008000\",\n\t\t\t\t\"#008000\",\n\t\t\t\t\"#008000\",\n\t\t\t\t\"#008000\",\n\t\t\t\t\"#008000\",\n\t\t\t\t\"#008000\",\n\t\t\t\t\"#008000\",\n\t\t\t\t\"#008000\",\n\t\t\t\t\"#008000\",\n\t\t\t\t\"#008000\",\n\t\t\t\t\"#7C0000\",\n\t\t\t\t\"#7C0000\",\n\t\t\t\t\"#7C0000\",\n\t\t\t\t\"#7C0000\",\n\t\t\t\t\"#7C0000\",\n\t\t\t\t\"#7C0000\",\n\t\t\t\t\"#7C0000\",\n\t\t\t\t\"#7C0000\",\n\t\t\t\t\"#7C0000\",\n\t\t\t\t\"#7C0000\",\n\t\t\t\t\"#7C0000\"\n\t\t\t]]\n\t\t],\n\t\t\"RGBColors\": [\n\t\t\t[\"brown\", [\"rgba(155,155,55,0.1)\", \"rgba(255,255,204,0.6)\", \"rgba(255,255,204,0.6)\", \"rgb(255,237,160)\", \"rgb(254,217,118)\", \"rgb(254,217,118)\", \"rgb(254,178,76)\",\n\t\t\t\t\"rgb(254,178,76)\", \"rgb(253,141,60)\", \"rgb(253,141,60)\", \"rgb(252,78,42)\", \"rgb(252,78,42)\", \"rgb(227,26,28)\", \"rgb(227,26,28)\", \"rgb(177,0,38)\", \"rgb(177,0,38)\"\n\t\t\t]],\n\t\t\t[\"green\", [\"rgba(155,155,55,0.1)\", \"rgba(247,252,245,0.6)\", \"rgba(247,252,245,0.6)\", \"rgba(229,245,224,0.7)\", \"rgba(199,233,192,0.8)\", \"rgba(199,233,192,0.8)\",\n\t\t\t\t\"rgba(161,217,155,0.9)\", \"rgba(161,217,155,0.9)\", \"rgb(116,196,118)\", \"rgb(116,196,118)\", \"rgb(65,171,93)\", \"rgb(65,171,93)\", \"rgb(35,139,69)\", \"rgb(35,139,69)\",\n\t\t\t\t\"rgb(0,90,50)\", \"rgb(0,90,50)\"\n\t\t\t]],\n\t\t\t[\"blue\", [\"rgba(160,155,170,0.1)\", \"rgba(247,251,255,0.6)\", \"rgba(247,251,255,0.6)\", \"rgb(222,235,247)\", \"rgb(198,219,239)\", \"rgb(198,219,239)\", \"rgb(158,202,225)\",\n\t\t\t\t\"rgb(158,202,225)\", \"rgb(107,174,214)\", \"rgb(107,174,214)\", \"rgb(66,146,198)\", \"rgb(66,146,198)\", \"rgb(33,113,181)\", \"rgb(33,113,181)\", \"rgb(8,69,148)\", \"rgb(8,69,148)\"\n\t\t\t]],\n\t\t\t[\"purple\", [\"rgba(145,160,170,0.1)\", \"rgba(247,252,253,0.6)\", \"rgba(247,252,253,0.6)\", \"rgb(224,236,244)\", \"rgb(191,211,230)\", \"rgb(191,211,230)\", \"rgb(158,188,218)\",\n\t\t\t\t\"rgb(158,188,218)\", \"rgb(140,150,198)\", \"rgb(140,150,198)\", \"rgb(140,107,177)\", \"rgb(140,107,177)\", \"rgb(136,65,157)\", \"rgb(136,65,157)\", \"rgb(110,1,107)\",\n\t\t\t\t\"rgb(110,1,107)\"\n\t\t\t]],\n\t\t\t[\"greenred\", [\"rgba(55,175,55,0.1)\", \"rgba(224,255,224,0.6)\", \"rgba(224,255,224,0.6)\", \"rgba(166,217,106,0.7)\", \"rgba(217,239,139,0.8)\", \"rgba(217,239,139,0.8)\",\n\t\t\t\t\"rgba(246,246,102,0.9)\", \"rgba(246,246,102,0.9)\", \"rgba(254,224,139,1)\", \"rgba(254,224,139,1)\", \"rgba(253,174,97,1)\", \"rgba(253,174,97,1)\", \"rgba(244,109,67,1)\",\n\t\t\t\t\"rgba(244,109,67,1)\", \"rgba(227,40,39,1)\", \"rgba(227,40,39,1)\"\n\t\t\t]],\n\t\t\t[\"divergent\", [\"rgba(200,155,133,0.1)\", \"rgba(178,24,43,0.6)\", \"rgba(178,24,43,0.6)\", \"rgb(214,96,77)\", \"rgb(244,165,130)\", \"rgb(244,165,130)\", \"rgb(253,219,199)\",\n\t\t\t\t\"rgb(253,219,199)\", \"rgb(209,229,240)\", \"rgb(209,229,240)\", \"rgb(146,197,222)\", \"rgb(146,197,222)\", \"rgb(67,147,195)\", \"rgb(67,147,195)\", \"rgb(33,102,172)\",\n\t\t\t\t\"rgb(33,102,172)\"\n\t\t\t]],\n\t\t\t[\"venta\", [\"rgba(233,255,233,0.1)\", \"#FF0000\", \"#FF0000\", \"#FF0000\", \"#FF0000\", \"#FF0000\", \"#FF0000\", \"#FFDB14\", \"#FFDB14\", \"#FFDB14\", \"#008000\", \"#008000\", \"#008000\",\n\t\t\t\t\"#008000\", \"#008000\", \"#008000\"\n\t\t\t]],\n\t\t\t[\"stock\", [\"rgba(233,255,233,0.1)\", \"#FF0000\", \"#FF0000\", \"#FF0000\", \"#FF0000\", \"#008000\", \"#008000\", \"#008000\", \"#008000\", \"#7C0000\", \"#7C0000\", \"#7C0000\", \"#7C0000\",\n\t\t\t\t\"#7C0000\", \"#7C0000\", \"#7C0000\"\n\t\t\t]]\n\t\t]\n\t},\n\t\"filter_mycolor\": {\n\t\t\"rows\": 4,\n\t\t\"cols\": 8,\n\t\t\"subThemeColors\": [\"000066\", \"660066\", \"660000\", \"CC3300\", \"666600\", \"006600\", \"006666\", \"333333\", \"000099\", \"990099\", \"990000\", \"FF3300\", \"999900\", \"009900\", \"009999\",\n\t\t\t\"666666\",\n\t\t\t\"0000CC\", \"CC00CC\", \"CC0000\", \"FF6600\", \"CCCC00\", \"00CC00\", \"00CCCC\", \"999999\", \"0000FF\", \"FF00FF\", \"FF0000\", \"FF9900\", \"FFFF00\", \"00FF00\", \"00FFFF\", \"CCCCCC\"\n\t\t]\n\t}\n};\n"],"names":["IconObject","canvas","markerOpts","this","url","toDataURL","fillColor","Object","assign","hslaString","hslcolor","a","h","s","l","rgbaString","hexcolor","r","g","b","parseHalf","foo","parseInt","compact","array","index","length","resIndex","result","value","parseHex","hexstring","opacity","darkenfactor","hex","replace","isNaN","parseFloat","substring","strokeColor","join","rgb","parseHSL","hslstring","hslcolor_stroke","hslparts","split","undefined","hsl","parseRGB","rgbstring","rgbcolor","rgbparts","hue2rgb","p","q","t","getColors","options","color0","color1","count","val","range","Math","floor","getColor","deccolor","stringcolor","parsedcolor","indexOf","toDecColor","color","factor","darkercolor","darken","padHex","str_in","String","Wicket","Wkt","WKT2Object","WKT","wkt","read","e","console","zlog","obj","toObject","reverseInnerPolygons","warn","loadingcircle","timeout","message","container","theGlobalvars","window","globalvars","containerIds","loadingcircleId","jqContainerLoading","$","preloaderFN","removeContainer","delay","setTimeout","addClass","detach","find","removeEvent","clearTimeout","attr","append","html","max","setModalClass","cls","footer","modal","modal_body","modal_footer","removeClass","isArray","prototype","toString","call","spaceString","str","cleanString","strict","cleanstr","toLowerCase","randomname","limit","text","possible","i","charAt","random","getCookie","name","match","root","document","cookie","RegExp","blacklistedfields","CollectionUtils","DataSet","type","category","addGeometricBoundaries","element","domid","mapModel","Polygons","each","Polygon","_","template","attributes","findFields","callback","elemento","Promise","resolve","reject","fieldsFound","fields","isEmpty","uniq","flatten","map","getArray","item","properties","getProperties","keys","finalkeys","chain","reduce","memo","propiedad","label","omit","Model","columns","column","get","findQualityFields","qualityfilters","propiedadObj","arraypropiedad","backend_grouped","registros_numericos","filter","Number","registros_totales","data","groupBy","c","d","zwarn","findQuantityFields","quantityfilters","min","localmin","localmax","discriminateFields","toJSON","MarkerFactory","createTransparentMarkerIcon","theoptions","scale","fontsize","markerCanvas","text_x","createElement","context","getContext","font","width","height","clearRect","colors","beginPath","shadow","textBaseline","textWidth","measureText","unicodelabel","shadowOffsetX","shadowOffsetY","shadowBlur","fillStyle","shadowColor","fillText","strokeStyle","strokeText","textmetric","generateTransparentCanvas","google","maps","size","Size","origin","Point","anchor","scaledSize","createFatMarkerIcon","grad","createLinearGradient","anchorX","anchorY","addColorStop","moveTo","arc","PI","lineTo","fill","stroke","radius","label_x","label_y","generateFatCanvas","createTextMarker","ancho","x","y","cx","cy","rect","generateCanvas","createClusterIcon","labelvalue","setLineDash","lineWidth","generateClusterCanvas","generateAutoicon","cacheKey","JSON","stringify","iconObj","sessionStorage","getItem","no_cache","parse","is_icon","transparent_background","cached","setItem","parseColorString","somecolor","original","round","hslToRGB","in_r","in_g","in_b","in_a","sum","diff","rgbToHSL","rgba","hsla","autoIcon","slice","fromCharCode","_wrapped","delimiter","constructor","Array","trim","sub","beginsWith","endsWith","initializer","wrapVertices","regExes","typeStr","spaces","numeric","comma","parenComma","coord","doubleParenComma","trimParens","ogcTypes","crudeJson","components","fromObject","isCollection","sameCoords","hasOwnProperty","fromJson","deconstruct","isRectangle","config","construct","write","j","k","coords","iring","oring","geometry","coordinates","push","toJson","cs","json","ring","rings","exec","toUpperCase","bbox","concat","merge","prefix","TypeError","matches","base","ingest","apply","test","log","pieces","extract","point","multipoint","parts","linestring","multilinestring","polygon","multipolygon","box","geometrycollection","points","multipoints","line","lines","subcomponents","n","x_cord","y_cord","polygons","component","position","LatLng","Marker","arr","editable","path","Polyline","bounds","LatLngBounds","Rectangle","verts","paths","area","polygonIsClockwise","reverse","v","extend","multiFlag","features","sign","tmp","response","lat","lng","vertex","linestrings","spherical","computeSignedArea","getPosition","getPath","getAt","areas","getPaths","abs","lastIndexOf","equals","Circle","getCenter","getRadius","d2r","rlat","rlng","cos","theta","sin","getSouthWest","getNorthEast","getBounds","Data","Feature","getGeometry","LineString","getLength","MultiPoint","MultiLineString","MultiPolygon","GeometryCollection","objects","object","comps","id_selector","preloader","loading","appendTo","colorset","polygon_mycolor","rows","cols","subThemeColors","marker_mycolor","gradient_mycolor","RGBColors","filter_mycolor","self","global","ButtonFactory"],"mappings":"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,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,iBACA,iBACA,iBACA,mBACA,mBACA,mBACA,mBACA,mBACA,sBAGA,SACA,uBACA,uBACA,uBACA,uBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,sBAGA,QACA,uBACA,wBACA,wBACA,wBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,sBAGA,UACA,wBACA,wBACA,wBACA,wBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,sBAGA,YACA,wBACA,wBACA,wBACA,wBACA,mBACA,mBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,iBACA,oBAGA,aACA,wBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,oBAEA,SACA,wBACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,aAGA,SACA,wBACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,aAGFG,YACE,SAAU,uBAAwB,wBAAyB,wBAAyB,mBAAoB,mBAAoB,mBAAoB,kBAChJ,kBAAmB,kBAAmB,kBAAmB,iBAAkB,iBAAkB,iBAAkB,iBAAkB,gBAAiB,mBAElJ,SAAU,uBAAwB,wBAAyB,wBAAyB,wBAAyB,wBAAyB,wBACtI,wBAAyB,wBAAyB,mBAAoB,mBAAoB,iBAAkB,iBAAkB,iBAAkB,iBAChJ,eAAgB,kBAEhB,QAAS,wBAAyB,wBAAyB,wBAAyB,mBAAoB,mBAAoB,mBAAoB,mBAChJ,mBAAoB,mBAAoB,mBAAoB,kBAAmB,kBAAmB,kBAAmB,kBAAmB,gBAAiB,mBAEzJ,UAAW,wBAAyB,wBAAyB,wBAAyB,mBAAoB,mBAAoB,mBAAoB,mBAClJ,mBAAoB,mBAAoB,mBAAoB,mBAAoB,mBAAoB,kBAAmB,kBAAmB,iBAC1I,oBAEA,YAAa,sBAAuB,wBAAyB,wBAAyB,wBAAyB,wBAAyB,wBACxI,wBAAyB,wBAAyB,sBAAuB,sBAAuB,qBAAsB,qBAAsB,qBAC5I,qBAAsB,oBAAqB,uBAE3C,aAAc,wBAAyB,sBAAuB,sBAAuB,iBAAkB,mBAAoB,mBAAoB,mBAC/I,mBAAoB,mBAAoB,mBAAoB,mBAAoB,mBAAoB,kBAAmB,kBAAmB,kBAC1I,qBAEA,SAAU,wBAAyB,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAC5J,UAAW,UAAW,aAEtB,SAAU,wBAAyB,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAC5J,UAAW,UAAW,cAIzBC,gBACCN,KAAQ,EACRC,KAAQ,EACRC,gBAAmB,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAC9J,SACA,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,YF/SrJzT,KAAuB,iBAAR8T,MAAoBA,KAAKA,OAASA,MAAQA,MAC1C,iBAAVC,QAAsBA,OAAOA,SAAWA,QAAUA,kBAuH1DC,cAAeA,cACf/X,IAAKA,IACLD,OAAQA,OACRE,WAAYA,WACZW,cAAeA,cACfwW,SAAUA,SACVhV,cAAeA,cACfO,QAASA,QACTI,YAAaA,YACbE,YAAaA,YACbI,WAAYA,WACZO,UAAWA"}